import{S as Z,r as s,j as e,G as r,E as T,a6 as ee,n as M,bm as te,B as S,I as F,ap as se,aq as re,a9 as oe,T as y,bn as ae,bo as le,A as ie,u as ne,z as ce,c as L,bp as ue,t as de,bq as me,C as pe,F as $,H as he,J as V,br as xe,o as U,aH as A,bs as be,bt as ge,bu as je}from"./index-CpZD2H93.js";import{d as fe}from"./CloudUpload-C2WsbpCZ.js";import{E as Se}from"./Errormessage-DVJGTehf.js";const ye=({ValidFileTypes:m,MaxfileSize:x,ChangeFile:E,errorMessage:c="",clickDelete:C=void 0,clickFileName:b=void 0,FileName:o="",FilePath:B="",width:v="300px",viewIcon:I=!1,deleteIcon:w=!1,FileLabel:a="",isMandatory:g=!0,height:k="auto"})=>{Z();const p=s.useRef(null),[j,f]=s.useState("");s.useEffect(()=>{o==""&&(p.current.value=null)},[o]);const D=async i=>{const u=i.target.files;let l="";for(let n=0;n<u.length;n++){const d=ae(u[n],m,x);d==null?(l=await le(u[n]),f(""),c="",E({Name:u[n].name,Value:l.slice(l.indexOf(",")+1),FileExtension:u[n].name.split(".").at(-1),ErrorMsg:""})):(f(d),c="",E({Name:"",Value:"",FileExtension:"",ErrorMsg:d}),p.current.value=null)}};return e.jsxs(r,{container:!0,children:[e.jsxs(r,{item:!0,xs:12,sx:{display:"flex",alignItems:j?"flex-start":"center",justifyContent:"center",height:"auto"},children:[e.jsx(T,{title:"Supports only "+m.join(", ")+" files types up to "+(x/1e6).toString()+" KB.",children:e.jsxs(ee,{sx:{width:v,height:k,border:i=>`1px dashed ${i.colors.primary.main}`,gap:1,position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between"},color:"primary",children:[e.jsxs(M,{direction:"row",alignItems:"center",gap:1,sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[o?e.jsx(te,{}):e.jsx(fe,{}),o==""?a||" No file selected":o,g&&e.jsx("span",{style:{color:"red"},children:"*"}),e.jsx(S,{sx:{textAlign:"center"},children:e.jsx("input",{ref:p,type:"file",onChange:D,style:{opacity:0,position:"absolute",top:0,left:0,right:0,bottom:0,cursor:"pointer"}})})]}),e.jsx(M,{direction:"row",alignItems:"center",justifyContent:"center",gap:1})]})}),B!=""&&e.jsxs(M,{direction:"row",spacing:-1,children:[w&&e.jsx(F,{sx:{marginLeft:1,"&:hover":{color:"red",backgroundColor:se[100]}},onClick:C,children:e.jsx(re,{style:{fontSize:30}})}),I&&e.jsx(F,{color:"primary",onClick:b,children:e.jsx(oe,{style:{fontSize:30}})})]})]}),c&&e.jsx(r,{item:!0,xs:12,sx:{display:"flex",alignItems:"left",justifyContent:"left",pt:2},children:e.jsx(y,{children:c&&e.jsx(Se,{Error:c})})})]})},Ie=()=>{ie();const m=ne(),x=Number(localStorage.getItem("localSchoolId")),E=Number(sessionStorage.getItem("AcademicYearId")),c=sessionStorage.getItem("RoleId"),C=Number(localStorage.getItem("UserId")),[b,o]=s.useState(""),[B,v]=s.useState(""),[I,w]=s.useState(""),[a,g]=s.useState(""),[k,p]=s.useState(sessionStorage.getItem("MobileNumber")),[j,f]=s.useState(""),[D,i]=s.useState(""),[u,l]=s.useState(""),[n,d]=s.useState(""),[W,R]=s.useState(""),_=localStorage.getItem("FolderName"),z=["XLS","XLSX","DOC","DOCX","PDF","JPG","JPEG"],G=2e8,{showAlert:O,closeAlert:q}=s.useContext(ce),N=L(t=>t.Support.getUserDetails),P=L(t=>t.Support.SaveSupport);s.useEffect(()=>{N&&g(N)},[N]),s.useEffect(()=>{const t={asSchoolId:x,asUserId:C,asRoleId:Number(c)};m(ue(t))},[]);const X=()=>{const t={asSchoolId:x,asAcademicYrId:E,asFileName:I,asDescription:j,asEmailAddress:a,asUserId:C,asSaveFeature:"Support",asSubject:b,asMobileNo:k,asBase64String:B,asFolderName:_};O({title:"Please Confirm",message:"Are you sure you want to submit the support request?",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:q,onConfirm:()=>{m(ge(t)),q()}})},Y=t=>{const h=t.target.value;if(/^[0-9]*$/.test(h)&&h.length<=10){const Q=je(h);p(h),d(Q)}else d("")},H=()=>{let t=!1;const h=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;a.trim()?a.length>100?(l("Email Address should not exceed 100 characters."),t=!0):h.test(a)?l(""):(l("E-mail should be in a valid format (For Example: john.smith@yahoo.com)."),t=!0):(l("Email Address should not be blank."),t=!0),b.trim()?i(""):(i("Problem subject should not be blank."),t=!0),j.trim()?R(""):(R("Problem Description should not be blank."),t=!0),t||X()},J=()=>{o(""),v(""),w(""),g(a),p(sessionStorage.getItem("MobileNumber")),f(""),i(""),l(""),d(""),R("")};s.useEffect(()=>{P&&(de.success(P),J(),m(me()))},[P]);const K=t=>{w(t.Name),v(t.Value)};return e.jsx(e.Fragment,{children:e.jsxs(S,{sx:{px:2},children:[e.jsx(pe,{navLinks:[{title:"Support",path:""}],rightActions:e.jsxs(e.Fragment,{children:[e.jsx(S,{children:e.jsx(T,{title:"Please write us your queries/ problem. We will try our level best to assist you",children:e.jsx("span",{children:e.jsx(F,{sx:{color:"white",backgroundColor:$[500],height:"36px !important",":hover":{backgroundColor:$[600]}},children:e.jsx(he,{})})})})}),e.jsx(S,{children:e.jsx(T,{title:"Submit",children:e.jsx("span",{children:e.jsx(F,{sx:{color:"white",backgroundColor:V[500],height:"36px !important",":hover":{backgroundColor:V[600]}},onClick:H,children:e.jsx(xe,{})})})})})]})}),e.jsxs(r,{sx:{backgroundColor:"white",mb:1,p:1},children:[e.jsx(y,{variant:"h4",gutterBottom:!0,pl:1,children:"Support Request"}),e.jsxs(r,{sx:{backgroundColor:"white",p:1},children:[e.jsxs(y,{variant:"h5",gutterBottom:!0,children:["Dear Teacher, ",e.jsx("br",{})]}),e.jsx(y,{variant:"body1",gutterBottom:!0,children:"Mention the Subject for your Support Request and Description of the problem in detail with exact steps if possible. You may attach a file as a supporting document. It will help our support member to understand the problem in full and speed up resolution of your request."})]})]}),e.jsxs(S,{sx:{backgroundColor:"white",mb:2,p:1},children:[e.jsx(r,{sx:{backgroundColor:"white",p:1},children:e.jsx(y,{variant:"h4",gutterBottom:!0,children:"Write to Us"})}),e.jsxs(r,{container:!0,spacing:2,p:1,children:[e.jsxs(r,{item:!0,xs:12,md:6,children:[e.jsx(U,{fullWidth:!0,variant:"outlined",label:e.jsxs("span",{children:["E-mail Address ",e.jsx("span",{style:{color:"red"},children:"*"})]}),value:a,onChange:t=>g(t.target.value)}),e.jsx(A,{Error:u})]}),e.jsxs(r,{item:!0,xs:12,md:6,children:[e.jsx(U,{fullWidth:!0,label:"Mobile Number :",variant:"outlined",value:k,onChange:Y}),e.jsx(A,{Error:n})]}),e.jsxs(r,{item:!0,xs:12,md:6,children:[e.jsx(U,{fullWidth:!0,label:e.jsxs("span",{children:["Problem Subject ",e.jsx("span",{style:{color:"red"},children:"*"})]}),variant:"outlined",value:b,onChange:t=>o(t.target.value)}),e.jsx(A,{Error:D})]}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(ye,{ValidFileTypes:z,MaxfileSize:G,ChangeFile:K,errorMessage:"",FileName:I,FileLabel:"Attachment : ",height:"52px",width:"100%",isMandatory:!1})}),e.jsxs(r,{item:!0,xs:12,children:[e.jsx(be,{fullWidth:!0,label:e.jsxs("span",{children:["Description ",e.jsx("span",{style:{color:"red"},children:"*"})]}),variant:"outlined",multiline:!0,value:j,onChange:t=>f(t.target.value)}),e.jsx(A,{Error:W})]})]})]})]})})};export{Ie as default};
