import{P as U,r as n,h as $,s as H,S as I,j as e,B as u,T as C,cG as V,E as G,cH as W,u as z,c as O,t as X,bq as q,o as g,aH as b,fx as Y,G as j,fA as J,bt as _}from"./index-CpZD2H93.js";import{u as K}from"./formik.esm-Crucl9hw.js";import{E as Q}from"./Errormessage-DVJGTehf.js";import{N as Z,a as ee}from"./Note-D5w6lthy.js";import{P as se}from"./PageHeader-C9ChZO91.js";import{B as P}from"./ButtonStyle-DAEB_dBE.js";import{L as te}from"./CardStyle-CBuNm0_N.js";import{H as E}from"./Hidden-BOlgbOvj.js";import"./Card-B0aZ7mGs.js";N.propTypes={Note:U.string};function N({Note:h}){const[p,c]=n.useState(!1),m=()=>{c(i=>!i)},x=()=>{c(!1)};$(),H("span")(({theme:i})=>`
          border-radius: 22px;
          width: ${i.spacing(1.5)};
          height: ${i.spacing(1.5)};
          display: inline-block;
          margin-right: ${i.spacing(1)};
          margin-top: -${i.spacing(.1)};
      `);const d=I();return e.jsx(e.Fragment,{children:e.jsx(u,{sx:{px:2},children:e.jsxs(u,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:2,marginTop:"-20px"},children:[e.jsx(C,{variant:"body2",fontSize:"15px",children:e.jsx("br",{})})," ",e.jsx("br",{}),e.jsx(V,{onClickAway:x,children:e.jsx(G,{PopperProps:{disablePortal:!0},onClose:m,open:p,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:h,arrow:!0,placement:"left",componentsProps:{tooltip:{sx:{marginLeft:"70px",transform:"translate3d(20px, 14.5px, 0px) !important",marginTop:"-10px"}}},children:e.jsx(W,{type:"button",onClick:m,className:d.iIconExamSchedule})})})]})})})}function pe(){const h=I(),p=z(),[c,m]=n.useState("");n.useState("");const[x,d]=n.useState();n.useState("");const i=sessionStorage.getItem("AcademicYearId"),v=localStorage.getItem("localSchoolId"),D=sessionStorage.getItem("Id"),[R,M]=n.useState(""),[w,B]=n.useState(""),S=O(t=>t.Support.SaveSupport),L=["1) Dear Student / Parent, Mention the Subject for your Support Request and Description of the problem in detail with exact steps if possible.","2) You may attach a file as a supporting document.","3) It will help our support member to understand the problem in full and speed up the resolution of your request."],F=async t=>{d(t.target.files);const a=t.target.files;let l="";for(let r=0;r<a.length;r++)J(a[r],["jpg","xls","xlsx","doc","docx","pdf","jpg","jpeg"],2e6)==null&&(M(a[r].name),l=await k(a[r]),B(l.slice(l.indexOf(",")+1)))},k=t=>new Promise((a,l)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>{a(r.result)},r.onerror=o=>{l(o)}}),y="(Supports only XLS, XLSX, DOC, DOCX, PDF, JPG, JPEG files types up to 1 MB)",f=n.useRef(null),s=K({initialValues:{EmailId:"",MobileNumber:"",ProblemsSubject:"",Description:""},onSubmit:(t,{resetForm:a})=>{d(x),A(),a(),f.current.value=null},onReset:t=>{d(null),m(null),f.current.value=null},validate:t=>{const a=/^\S+@\S+\.\S+$/,l=/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,r=/^[0-9\b]+$/,o={};return t.EmailId?a.test(t.EmailId)||(o.EmailId="Invalid email address"):o.EmailId="Please enter the Email address.",l.test(t.MobileNumber)||(o.MobileNumber="Please enter the valid mobile number"),t.MobileNumber===""||r.test(t.MobileNumber),t.Description||(o.Description="Description should not be blank."),t.ProblemsSubject?t.ProblemsSubject.length>2e3&&(o.ProblemsSubject="Length shoulbe be 2000 word "):o.ProblemsSubject="Please enter the problem subject for the support.",o}}),T={asUserId:D,asSchoolId:v,asAcademicYearId:i,asFileName:R,asDescription:s.values.Description,asEmailAddress:s.values.EmailId,asSubject:s.values.ProblemsSubject,asMobileNo:s.values.MobileNumber,asBase64URLString:w},A=()=>{p(_(T))};return n.useEffect(()=>{X.success(S.Message),p(q())},[S]),e.jsxs(u,{sx:{px:2},children:[e.jsx(se,{heading:"Support",subheading:""}),e.jsxs(te,{children:[e.jsx(Z,{NoteDetail:L}),e.jsxs("form",{onSubmit:s.handleSubmit,children:[e.jsx(g,{margin:"dense",fullWidth:!0,label:"Email Id",name:"EmailId",type:"text",variant:"standard",value:s.values.EmailId,onBlur:s.handleBlur,onChange:s.handleChange}),s.touched.EmailId&&s.errors.EmailId?e.jsx(b,{Error:s.errors.EmailId}):null,e.jsx(g,{margin:"dense",fullWidth:!0,label:"Mobile Number",name:"MobileNumber",type:"text",variant:"standard",inputProps:{maxLength:10},value:s.values.MobileNumber,onBlur:s.handleBlur,onChange:s.handleChange}),s.touched.MobileNumber&&s.errors.MobileNumber?e.jsx(b,{Error:s.errors.MobileNumber}):null,e.jsx(g,{margin:"dense",fullWidth:!0,label:"Problems Subject",name:"ProblemsSubject",inputProps:{maxLength:200},type:"text",variant:"standard",value:s.values.ProblemsSubject,onBlur:s.handleBlur,onChange:s.handleChange}),s.touched.ProblemsSubject&&s.errors.ProblemsSubject?e.jsx(b,{Error:s.errors.ProblemsSubject}):null,e.jsx(Y,{"aria-label":"empty textarea",placeholder:"Description",minRows:4,name:"Description",value:s.values.Description,onChange:s.handleChange,onBlur:s.handleBlur,style:{width:"100%"},nonce:void 0,onResize:void 0,onResizeCapture:void 0}),s.touched.Description&&s.errors.Description?e.jsx(b,{Error:s.errors.Description}):null,e.jsxs(u,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{className:h.iIconSupport,children:e.jsx("input",{ref:f,type:"file",onChange:F})}),e.jsx(u,{mt:2,children:e.jsx(E,{mdUp:!0,children:e.jsx(N,{Note:y})})})]}),e.jsx(E,{mdDown:!0,children:e.jsx(ee,{children:e.jsx(C,{variant:"body2",children:y})})}),c&&e.jsx(Q,{Error:c}),e.jsxs(j,{container:!0,spacing:2,justifyContent:"center",children:[e.jsx(j,{item:!0,xs:6,md:2,children:e.jsx(P,{onChange:s.handleChange,type:"submit",fullWidth:!0,color:"primary",children:"Submit"})}),e.jsx(j,{item:!0,xs:6,md:2,children:e.jsx(P,{fullWidth:!0,color:"secondary",type:"reset",onClick:s.handleReset,children:"Reset"})})]})]})]})]})}export{pe as default};
