import{j as e,d5 as te,r as s,o as se,u as oe,A as ae,az as z,z as re,c as h,iQ as ne,t as E,iZ as ce,iP as U,i_ as le,i$ as me,a0 as ie,a1 as de,bd as ue,T as G,a3 as xe,G as i,aH as Se,B as he,bs as H,a5 as Ce,n as ge,a6 as D,ap as Y,J as $,j0 as be,j1 as pe,j2 as fe}from"./index-CpZD2H93.js";const De=({DateValue:d,onDateChange:c,label:a,size:r})=>e.jsx(e.Fragment,{children:e.jsx(te,{value:d?new Date(d):null,onChange:c,format:"dd MMM yyyy",label:a?e.jsx(e.Fragment,{children:a}):"Select Date",views:["year","month","day"],slotProps:{textField:{variant:"outlined",size:r||"small"}}})}),je=({Item:d,ClickItem:c,label:a,size:r,isMandatory:l=!0})=>{const[o,u]=s.useState("");s.useEffect(()=>{const n=new Date,C=n.getHours().toString().padStart(2,"0"),g=n.getMinutes().toString().padStart(2,"0");u(`${C}:${g}`)},[]),s.useEffect(()=>{c(o)},[o,c]);const m=n=>{u(n.target.value)};return e.jsx("div",{children:e.jsx(se,{label:a?e.jsxs(e.Fragment,{children:[a," ",l&&e.jsx("span",{style:{color:"red"},children:"*"})]}):"Select Time",type:"time",value:o,onChange:m,fullWidth:!0,size:r||"medium"})})},we=({open:d,setOpen:c,ClickCloseDialogbox:a,CommentId:r,SchoolWiseStudentIdparam:l})=>{const o=oe();ae();const u=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),[m,n]=s.useState(""),[C,g]=s.useState(""),[b,j]=s.useState(""),[y,T]=s.useState(""),[v,k]=s.useState(z(new Date));s.useState(z(new Date));const[J,ve]=s.useState(""),[A,R]=s.useState(u),[P,M]=s.useState(""),{showAlert:Q,closeAlert:L}=s.useContext(re),x=Number(localStorage.getItem("localSchoolId")),p=Number(sessionStorage.getItem("AcademicYearId")),f=Number(localStorage.getItem("UserId")),I=h(t=>t.StudentRecordCommentPopup.DeleteCommentMsg),N=h(t=>t.StudentRecordCommentPopup.SaveComment),w=h(t=>t.StudentRecordCommentPopup.SaveandSubmitComment),S=h(t=>t.AddStudentRecords.getstudentrecordcomment),Z=h(t=>t.AddStudentRecords.listCommentDetails),B={asSchoolId:x,asSchoolwiseStudentId:Number(l),asAcademicYearId:p,asIsReadMode:"false",asUserId:f};s.useEffect(()=>{S!=null&&(k(S.Date),n(S.Comment),j(S.LectureName))},[S]),s.useEffect(()=>{if(r!=""){const t={asSchoolId:x,asSchoolwiseStudentId:Number(l),asCommentId:Number(r)};o(ne(t))}},[r]);const _=()=>{const t={asSchoolId:Number(x),asAcademicYearId:Number(p),asSchoolwiseStudentId:Number(l),asCommentId:Number(r),asUpdatedById:Number(f),asIsDeleteAction:!1,asAllowSubmit:!0};Q({title:"Please Confirm",message:"Are you sure you want to delete this comment?  ",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{L()},onConfirm:()=>{o(be(t)),L()}}),a()};s.useEffect(()=>{I!=""&&(E.success(I),o(ce()),o(U(B)))},[I]),s.useEffect(()=>{N!=""&&(E.success(N),o(le()),o(U(B)))},[N]),s.useEffect(()=>{w!=""&&(E.success(w),o(me()))},[w]);const q=t=>{k(t)},K=t=>{R(t)},O=()=>{n(""),j(""),R(u)},V=()=>{O(),a()},X=()=>{c(!1)},F=()=>{let t=!0;return m===""?(g("Comment should not be blank."),t=!1):g(""),b===""?(T("Lecture Name should not be blank."),t=!1):T(""),/^([01]\d|2[0-3]):([0-5]\d)$/.test(A)?M(""):(M("Time should be in HH:MM AM/PM format (e.g 10:00 AM)."),t=!1),t},W=()=>{if(F()){const t={asSchoolId:Number(x),asAcademicYearId:Number(p),asSchoolwiseStudentId:Number(l),asCommentId:0,asDate:v,asComment:m,asLectureName:b,asUpdatedById:Number(f),asIsDeleteAction:!1,asAllowSubmit:!1,asStdDivId:1344};o(pe(t))}},ee=()=>{if(F()){const t={asSchoolId:Number(x),asAcademicYearId:Number(p),asSchoolwiseStudentId:Number(l),asCommentId:0,asDate:v,asComment:m,asLectureName:b,asUpdatedById:Number(f),asIsDeleteAction:0,asAllowSubmit:1,asStdDivId:1344};o(fe(t))}};return e.jsxs(ie,{open:d,onClose:()=>c(!1),fullWidth:!0,maxWidth:"sm",PaperProps:{sx:{borderRadius:"15px"}},children:[e.jsx(de,{sx:{backgroundColor:"#324b84",position:"relative"},children:e.jsx(ue,{onClick:X,sx:{color:"white",borderRadius:"7px",position:"absolute",top:"5px",right:"8px",cursor:"pointer","&:hover":{color:"red"}}})}),e.jsx(G,{variant:"h3",sx:{pt:1,pl:2},children:"Student Record Comment"}),e.jsxs(xe,{children:[e.jsxs(i,{container:!0,spacing:1,alignItems:"center",children:[e.jsxs(i,{item:!0,xs:6,md:6,children:[e.jsx(De,{DateValue:v,onDateChange:q,label:"Date",size:"medium"}),e.jsx(Se,{Error:J})]}),e.jsxs(i,{item:!0,xs:6,md:6,children:[e.jsx(je,{Item:A,label:"Time",ClickItem:K,size:"medium"}),P&&e.jsx(G,{color:"error",children:P})]})]}),e.jsxs(he,{sx:{pt:2,background:"white"},children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(H,{rows:3,value:m,label:e.jsxs(e.Fragment,{children:["Comment ",e.jsx("span",{style:{color:"red"},children:"*"})]}),onChange:t=>n(t.target.value),sx:{width:"100%"},error:C!=="",helperText:C,inputProps:{maxLength:100}})}),e.jsx(i,{item:!0,xs:12,sx:{pt:2},children:e.jsx(H,{rows:1,value:b,label:e.jsxs(e.Fragment,{children:["Lecture Name ",e.jsx("span",{style:{color:"red"},children:"*"})]}),onChange:t=>j(t.target.value),sx:{width:"100%"},error:y!=="",helperText:y,inputProps:{maxLength:50}})})]})]}),e.jsx(Ce,{sx:{py:2,px:3},children:e.jsx(i,{item:!0,xs:12,md:12,children:e.jsxs(ge,{direction:"row",gap:2,alignItems:"center",children:[Z.length>0&&e.jsx(D,{sx:{color:"red",":hover":{backgroundColor:Y[100]}},onClick:_,children:"Delete"}),e.jsx(D,{sx:{color:"red",":hover":{backgroundColor:Y[100]}},onClick:V,children:"Cancel"}),e.jsx(D,{sx:{color:"green",":hover":{backgroundColor:$[100]}},onClick:ee,children:"Save and Submit"}),e.jsx(D,{sx:{color:"green",":hover":{backgroundColor:$[100]}},onClick:W,children:"Save"})]})})})]})};export{we as default};
