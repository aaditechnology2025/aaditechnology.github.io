import{U as gs,V as fs,j as e,u as R,c as u,r as n,hs as Z,ht as ss,af as es,B as o,ag as ts,ah as as,ai as D,aj as b,ak as rs,E as a,b4 as g,A as ps,q as Ts,v as M,ar as ys,z as Cs,hu as ks,hv as Ms,hw as V,hx as vs,t as As,hy as Es,hz as K,C as Ds,n as Us,G as A,bI as P,I as Ns,F as Q,H as ws,T as E,D as _s,hA as zs,ay as d}from"./index-CpZD2H93.js";import{d as G,a as Y}from"./EditOff-Buqz_WuN.js";import{d as v}from"./EventAvailable-DJctK7ps.js";import{d as H}from"./EventBusy-Cp_-meIu.js";import{L as Ls}from"./Legend-BBFIM_kK.js";var B={},Vs=fs;Object.defineProperty(B,"__esModule",{value:!0});var U=B.default=void 0,Ps=Vs(gs()),X=e,Rs=(0,Ps.default)([(0,X.jsx)("circle",{cx:"9",cy:"13",r:"1.25"},"0"),(0,X.jsx)("path",{d:"M17.5 10c.75 0 1.47-.09 2.17-.24.21.71.33 1.46.33 2.24 0 1.22-.28 2.37-.77 3.4l1.49 1.49C21.53 15.44 22 13.78 22 12c0-5.52-4.48-10-10-10-1.78 0-3.44.47-4.89 1.28l5.33 5.33c1.49.88 3.21 1.39 5.06 1.39zM1.89 3.72l2.19 2.19C2.78 7.6 2 9.71 2 12c0 5.52 4.48 10 10 10 2.29 0 4.4-.78 6.09-2.08l2.19 2.19 1.41-1.41L3.31 2.31 1.89 3.72zm14.77 14.77C15.35 19.44 13.74 20 12 20c-4.41 0-8-3.59-8-8 0-.05.01-.1 0-.14 1.39-.52 2.63-1.35 3.64-2.39l9.02 9.02z"},"1")],"FaceRetouchingOff");U=B.default=Rs;function Gs({ItemList:i,clickEdit:I,HeaderArray:h,clickSubmit:S=void 0}){const l=R(),r={padding:"0.2em 1.5em"},j=Number(localStorage.getItem("localSchoolId")),c=u(s=>s.AssignExamMarkSlice.IsGetSchoolSettings),f=u(s=>s.AssignExamMarkSlice.IsschoolsettingPartialSubmit),m={asSchoolId:Number(j)};return n.useEffect(()=>{l(Z(m)),l(ss(m))},[]),e.jsx("div",{children:e.jsx(es,{component:o,children:e.jsxs(ts,{"aria-label":"simple table",sx:{border:s=>`1px solid ${s.palette.divider}`},children:[e.jsx(as,{children:e.jsx(D,{sx:{background:s=>s.palette.secondary.main,color:s=>s.palette.common.white},children:h.map((s,y)=>e.jsx(b,{sx:{textTransform:"capitalize",color:"white"},align:s.align?s.align:"left",children:e.jsx("b",{children:s.Header})},y))})}),e.jsx(rs,{children:i.map(s=>e.jsxs(D,{children:[e.jsx(b,{sx:{textTransform:"capitalize",...r},children:s.Text1}),e.jsx(b,{sx:{textTransform:"capitalize",...r},children:s.Text2}),e.jsxs(b,{sx:{textTransform:"capitalize",...r},align:"center",children:[s.STATUS==="Not Started"&&e.jsx(a,{title:"Marks entry not started",children:e.jsx(G,{style:{color:"#f44336",cursor:"pointer"},onClick:()=>I({SubjectId:s.SubjectId,StandardDivisionId:s.StandardDivisionId,StandardId:s.StandardId,IsMonthConfig:s.IsMonthConfig,IsSubmitted:s.Is_Submitted})})}),s.STATUS==="Partial"&&e.jsx(a,{title:"Marks entry partially done.",children:e.jsx(Y,{style:{color:"#ff9800",cursor:"pointer"},onClick:()=>I({SubjectId:s.SubjectId,StandardDivisionId:s.StandardDivisionId,StandardId:s.StandardId,IsMonthConfig:s.IsMonthConfig,IsSubmitted:s.Is_Submitted})})}),(s.STATUS==="Complete"||s.STATUS==="Submitted"||s.STATUS==="Published")&&e.jsx(a,{title:"Marks entry completed",children:e.jsx(g,{style:{color:"#07bc0c",cursor:"pointer"},onClick:()=>I({SubjectId:s.SubjectId,StandardDivisionId:s.StandardDivisionId,StandardId:s.StandardId,IsMonthConfig:s.IsMonthConfig,IsSubmitted:s.Is_Submitted})})}),s.STATUS==="No Student"&&e.jsx(a,{title:s.StatusDescription,children:e.jsx(U,{style:{color:"#34a4eb"}})})]}),e.jsx(b,{sx:{textTransform:"",...r},align:"center",children:s.STATUS==="Not Started"?e.jsx(a,{title:"Marks cannot be submitted.",children:e.jsx("span",{children:"Marks cannot be submitted."})}):s.STATUS==="Complete"?s.Is_Submitted==="N"?f==!1?e.jsx(a,{title:"Submit Marks To Class Teacher",children:e.jsx(v,{style:{color:"#25e67b"},onClick:()=>S({asSubjectId:s.SubjectId,asStandardDivisionId:s.StandardDivisionId,asIsSubmitted:"Y"})})}):e.jsx(a,{title:"Marks cannot be submitted.",children:e.jsx("span",{children:"Marks cannot be submitted."})}):e.jsx(a,{title:s.StatusDescription,children:e.jsx(g,{style:{color:"#07bc0c"}})}):s.STATUS==="Complete"||s.STATUS==="Submitted"||s.STATUS==="Published"?s.Subject_Id!==-1?s.Is_Submitted==="Y"?c==="true"?e.jsx(a,{title:"Unsubmit marks",children:e.jsx(H,{style:{color:"#0f0f0f"},onClick:()=>S({asSubjectId:s.SubjectId,asStandardDivisionId:s.StandardDivisionId,asIsSubmitted:"N"})})}):e.jsx("span",{children:"Marks already submitted"}):e.jsx("span",{children:"Marks cannot be submitted."}):s.Is_Submitted==="Y"?e.jsx(a,{title:s.StatusDescription,children:e.jsx(v,{style:{color:"#25e67b"}})}):e.jsx(a,{title:s.StatusDescription,children:e.jsx(g,{style:{color:"#07bc0c"}})}):e.jsx("span",{children:"Marks cannot be submitted."})})]},s.Id))})]})})})}function Ys({ItemList:i,clickEdit:I,HeaderArray:h,clickSubmit:S=void 0}){const l=R(),r={padding:"0.2em 1.5em"},j=Number(localStorage.getItem("localSchoolId")),c=u(s=>s.AssignExamMarkSlice.IsGetSchoolSettings),f=u(s=>s.AssignExamMarkSlice.IsschoolsettingPartialSubmit),m={asSchoolId:Number(j)};return n.useEffect(()=>{l(Z(m)),l(ss(m))},[]),e.jsx("div",{children:e.jsx(es,{component:o,children:e.jsxs(ts,{"aria-label":"simple table",sx:{border:s=>`1px solid ${s.palette.divider}`},children:[e.jsx(as,{children:e.jsx(D,{sx:{background:s=>s.palette.secondary.main,color:s=>s.palette.common.white},children:h.map((s,y)=>e.jsx(b,{sx:{textTransform:"capitalize",color:"white"},align:s.align?s.align:"left",children:e.jsx("b",{children:s.Header})},y))})}),e.jsx(rs,{children:i.map(s=>e.jsxs(D,{children:[e.jsx(b,{sx:{textTransform:"capitalize",...r},children:s.Text1}),e.jsx(b,{sx:{textTransform:"capitalize",...r},children:s.Text2}),e.jsxs(b,{sx:{textTransform:"capitalize",...r},align:"center",children:[s.STATUS==="Not Started"&&e.jsx(a,{title:"Marks entry not started",children:e.jsx(G,{style:{color:"#f44336",cursor:"pointer"},onClick:()=>I({SubjectId:s.SubjectId,StandardDivisionId:s.StandardDivisionId,StandardId:s.StandardId,IsMonthConfig:s.IsMonthConfig,IsSubmitted:s.Is_Submitted})})}),s.STATUS==="Partial"&&e.jsx(a,{title:"Marks entry partially done.",children:e.jsx(Y,{style:{color:"#ff9800",cursor:"pointer"},onClick:()=>I({SubjectId:s.SubjectId,StandardDivisionId:s.StandardDivisionId,StandardId:s.StandardId,IsMonthConfig:s.IsMonthConfig,IsSubmitted:s.Is_Submitted})})}),(s.STATUS==="Complete"||s.STATUS==="Submitted"||s.STATUS==="Published")&&e.jsx(a,{title:"Marks entry completed",children:e.jsx(g,{style:{color:"#07bc0c",cursor:"pointer"},onClick:()=>I({SubjectId:s.SubjectId,StandardDivisionId:s.StandardDivisionId,StandardId:s.StandardId,IsMonthConfig:s.IsMonthConfig,IsSubmitted:s.Is_Submitted})})}),s.STATUS==="No Student"&&e.jsx(a,{title:s.StatusDescription,children:e.jsx(U,{style:{color:"#34a4eb"}})})]}),e.jsx(b,{sx:{textTransform:"",...r},align:"center",children:s.STATUS==="Not Started"?e.jsx(a,{title:"Marks cannot be submitted.",children:e.jsx("span",{children:"Marks cannot be submitted."})}):s.STATUS==="Partial"?s.Is_Submitted==="N"?f===!0?e.jsx(a,{title:"Submit Marks To Class Teacher",children:e.jsx(v,{style:{color:"#25e67b"},onClick:()=>S({asSubjectId:s.SubjectId,asStandardDivisionId:s.StandardDivisionId,asIsSubmitted:"Y"})})}):e.jsx(a,{title:"Marks cannot be submitted.",children:e.jsx("span",{children:"Marks cannot be submitted."})}):e.jsx(a,{title:s.StatusDescription,children:e.jsx(g,{style:{color:"#07bc0c"}})}):s.STATUS==="Complete"||s.STATUS==="Submitted"||s.STATUS==="Published"?s.Subject_Id!==-1?s.Is_Submitted==="Y"?c==="true"?e.jsx(a,{title:"Unsubmit marks",children:e.jsx(H,{style:{color:"#0f0f0f"},onClick:()=>S({asSubjectId:s.SubjectId,asStandardDivisionId:s.StandardDivisionId,asIsSubmitted:"N"})})}):e.jsx("span",{children:"Marks already submitted"}):e.jsx("span",{children:"Marks cannot be submitted."}):s.Is_Submitted==="Y"?e.jsx(a,{title:s.StatusDescription,children:e.jsx(v,{style:{color:"#25e67b"}})}):e.jsx(a,{title:s.StatusDescription,children:e.jsx(g,{style:{color:"#07bc0c"}})}):e.jsx("span",{children:"Marks cannot be submitted."})})]},s.Id))})]})})})}const Os=()=>{const i=R(),I=ps();let{ClassTecherid:h,ClassId:S,TestId:l}=Ts();const[r,j]=n.useState(""),[c,f]=n.useState(l==null?"":M(l)),m=sessionStorage.getItem("TeacherId"),[s,y]=n.useState(h==null?m:M(h));n.useEffect(()=>{h!==void 0&&l!==void 0&&S!==void 0&&(h=M(h),S=M(S),l=M(l),j(S))},[h,S,l]);let N=ys(74);const{showAlert:ns,closeAlert:F}=n.useContext(Cs),p=Number(localStorage.getItem("localSchoolId")),is=Number(localStorage.getItem("UserId")),C=Number(sessionStorage.getItem("AcademicYearId")),w=Number(sessionStorage.getItem("TeacherId"));Number(sessionStorage.getItem("ExamID"));const T=u(t=>t.AssignExamMarkSlice.ISAssignExam),k=u(t=>t.AssignExamMarkSlice.ISAssignClassExam),$=u(t=>t.AssignExamMarkSlice.ISSubjectListClass),_=u(t=>t.AssignExamMarkSlice.ISSubjectListClass1);u(t=>t.AssignExamMarkSlice.ExamMarksStatusForClass);const os=u(t=>t.AssignExamMarkSlice.ISSubjectTeachersForAssignExamMarks),ls=u(t=>t.AssignExamMarkSlice.Isschoolsetting),z=u(t=>t.AssignExamMarkSlice.ISSubmitMarksTeacher);JSON.parse(sessionStorage.getItem("ScreensAccessPermission"));const cs=()=>{let t=!1;return T.map(x=>{x.Value==r&&(t=x.IsClassTeacher)}),t},ds=t=>{let x=!1;return k.map(ms=>{ms.Value==t&&(x=!0)}),x},W={asSchoolId:p,asAcademicYearId:C,aTeacherId:Number(N=="Y"?s:w),asExamId:Number(c),asStandardDivisionId:Number(r),IsClassTeacher:cs()},us={asSchoolId:p,asAcademicYearId:C,aTeacherId:Number(N=="Y"?s:w)},Ss={asSchoolId:p,asAcademicYrId:C},L={asSchoolId:p,asAcademicYearId:C,asStandardDivisionId:Number(r)};n.useEffect(()=>{i(ks(us))},[s]),n.useEffect(()=>{i(Ms(Ss))},[]),n.useEffect(()=>{T.length>0&&r==""&&j(T[0].Value)},[T]),n.useEffect(()=>{i(V(L))},[]),n.useEffect(()=>{k.length>0&&(c==="0"||!ds(c))&&f(k[0].Value)},[k,c]),n.useEffect(()=>{r=="0"&&i(V(L))},[r]),n.useEffect(()=>{r!=="0"&&i(V(L))},[r]),n.useEffect(()=>{const t={asSchoolId:Number(p)};i(vs(t))},[]);const O=t=>{const x={...t,asTestId:c,asSchoolId:String(p),asAcademicYearId:String(C),asReportingUserId:is};ns({title:"Submit",message:t.asIsSubmitted!=="N"?"Once you submit the result to the class-teacher, you can not modify the marks/grades. Are you sure you want to continue?":"Are you sure, Do you want to unsubmit marks/grades?",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onConfirm:()=>{F(),i(zs(x))},onCancel:F})};n.useEffect(()=>{z!=""&&(As.success(z),i(Es()),i(K(W)))},[z]);const xs=t=>{j(t)},hs=t=>{f(t)},bs=t=>{y(t),j("")};n.useEffect(()=>{i(K(W))},[r,c,s]);const q=[{Id:1,Header:"Class"},{Id:2,Header:"Subject"},{Id:3,Header:"Edit",align:"center"},{Id:4,Header:"Submit",align:"center"}],Is=()=>{let t=0;return T.map(x=>{x.Value==x.Value&&(t=x.StanderdId)}),t},J=t=>{I("/RITeSchool/Teacher/SubjectExamMarks/"+d(s)+"/"+d(t.StandardDivisionId)+"/"+d(t.SubjectId)+"/"+d(r)+"/"+d(c)+"/"+d(w.toString())+"/"+d(t.StandardId)+"/"+d(t.IsMonthConfig)+"/"+d(t.IsSubmitted!="N")+"/"+d(!1)+"/"+d("true")+"/"+d(Is()),{state:{fromInternal:!0}})},js=[{id:1,Name:"No student in class / Subject not applicable to student",Value:e.jsx(o,{sx:{display:"flex",gap:1,alignItems:"center"},children:e.jsx(U,{style:{color:"#34a4eb",fontSize:"large",position:"relative",top:"-2px"}})})},{id:2,Name:"Marks entry not started",Value:e.jsx(o,{sx:{display:"flex",gap:1,alignItems:"center"},children:e.jsx(G,{style:{color:"#f44336",fontSize:"large",position:"relative",top:"-2px"}})})},{id:3,Name:"Marks entry partially done",Value:e.jsx(o,{sx:{display:"flex",gap:1,alignItems:"center"},children:e.jsx(Y,{style:{color:"#ff9800",fontSize:"large",position:"relative",top:"-2px"}})})},{id:4,Name:"Submit exam marks to the class teacher",Value:e.jsx(o,{sx:{display:"flex",gap:1,alignItems:"center"},children:e.jsx(v,{style:{color:"#25e67b",fontSize:"large",position:"relative",top:"-2px"}})})},{id:5,Name:"Unsubmit Exam Marks",Value:e.jsx(o,{sx:{display:"flex",gap:1,alignItems:"center"},children:e.jsx(H,{style:{color:"#0f0f0f",fontSize:"large",position:"relative",top:"-2px"}})})},{id:6,Name:"Marks entry completed",Value:e.jsx(o,{sx:{display:"flex",gap:1,alignItems:"center"},children:e.jsx(g,{style:{color:"#07bc0c",fontSize:"large",position:"relative",top:"-2px"}})})}];return e.jsxs(o,{sx:{px:2},children:[e.jsx(Ds,{navLinks:[{title:"Assign Exam Marks",path:"/RITeSchool/Teacher/AssignExamMark"}],rightActions:e.jsx(e.Fragment,{children:e.jsxs(Us,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"left",gap:1,sx:{mt:{xs:0,sm:0},flexWrap:{xs:"nowrap",sm:"nowrap"}},children:[e.jsx(A,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:N=="Y"?e.jsx(o,{children:e.jsx(P,{sx:{width:{xs:"40vw",sm:"25vw"}},ItemList:os,onChange:bs,label:"Select Subject Teacher",defaultValue:s==null?void 0:s.toString(),mandatory:!0,size:"small"})}):e.jsx("span",{children:" "})}),e.jsx(A,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:e.jsx(P,{sx:{width:{xs:"40vw",sm:"15vw"}},ItemList:T,onChange:xs,label:"Select Class",defaultValue:r,mandatory:!0,size:"small"})}),e.jsx(A,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:e.jsx(P,{sx:{width:{xs:"70vw",sm:"25vw",md:"20vw"}},ItemList:k,onChange:hs,label:"Select Exam",defaultValue:c,mandatory:!0,size:"small"})}),e.jsx(A,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:e.jsx(a,{title:`View all subjects assigned with the current status of marks given to students.
            Once marks for all the students are allotted you have to submit these marks to the class teacher by clicking on "submit" button.
            Pre-primary teachers to add and submit progress report entries of his/her class.`,children:e.jsx(Ns,{sx:{color:"white",backgroundColor:Q[500],height:"36px !important",":hover":{backgroundColor:Q[600]}},children:e.jsx(ws,{})})})})]})})}),e.jsx(o,{sx:{background:"white",p:1,mb:2},children:e.jsx(Ls,{LegendArray:js})}),e.jsxs(o,{sx:{background:"white",p:2},children:[e.jsx(E,{variant:"h4",mb:2,children:"My Subject(s):-"}),$.length>0?e.jsx(Gs,{ItemList:$,clickEdit:J,HeaderArray:q,clickSubmit:O}):e.jsx(E,{variant:"body1",sx:{textAlign:"center",marginTop:4,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:e.jsx("b",{children:"No record found."})}),e.jsx(_s,{sx:{my:2}}),_.length>0&&ls=="True"&&e.jsxs(o,{mt:2,children:[e.jsx(E,{variant:"h4",mb:2,children:"My Class Subject(s):-"}),_.length>0?e.jsx("div",{children:e.jsx(Ys,{ItemList:_,clickEdit:J,HeaderArray:q,clickSubmit:O})}):e.jsx(E,{variant:"body1",sx:{textAlign:"center",marginTop:4,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:e.jsx("b",{children:"No record found."})})]})]})]})};export{Os as default};
