import{U as Re,V as He,j as e,r,B as i,af as _e,ag as Me,ah as ze,ai as ee,aj as w,ak as Oe,T as A,E as I,aq as Ue,ap as L,u as Ve,A as Le,q as Ye,v as R,ar as Ge,z as $e,c as d,lA as Fe,lB as We,lC as C,lD as se,t as O,lE as qe,lF as Xe,lG as Ke,lH as Je,C as Qe,n as Ze,G as U,bI as te,I as re,F as ae,H as es,av as ss,lI as ts,lJ as rs,ay as V}from"./index-CpZD2H93.js";import{d as oe,a as ne}from"./EditOff-Buqz_WuN.js";import{d as le}from"./EventAvailable-DJctK7ps.js";import{d as as}from"./ArrowCircleUp-C3u-oYJu.js";import{d as os}from"./ArrowCircleDown-CuaRBylZ.js";import{C as ns}from"./Card-B0aZ7mGs.js";import{L as ls}from"./Legend-BBFIM_kK.js";var Y={},ds=He;Object.defineProperty(Y,"__esModule",{value:!0});var de=Y.default=void 0,is=ds(Re()),cs=e,us=(0,is.default)((0,cs.jsx)("path",{d:"M15 16h4v2h-4zm0-8h7v2h-7zm0 4h6v2h-6zM3 18c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V8H3v10zM14 5h-3l-1-1H6L5 5H2v2h12z"}),"DeleteSweep");de=Y.default=us;const ie=r.createContext();function xs({ItemList:a,HeaderArray:N,ClickHeader:u,clickEdit:S,clickDelete:x}){const b=t=>{const c=N.map(l=>{if(l.Id===t){const f=l.SortOrder===""?"desc":"";return{...l,SortOrder:f}}else return{...l,SortOrder:null}});u(c)};let v=r.useContext(ie);return e.jsx(ns,{sx:{backgroundColor:"white"},children:e.jsx(i,{display:"flex",justifyContent:"center",alignItems:"center",sx:{width:"100%"},children:e.jsx(_e,{component:i,sx:{border:t=>`1px solid ${t.palette.grey[300]}`,background:"white"},children:e.jsxs(Me,{"aria-label":"simple table",children:[e.jsx(ze,{children:e.jsx(ee,{sx:{background:t=>t.palette.secondary.main,color:t=>t.palette.common.white},children:N.map((t,c)=>e.jsx(w,{sx:{textTransform:"capitalize",color:l=>l.palette.common.white,py:1},onClick:t.Id!==3&&t.Id!==4?()=>b(t.Id):null,children:e.jsxs("div",{style:{display:"flex",alignItems:"left",gap:2,justifyContent:t.Header?"flex-start ":"left"},children:[e.jsx("b",{children:t.Header}),t.SortOrder!==null&&t.Id!==3&&t.Id!==4?t.SortOrder==="desc"?e.jsx(os,{}):e.jsx(as,{}):null]})},c))})}),e.jsx(Oe,{children:a.map((t,c)=>e.jsxs(ee,{sx:{height:"36px"},children:[e.jsx(w,{sx:{textTransform:"capitalize",textAlign:"left",paddingTop:"2.5px",paddingBottom:"2.5px"},children:t.RollNo}),e.jsx(w,{sx:{textTransform:"capitalize",textAlign:"left",paddingTop:"2.5px",paddingBottom:"2.5px"},children:e.jsx(A,{noWrap:!0,children:t.StudentName})}),e.jsx(w,{sx:{textTransform:"capitalize",textAlign:"left",paddingTop:"2.5px",paddingBottom:"2.5px"},children:t.EditStatus==="1"?e.jsx(I,{title:"Marks entry not started",children:e.jsx(oe,{style:{cursor:"pointer"},onClick:()=>S(t.StandardId,t.Id),sx:{color:"#f44336","&:hover":{bgcolor:"grey.300"}}})}):t.EditStatus==="2"?e.jsx(I,{title:"Marks entry partially done",children:e.jsx(ne,{style:{cursor:"pointer"},onClick:()=>S(t.StandardId,t.Id),sx:{color:"#ff9800","&:hover":{bgcolor:"grey.300"}}})}):t.EditStatus==="3"?e.jsx(I,{title:"Marks entry completed",children:e.jsx(le,{style:{color:"#25e67b",cursor:"pointer"},onClick:()=>S(t.StandardId,t.Id),sx:{color:"#ff9800","&:hover":{bgcolor:"grey.300"}}})}):null}),e.jsx(w,{sx:{textTransform:"capitalize",textAlign:"left",paddingTop:"2.5px",paddingBottom:"2.5px"},children:t.EditStatus=="1"||v==!0?e.jsx("span",{}):e.jsx(I,{title:"Delete",children:e.jsx(Ue,{onClick:()=>x(t.Id),sx:{color:"#223354","&:hover":{color:"red",backgroundColor:L[100]}}})})})]},c))})]})})})})}const ys=()=>{const a=Ve(),N=Le(),u=Number(localStorage.getItem("localSchoolId")),S=Number(sessionStorage.getItem("Id"));Number(localStorage.getItem("UserId"));const x=Number(sessionStorage.getItem("AcademicYearId"));Number(sessionStorage.getItem("TeacherId")),Number(sessionStorage.getItem("ExamID"));const b=JSON.parse(sessionStorage.getItem("ScreensAccessPermission")),v=sessionStorage.getItem("TeacherId"),t=()=>{let s="N";return b==null||b.map(n=>{n.ScreenName==="Student wise Progress Report "&&(s=n.IsFullAccess)}),s};let{ClassTecherid:c,ClassId:l,TestId:f,TermId:j}=Ye();c=R(c),l=R(l),f=R(f),j=R(j),Ge(74);const[m,G]=r.useState(v);r.useState(l??""),r.useState(f??""),r.useState(c??v);const[o,H]=r.useState(void 0);r.useState(),r.useState(),r.useState(),r.useState(),r.useState(),r.useState(),r.useState();const[g,ce]=r.useState(20),ue=[20,50,100,200],[T,$]=r.useState(1),{showAlert:F,closeAlert:P}=r.useContext($e),[ps,W]=r.useState(!1),h=()=>{let s=0;return p.map(n=>{n.Value==m&&(s=n.Id)}),s},[xe,hs]=r.useState([{Id:1,Header:"Roll No",SortOrder:"Roll_No"},{Id:2,Header:"Student Name",SortOrder:"Name"},{Id:3,Header:"Edit"},{Id:4,Header:"Delete"}]),[q,pe]=r.useState("Roll_No"),[he,me]=r.useState([{Id:1,Header:"Roll No",SortOrder:null,sortKey:"Roll_No"},{Id:2,Header:"Student Name",SortOrder:null,sortKey:"Name"},{Id:3,Header:"Edit"},{Id:4,Header:"Delete"}]),ge=s=>{me(s);const n=s.find(Be=>Be.SortOrder!==null),Ee=`${n.sortKey} ${n.SortOrder}`;pe(Ee)},p=d(s=>s.Studentwiseprogress.PrimaryClassTeacher),D=d(s=>s.Studentwiseprogress.ISAssessmentDropdown),k=d(s=>s.Studentwiseprogress.StudentsAssignment);d(s=>s.Studentwiseprogress.StudentsAssignmentGrade);const _=d(s=>s.Studentwiseprogress.oneDeleteStudent),M=d(s=>s.Studentwiseprogress.DeleteAllStudent),E=d(s=>s.Studentwiseprogress.PublishStatus),z=d(s=>s.Studentwiseprogress.PublishUnpublishXseed),B=d(s=>s.Studentwiseprogress.ISAllStudentRecordCount),X=d(s=>s.Studentwiseprogress.ISClassTeacherXseedSubjects);X.map(s=>s.IsPublished),r.useState(E.AllowPublish===!0?"Publish":"Unpublish");const K=X.every(s=>s.IsPublished=="Y"),Se=k.every(s=>s.ShowDeleteButton!=="1");k.map(s=>s.ShowProgressReport),d(s=>s.Studentwiseprogress.ISGetAllRecordSubmitted);const fe={asSchoolId:Number(u),asAcadmicYearId:Number(x),asTeacher_id:t()==="Y"?0:Number(m)},Ie={asAcademicYearId:Number(x),asSchoolId:Number(u)},J=(T-1)*g,be=J+g;h();const y={asSchoolId:Number(u),asAcademicYearId:Number(x),asStandardDivId:Number(h()),asAssessmentId:Number(o),asStartIndex:J,asEndIndex:be,asSortExp:q},Q={asAcademicYearId:Number(x),asSchoolId:Number(u),asStandardDivId:Number(h()),asAssessmentId:Number(o)};r.useEffect(()=>{E.AllowPublish===!0||E.AllowUnpublish===!0?W(!0):W(!1)},[E]),r.useEffect(()=>{a(Fe(Ie))},[]),r.useEffect(()=>{t()!=="Y"&&p.length>0&&G(p[0].Value)},[p]),r.useEffect(()=>{a(We(fe))},[]),r.useEffect(()=>{o!=null&&a(C(y))},[m,o,xe,T,g,h(),q]),r.useEffect(()=>{o!=null&&p.length>0&&a(se(Q))},[p,o]),r.useEffect(()=>{z!=""&&(O.success(z),a(qe()),a(C(y)),a(se(Q)))},[z,h(),o,m]);const je=s=>{G(s)},ye=s=>{H(s)};r.useEffect(()=>{D.length>0&&H(D[0].Value)},[D]),r.useEffect(()=>{j!==void 0&&H(j)},[j]);const we=s=>{const n={asAcademicYearId:Number(x),asSchoolId:Number(u),asAssessmentId:Number(o),asStudentId:Number(s),asUpdatedById:Number(S)};F({title:"Delete",message:s.ShowDeleteButton!=="N"?"Are you sure you want to delete grades of selected assessment of selected student? ":"",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{P()},onConfirm:()=>{a(ts(n)),a(C(y)),P()}})};r.useEffect(()=>{_!=""&&(O.success(_),a(Xe()),a(C(y)))},[_]);const Ce=()=>{const s={asAcademicYearId:Number(x),asSchoolId:Number(u),asAssessmentId:Number(o),asStandardDivId:Number(h()),asUpdatedById:Number(S)};F({title:"Please Confirm",message:"Are you sure you want to delete grades of selected assessment of all students.?  ",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{P()},onConfirm:()=>{a(rs(s)),P()}})};r.useEffect(()=>{M!=""&&(O.success(M),a(Ke()),a(C(y)))},[M]);const Ae={asAcadmeicYearId:Number(x),asSchoolId:Number(u),asAssessmentId:Number(o),asStdDivId:Number(h())};r.useEffect(()=>{a(Je(Ae))},[o,h()]);const Ne=(s,n)=>{N("/RITeSchool/Teacher/StudentwiseprogressreportEdit/"+V(o)+"/"+V(s)+"/"+V(n),{state:{fromInternal:!0}})},ve=(T-1)*g+1,Z=Math.min(T*g,B.Count),Te=Math.ceil(B.Count/g),Pe=s=>{ce(parseInt(s.target.value,10)),$(1)},De=s=>{$(s)},ke=[{id:1,Name:"Marks entry not started",Value:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(oe,{style:{color:"#f44336",fontSize:"large",position:"relative",top:"-2px"}}),e.jsx(A,{children:"Marks entry not started"})]})},{id:2,Name:"Marks entry partially done",Value:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(ne,{style:{color:"#ff9800",fontSize:"large",position:"relative",top:"-2px"}}),e.jsx(A,{children:"Marks entry partially done"})]})},{id:3,Name:"Marks entry completed",Value:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(le,{style:{color:"#25e67b",fontSize:"large",position:"relative",top:"-2px"}}),e.jsx(A,{children:"Marks entry completed"})]})}];return e.jsxs(i,{sx:{px:2},children:[e.jsx(Qe,{navLinks:[{title:"Student Wise Progress Report",path:"/RITeSchool/Teacher/StudentwiseProgressReport"}],rightActions:e.jsx(e.Fragment,{children:e.jsxs(Ze,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"left",gap:1,sx:{mt:{xs:0,sm:0},flexWrap:{xs:"nowrap",sm:"nowrap"}},children:[e.jsx(U,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:e.jsx(te,{sx:{width:{xs:"70vw",sm:"25vw",md:"22vw"},bgcolor:t()==="N"&&p.length==0?"#F0F0F0":"inherit"},ItemList:p,onChange:je,defaultValue:m==null?void 0:m.toString(),size:"small",label:"Class Teacher",DisableClearable:t()==="N",mandatory:!0,disabled:t()==="N"&&p.length==0})}),e.jsx(U,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:e.jsx(te,{sx:{width:{xs:"50vw",sm:"20vw",md:"15vw"}},ItemList:D,onChange:ye,label:"Assessment:",defaultValue:String(o),mandatory:!0,size:"small"})}),e.jsxs(U,{item:!0,xs:12,gap:1,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:[e.jsx(I,{title:"Select the class and edit any students grades for student wise marks assignment.",children:e.jsx(re,{sx:{color:"white",backgroundColor:ae[500],height:"36px !important",":hover":{backgroundColor:ae[600]}},children:e.jsx(es,{})})}),e.jsx(I,{title:"Delete All",children:e.jsx("span",{children:e.jsx(re,{sx:{display:"inline-flex",color:"white",padding:"4px",width:"36px",height:"36px",backgroundColor:L[500],":hover":{backgroundColor:L[600]},marginLeft:"0px"},disabled:Se==!0||K==!0,onClick:Ce,children:e.jsx(de,{})})})})]})]})})}),e.jsx(i,{sx:{background:"white",p:1.5,mb:2},children:e.jsx(ls,{LegendArray:ke})}),e.jsxs(i,{mb:1,sx:{p:2,background:"white"},children:[e.jsx(i,{children:k.length>0?e.jsx("p",{style:{flex:1,textAlign:"center"},children:e.jsxs(A,{variant:"subtitle1",sx:{textAlign:"center"},children:[e.jsxs(i,{component:"span",fontWeight:"fontWeightBold",children:[ve," to ",Z]})," ","out of"," ",e.jsx(i,{component:"span",fontWeight:"fontWeightBold",children:B.Count})," ",B.Count===1?"record":"records"]})}):e.jsx("span",{})}),e.jsx(ie.Provider,{value:K,children:e.jsx(xs,{ItemList:k,HeaderArray:he,ClickHeader:ge,clickEdit:Ne,clickDelete:we})}),Z>19?e.jsx(ss,{rowsPerPage:g,ChangeRowsPerPage:Pe,rowsPerPageOptions:ue,PageChange:De,pagecount:Te}):e.jsx("span",{})]})]})};export{ys as default};
