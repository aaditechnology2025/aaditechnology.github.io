import{P as i,S as N,h as T,by as $,j as e,bv as J,G as o,q as f,v as y,A as V,u as G,r as g,c as A,gT as H,gU as U,s as W,B as Y,a7 as q,gB as M}from"./index-CpZD2H93.js";import{E as n}from"./ErrorMessages-Cl09dz4o.js";import{B as O}from"./BackButton-D8aQMrwN.js";import{D as z}from"./DateSelector-CMUBXQs5.js";import{P as K}from"./PageHeader-C9ChZO91.js";import{f as w,e as F}from"./CardStyle-CBuNm0_N.js";import{D as I,a as E}from"./DotLegendStyled-CQchpEqY.js";import{N as Q}from"./NativeSelect-CZqztF8l.js";import"./ArrowRight-CUT45HBv.js";/* empty css                       */import"./ButtonStyle-DAEB_dBE.js";import"./Card-B0aZ7mGs.js";k.propTypes={RollNumber:i.string,StudentName:i.string,getAttendance:i.array,present:i.string,date:i.string,assigne:i.string};function k({RollNumber:r,StudentName:d,getAttendance:j,present:x,date:a,assigne:p}){N();const c=T(),l=$({root:{background:"#f33737"},roo1:{background:`${c.colors.gradients.pink1}`},roo2:{background:"#00b8d4"}})(),S=new Date(a),u=new Date(p),m=" "+(S>u?l.roo2:x==="false"?l.root:l.roo1);return e.jsx(e.Fragment,{children:e.jsx(J,{className:m,sx:{justifyContent:"center",borderRadius:"6px !important",marginBottom:"8px !important",boxShadow:"0px 8px 15px rgba(0, 0, 0, 0.1)"},children:e.jsxs(o,{container:!0,children:[e.jsx(o,{item:!0,xs:2,children:e.jsxs(w,{children:[" ",r]})}),e.jsx(o,{item:!0,xs:10,children:e.jsx(w,{children:d})})]})})})}const ie=()=>{let{assignedDate:r}=f(),{StandardId:d}=f();r=y(r),d=y(d);const j=N();T(),V();const x=G(),[a,p]=g.useState(r),[c,D]=g.useState(d);g.useState({selectedDate:r});const l=A(t=>t.StandardAttendance.stdlist),S=new Date,u=localStorage.getItem("localSchoolId"),m=sessionStorage.getItem("AcademicYearId"),v=sessionStorage.getItem("TeacherId"),h=A(t=>t.AttendanceList.AttendanceData),C={asSchoolId:u,asAcademicyearId:m,asTeacherId:v},L={asStdDivId:c,asDate:a,asAcademicYearId:m,asSchoolId:u},b=t=>{p(M(t))};g.useEffect(()=>{x(H(C))},[]),g.useEffect(()=>{c!="undefined"&&x(U(L))},[a,c]);const R=t=>{D(t.target.value)};W("span")(({theme:t})=>`
              border-radius: 22px;
              width: ${t.spacing(1.5)};
              height: ${t.spacing(1.5)};
              display: inline-block;
              margin-right: ${t.spacing(1)};
              margin-top: -${t.spacing(.1)};
          `);const B=new Date(a),P=new Date;return e.jsxs(Y,{sx:{px:2},children:[e.jsx(K,{heading:"View Attendance",subheading:""}),e.jsx(o,{container:!0,direction:"row",children:e.jsx(O,{FromRoute:"/Teacher/TAttendance/"+r+"/"+d})}),e.jsxs(o,{container:!0,children:[e.jsx(o,{item:!0,xs:6,children:e.jsxs(I,{children:[e.jsx(E,{className:j.border,style:{background:"red"}}),e.jsx(F,{children:"Absent"})]})}),e.jsx(o,{item:!0,xs:6,children:e.jsxs(I,{children:[e.jsx(E,{className:j.border,sx:{background:"#64b5f6"}}),e.jsx(F,{children:"Late Join"})]})})]}),e.jsxs(e.Fragment,{children:[e.jsx(e.Fragment,{children:e.jsxs(q,{fullWidth:!0,sx:{mt:"0.2rem",mb:"-2"},children:[e.jsxs(Q,{value:c,onChange:t=>R(t),children:[e.jsx("option",{children:"Select Class"}),l.map((t,s)=>e.jsx("option",{value:t.Value,children:t.Name},s))]}),e.jsx("br",{})]})}),e.jsx("br",{}),e.jsx(z,{date:a,setCurrentDate:b,Close:b})]}),h.length>1?h.map((t,s)=>e.jsx(k,{date:t.JoinDate,assigne:a,present:t.IsPresent,RollNumber:t.RollNumber,StudentName:t.StudentName,getAttendance:h},s)):B>P?e.jsx(e.Fragment,{children:e.jsx(n,{Error:"Future date attendance cannot be viewed."})}):h.map((t,s)=>e.jsx("div",{children:s===0&&t.Status=="O"?e.jsx(e.Fragment,{children:e.jsx("div",{style:{marginTop:"120px !important"},children:e.jsx(n,{Error:"Attendance date should be within current academic year."})})}):s===0&&t.Status=="W"?e.jsx(e.Fragment,{children:e.jsx(n,{Error:"Selected date is weekend."})}):s===0&&t.Status=="E"?e.jsx(e.Fragment,{children:e.jsx(n,{Error:"There are no students in this class."})}):s===0&&t.Status=="H"?e.jsx(e.Fragment,{children:e.jsx(n,{Error:"Selected date is holidays."})}):s===0&&t.Status=="N"?e.jsx(e.Fragment,{children:e.jsx(n,{Error:"Attendance not yet marked."})}):new Date(a)>S?e.jsx(e.Fragment,{children:e.jsx(n,{Error:"Future date attendance cannot be viewed."})}):null},s))]})};export{ie as default};
