import{cc as Tt,j as e,B as g,G as o,o as Bt,bI as de,aG as $t,E as B,I as $,dk as Ut,A as he,u as me,ad as Pt,r as n,c as v,T as w,J as Pe,a0 as Ft,a1 as Et,bd as Yt,a3 as Ht,dw as Vt,bV as Ot,af as Wt,ag as qt,ak as Nt,ai as Gt,aj as _e,aq as ue,U as re,V as oe,a6 as Y,ap as xe,bl as se,s as Fe,S as Ee,z as Jt,dx as Kt,t as H,dy as Qt,dz as M,dA as Xt,dB as Zt,C as es,F as ee,H as ts,b7 as ss,y as ze,l as rs,dC as os,d9 as as,dD as ns,dE as ls,dF as Le,dG as is}from"./index-CpZD2H93.js";import{d as Te}from"./AddCircle-BWwMsra3.js";import{d as cs}from"./KeyboardArrowUpRounded-Du3Qe5yI.js";import{d as ds}from"./Refresh-DQlbduBZ.js";import{M as xs}from"./MoveToTrash-BFwWcvGU.js";import{d as J}from"./ArrowCircleUp-C3u-oYJu.js";import{C as Ye}from"./CheckboxImg-BrcA302U.js";import{d as Be}from"./Attachment-BXtOqCtF.js";import{d as He}from"./Drafts-CjR7PTYP.js";import{d as hs}from"./Schedule-DE4dDrVN.js";import{b as ms,m as us,C as gs,L as fs,R as ps}from"./CardStyle-CBuNm0_N.js";import{A as K}from"./ArrowCircleDown-7BHmj5tB.js";import{T as js,D as Is}from"./CommonStyle-DTS3LGaG.js";import{d as Ss}from"./MarkEmailRead-CW_pucn0.js";import{d as Cs}from"./Search-DF8Yf9lp.js";import{d as Ds}from"./Inbox-Dc_yqiq5.js";import{d as bs}from"./Send-deSjc6sZ.js";import{C as ge}from"./Card-B0aZ7mGs.js";import{B as $e}from"./Badge-B69kpfUM.js";import vs from"./EmailSetting-CkO3kz9u.js";import{H as Ue}from"./Hidden-BOlgbOvj.js";import"./RadioButtonUnchecked-r_6mn_G1.js";import"./Errormessage-DVJGTehf.js";import"./BackButton-D8aQMrwN.js";const ws=Tt(e.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"}),"Email"),ks=({AcademicYearList:s,MonthYearList:x,operatorArray:r,clickSearch:h,academicYear:l,monthYear:i,operator:u,searchDate:p,searchText:y,clickAcademicYear:c,clickMonthYear:k,clickOperator:d,clickDate:I,textOnChange:R,isSearchClicked:a,CloseSearchBar:S,activeTab:_})=>{const z=f=>{l=f,c(f)},A=f=>{i=f,k(f)},T=()=>{h(y,l,i,u,p,!a)};return e.jsx(e.Fragment,{children:_!="Draft"&&e.jsx(g,{sx:{p:2,backgroundColor:"white",mb:1},children:e.jsxs(o,{container:!0,spacing:2,children:[e.jsx(o,{item:!0,xs:12,md:12,children:e.jsx(Bt,{id:"standard-basic",label:"Name / Subject / Message Body ",fullWidth:!0,onChange:R,value:y,inputProps:{maxLength:50},size:"medium",onKeyDown:f=>{(f.key==="Enter"||f.key==="Tab")&&T()}})}),e.jsx(o,{item:!0,xs:12,md:2.8,children:e.jsx(de,{ItemList:s,onChange:z,label:"Select Academic Year",defaultValue:l,size:"medium",sx:{width:"100%"}})}),e.jsx(o,{item:!0,xs:12,md:2.8,children:e.jsx(de,{ItemList:x,onChange:A,label:"Month",defaultValue:i,size:"medium",sx:{width:"100%"}})}),e.jsx(o,{item:!0,xs:12,md:2.8,children:e.jsx(g,{children:e.jsx(de,{ItemList:r,onChange:d,label:"Operator",defaultValue:u,size:"medium",sx:{width:"100%"}})})}),e.jsx(o,{item:!0,xs:2.8,children:e.jsx($t,{DateValue:p,onDateChange:I,label:"",size:"medium"})}),e.jsx(o,{item:!0,xs:.8,children:e.jsx(B,{title:"Search",children:e.jsx($,{onClick:T,sx:{background:f=>f.palette.primary.main,color:"white",mt:1,ml:2,"&:hover":{backgroundColor:f=>f.palette.primary.dark}},children:e.jsx(Ut,{})})})})]})})})},Rs=({text1:s,text2:x})=>e.jsxs(g,{p:1,children:[e.jsxs(ms,{children:[" ",e.jsxs(us,{children:[e.jsx("b",{children:"User Name: "}),x]})]}),e.jsxs(gs,{children:[e.jsx("b",{children:"Read Date/Time: "}),s," "]})]});function ys({header:s,text1:x,text2:r,text3:h,DetailsId:l,ActiveTab:i,IsRead:u,IsSchedule:p,IsAttachmentExist:y,HasReadReceipt:c,RequestReadReceipt:k,NavPath:d}){const I=he(),R=me(),a=Pt(),S=localStorage.getItem("localSchoolId"),_=sessionStorage.getItem("AcademicYearId"),[z,A]=n.useState(!1),[T,f]=n.useState(!0),U=v(D=>D.MessageCenter.ReadReceiptDetails),V={aiSchoolId:S,aiAcademicYearId:_,aiMessageDetailId:l},O=D=>{D.stopPropagation(),A(!0),R(Vt(V)),f(!1)},Q=D=>{A(!1)},C=()=>{T&&I("/"+a.pathname.split("/")[1]+"/MessageCenter/viewMSg/"+d),f(!0)};let P=(i=="Inbox"||i=="Trash")&&u=="N"||i=="Sent"&&p?"blue":"";return e.jsx(e.Fragment,{children:e.jsx(g,{px:2,children:e.jsxs(o,{container:!0,alignItems:"center",spacing:2,onClick:C,children:[e.jsx(o,{item:!0,xs:6,sm:4,md:3,lg:3,children:e.jsx(w,{variant:"h6",sx:{color:P,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textAlign:"left",maxWidth:"180px"},children:s})}),e.jsx(o,{item:!0,xs:2,sm:2,lg:1,display:{xs:"block",sm:"none"},children:y&&e.jsx(Be,{fontSize:"small"})}),e.jsx(o,{item:!0,xs:6,sm:4,md:2,lg:2.5,children:e.jsx(w,{variant:"body1",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textAlign:"left",ml:6,maxWidth:"180px"},children:x})}),e.jsx(o,{item:!0,xs:6,sm:3,md:2,lg:2,ml:i=="Trash"?8:"",children:e.jsx(w,{variant:"body1",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textAlign:"left"},children:h})}),i==="Inbox"&&e.jsx(o,{item:!0,xs:6,sm:2,md:2,lg:1,children:y?e.jsx($,{sx:{textAlign:"center",ml:0},children:e.jsx(Be,{fontSize:"small"})}):e.jsx(w,{ml:1.5,children:"-"})}),e.jsx(o,{item:!0,xs:6,sm:4,md:2,lg:1,ml:6,children:k==="True"&&c?e.jsxs(e.Fragment,{children:[e.jsx(B,{title:"View",children:e.jsx($,{sx:{color:"#38548A","&:hover":{color:"green",backgroundColor:Pe[100]}},onClick:D=>O(D),children:e.jsx(He,{fontSize:"small"})})}),e.jsxs(Ft,{open:z,maxWidth:"md",onClose:()=>A(!1),PaperProps:{sx:{borderRadius:"15px"}},children:[e.jsx(Et,{sx:{bgcolor:"#223354",color:D=>D.palette.common.white},children:e.jsx(Yt,{onClick:Q,sx:{color:"white",borderRadius:"7px",position:"absolute",top:"5px",right:"7px",cursor:"pointer","&:hover":{color:"red"}}})}),e.jsx(Ht,{children:e.jsx(g,{sx:{maxHeight:"300px",position:"relative",background:"white"},children:U.map((D,W)=>e.jsx("div",{children:e.jsx(Rs,{text1:D.ReadingDateTime,text2:D.UserName})},W))})})]})]}):k==="True"&&e.jsx(B,{title:"Requested",children:e.jsx($,{children:e.jsx(ws,{fontSize:"small",color:"error"})})})}),e.jsx(o,{item:!0,xs:6,sm:2,md:2,lg:2,ml:i=="Inbox"?-7:i=="Sent"?6:i=="Trash"?-10:0,children:e.jsxs(w,{sx:{textAlign:"left"},children:[r,p&&e.jsx(hs,{fontSize:"small",color:"primary"})]})})]})})})}const Ms=({Item:s,onChange:x,ActiveTab:r,DeleteDraft:h})=>{he(),me();const[l,i]=n.useState(!0);return e.jsx(e.Fragment,{children:e.jsx(Ot,{in:l,style:{transformOrigin:"0 0 1"},...l?{timeout:1500}:{},children:e.jsx(g,{sx:{backgroundColor:"white"},children:e.jsx(Wt,{component:g,children:e.jsx(qt,{sx:{border:u=>`1px solid ${u.palette.grey[300]}`,overflow:"hidden"},children:e.jsx(Nt,{children:e.jsxs(Gt,{children:[e.jsx(_e,{sx:{textAlign:"left",width:"40px",py:.5},children:r!=="Draft"?e.jsx(Ye,{name:s.Id,value:s.Id,checked:s.isActive,onChange:x}):e.jsx(B,{title:"Delete",children:e.jsx(ue,{onClick:()=>h(s.Id),sx:{color:"#38548A",cursor:"pointer",ml:1,"&:hover":{color:"red",backgroundColor:"rgba(255, 0, 0, 0.1)"}}})})}),e.jsx(_e,{sx:{justifyContent:"left",textAlign:"left",py:.5},children:e.jsx(ys,{header:s.text1,text1:s.text2,text2:s.text3,text3:s.text4,ActiveTab:r,IsRead:s.IsRead,IsSchedule:s.IsSchedule,HasReadReceipt:s.HasReadReceipt,RequestReadReceipt:s.RequestReadReceipt,IsAttachmentExist:s.IsAttachmentExist,DetailsId:s.DetailsId,NavPath:s.NavPath})})]},s.Id)})})})})})})},As=({Itemlist:s,refreshData:x,ActiveTab:r,DeleteDraft:h,clickSortExp:l,clickSortDirection:i,SortExp:u,SortDirection:p})=>{const y=a=>{s=s.map(S=>S.Id===a.name?{...S,isActive:a.checked}:S),x(s)},[c,k]=n.useState("");n.useEffect(()=>{r==="Inbox"||r==="Trash"?k("Received Date"):r==="Sent"?k("Sent Date"):r==="Draft"&&k("Draft Date")},[r]);const d=a=>{if(a==="Subject")return!0;if(a==="Cc"){if(r==="Sent")return!0}else if(a==="Cc1"){if(r==="Trash")return!0}else{if(a==="Attachment"&&r==="Inbox")return!0;if(a==="Date")return!0;if(a==="From"){if(r==="Inbox")return!0}else if(a==="From1"){if(r==="Trash")return!0}else if(a==="To"){if(r==="Sent")return!0}else if(a==="Read Receipt Information"){if(r==="Sent")return!0}else if(a==="Message Body"){if(r==="Draft")return!0}else if(a==="Delete"){if(r==="Draft")return!0}else if(a==="Received Date"){if(r==="Inbox")return!0}else if(a==="Received Date1"){if(r==="Trash")return!0}else if(a==="Draft Date"){if(r==="Draft")return!0}else if(a==="Sent Date"&&r==="Sent")return!0}return!1},I=a=>{i(p=="ASC"?"DESC":"ASC"),l(a)},R=a=>{s=s.map(S=>({...S,isActive:a})),x(s)};return e.jsxs(g,{sx:{textAlign:"center"},children:[e.jsx(g,{sx:{display:"flex",borderRadius:"7px",p:1.5,background:a=>a.palette.secondary.main,border:a=>`1px solid ${a.palette.grey[300]}`,overflow:"hidden"},children:e.jsxs(o,{container:!0,alignItems:"center",spacing:2,children:[r!=="Draft"&&e.jsx(o,{item:!0,xs:12,sm:1,md:.5,lg:.5,xl:.5,sx:{textAlign:"center",ml:.5},children:e.jsx(Ye,{name:"All",value:"All",checked:s.every(a=>a.isActive===!0),onChange:a=>{R(a.checked)}})}),d("Delete")&&e.jsx(o,{item:!0,xs:12,sm:1,md:.5,lg:.5,xl:.5,sx:{color:"white",textAlign:"center"},children:"Delete"}),d("Subject")&&e.jsxs(o,{item:!0,xs:12,sm:1,md:2,lg:2.6,xl:2,sx:{display:"flex",justifyContent:"left",alignItems:"left",color:"white",cursor:"pointer"},onClick:()=>{I("Subject")},children:[e.jsx(w,{variant:"body1",sx:{marginRight:"4px",color:"white",ml:2},children:"Subject"}),u==="Subject"?p==="ASC"?e.jsx(K,{sx:{fontSize:20,color:"white"}}):e.jsx(J,{sx:{fontSize:20,color:"white"}}):null]}),d("To")&&e.jsx(o,{item:!0,xs:12,sm:3.5,md:3.5,lg:2.6,xl:1,sx:{color:"white",textAlign:"center",ml:-2},children:"To"}),d("Cc")&&e.jsx(o,{item:!0,xs:12,sm:.5,md:.5,lg:1.2,xl:.5,sx:{color:"white",textAlign:"left",ml:4},children:"Cc"}),d("Read Receipt Information")&&e.jsx(o,{item:!0,xs:12,sm:2,md:2,lg:2.8,xl:3,sx:{color:"white",textAlign:"center",justifyContent:"center",whiteSpace:"wrap"},children:"Read Receipt Information"}),d("Message Body")&&e.jsx(o,{item:!0,xs:12,sm:5,md:5,lg:5,xl:6,sx:{ml:12,color:"white",textAlign:"left"},children:"Message Body"}),d("From")&&e.jsx(o,{item:!0,xs:12,sm:3,md:3,lg:3,xl:3,sx:{ml:11,color:"white",textAlign:"left"},children:"From"}),d("From1")&&e.jsx(o,{item:!0,xs:12,sm:2,md:2,lg:2.7,xl:3.5,sx:{ml:11,color:"white",textAlign:"left"},children:"From"}),d("Cc1")&&e.jsx(o,{item:!0,xs:12,sm:2,md:2,lg:2,xl:1,sx:{color:"white",textAlign:"left",ml:-3},children:"Cc"}),d("Attachment")&&e.jsx(o,{item:!0,xs:12,sm:2,md:2,lg:1.7,xl:1.5,sx:{color:"white",textAlign:"center"},children:"Attachment"}),d("Received Date")&&e.jsxs(o,{item:!0,xs:12,sm:2,md:2,lg:2,xl:2,sx:{ml:{xs:1,sm:3,md:7},display:"flex",justifyContent:"left",alignItems:"left",color:"white",cursor:"pointer"},onClick:()=>{I("Insert_Date")},children:[e.jsx(w,{variant:"body1",sx:{marginRight:"4px",color:"white"},children:"Received Date"}),u==="Insert_Date"?p==="ASC"?e.jsx(K,{sx:{fontSize:20,color:"white"}}):e.jsx(J,{sx:{fontSize:20,color:"white"}}):null]}),d("Received Date1")&&e.jsxs(o,{item:!0,xs:12,sm:1.5,md:1.5,lg:1.5,xl:1,sx:{display:"flex",justifyContent:"center",alignItems:"center",color:"white",cursor:"pointer",ml:4},onClick:()=>{I("Insert_Date")},children:[e.jsx(w,{variant:"body1",sx:{marginRight:"4px",color:"white"},children:"Received Date"}),u==="Insert_Date"?p==="ASC"?e.jsx(K,{sx:{fontSize:20,color:"white"}}):e.jsx(J,{sx:{fontSize:20,color:"white"}}):null]}),d("Sent Date")&&e.jsxs(o,{item:!0,xs:12,sm:1.2,md:1.2,lg:1.2,xl:1.2,sx:{display:"flex",justifyContent:"left",alignItems:"left",color:"white",cursor:"pointer"},onClick:()=>{I("Insert_Date")},children:[e.jsx(w,{variant:"body1",sx:{color:"white",ml:-3},children:"Sent Date"}),u==="Insert_Date"?p==="ASC"?e.jsx(K,{sx:{fontSize:20,color:"white"}}):e.jsx(J,{sx:{fontSize:20,color:"white"}}):null]}),d("Draft Date")&&e.jsxs(o,{item:!0,xs:12,sm:2.5,md:2.5,lg:2,xl:1,sx:{display:"flex",justifyContent:"left",alignItems:"center",color:"white",cursor:"pointer"},onClick:()=>{I("Insert_Date")},children:[e.jsx(w,{variant:"body1",sx:{marginRight:"4px",color:"white"},children:"Draft Date"}),u==="Insert_Date"?p==="ASC"?e.jsx(K,{sx:{fontSize:20,color:"white"}}):e.jsx(J,{sx:{fontSize:20,color:"white"}}):null]})]})}),s.map((a,S)=>e.jsx(Ms,{Item:a,onChange:y,ActiveTab:r,DeleteDraft:h},S))]})};var fe={},_s=oe;Object.defineProperty(fe,"__esModule",{value:!0});var Ve=fe.default=void 0,zs=_s(re()),Ls=e,Ts=(0,zs.default)((0,Ls.jsx)("path",{d:"M5 13h14v-2H5v2zm-2 4h14v-2H3v2zM7 7v2h14V7H7z"}),"ClearAll");Ve=fe.default=Ts;var pe={},Bs=oe;Object.defineProperty(pe,"__esModule",{value:!0});var Oe=pe.default=void 0,$s=Bs(re()),Us=e,Ps=(0,$s.default)((0,Us.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"}),"Markunread");Oe=pe.default=Ps;var je={},Fs=oe;Object.defineProperty(je,"__esModule",{value:!0});var We=je.default=void 0,Es=Fs(re()),Ys=e,Hs=(0,Es.default)((0,Ys.jsx)("path",{d:"M19 4h-3.5l-1-1h-5l-1 1H5v2h14zM6 7v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm8 7v4h-4v-4H8l4-4 4 4h-2z"}),"RestoreFromTrash");We=je.default=Hs;var Ie={},Vs=oe;Object.defineProperty(Ie,"__esModule",{value:!0});var qe=Ie.default=void 0,Os=Vs(re()),Ws=e,qs=(0,Os.default)((0,Ws.jsx)("path",{d:"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z"}),"RotateLeft");qe=Ie.default=qs;function Ns({TrashDelete:s,clickReset:x,activeTab:r,ConfirmUndelete:h,DeletePermanent:l,clickDelete:i,clickReadUnread:u}){return e.jsx(g,{children:e.jsxs(o,{gap:1,sx:{p:1,display:"flex",backgroundColor:"white",borderRadius:"10px"},children:[r=="Sent"?e.jsx(o,{item:!0,xs:5.5,sm:6,md:0,lg:2,children:e.jsx(Y,{onClick:r=="Sent"&&l,endIcon:e.jsx(Ve,{}),fullWidth:!0,sx:{color:"#38548A",width:"210px","&:hover":{color:"red",backgroundColor:xe[100]}},children:"Delete From Everyone"})}):r=="Trash"&&e.jsx(o,{item:!0,xs:5.5,sm:6,md:3,lg:1.5,children:e.jsx(Y,{onClick:h,endIcon:e.jsx(We,{}),fullWidth:!0,sx:{borderRadius:"0px",color:"#38548A","&:hover":{color:"red",backgroundColor:xe[100]}},children:"Un-Delete"})}),e.jsx(o,{item:!0,xs:3.5,sm:3,md:1.5,lg:1,pl:1,children:e.jsx(Y,{fullWidth:!0,onClick:r=="Trash"?s:i,endIcon:e.jsx(ue,{}),sx:{color:"#38548A","&:hover":{color:"red",backgroundColor:xe[100]}},children:"Delete"})}),e.jsx(o,{item:!0,xs:3,sm:3,md:1.5,lg:1,children:e.jsx(Y,{fullWidth:!0,onClick:x,endIcon:e.jsx(qe,{}),sx:{color:"#38548A","&:hover":{color:"blue",backgroundColor:se[100]}},children:"Reset"})}),e.jsx(o,{children:(r==="Inbox"||r==="Trash")&&e.jsxs(o,{children:[e.jsxs(Y,{endIcon:e.jsx(Oe,{}),onClick:()=>{u("Unread")},sx:{color:"#38548A","&:hover":{color:"blue",backgroundColor:se[100]}},children:[" ","Mark as Unread"," "]}),e.jsxs(Y,{endIcon:e.jsx(Ss,{}),onClick:()=>{u("Read")},sx:{color:"#38548A","&:hover":{color:"green",backgroundColor:Pe[100]}},children:[" ","Mark as Read"]})]})})]})})}Fe(ge)(({theme:s})=>({backgroundColor:s.palette.mode==="dark"?"#1A2027":"#fff",...s.typography.body2,padding:s.spacing(1),textAlign:"center",height:"61px",boxShadow:" 5px 5px 10px rgba(163, 177, 198, 0.3), -5px -5px 10px rgba(255, 255, 255, 0.2)",color:s.palette.text.secondary}));const te=({ButtonType:s,clickTab:x,activeTab:r,MarkAsRead:h,TrashReadMessage:l})=>{const i=Ee();return window.location.pathname.replace("/RITeSchool/MessageCenter/msgCenter/",""),e.jsx(e.Fragment,{children:e.jsxs(fs,{color:r==s?"secondary":"primary",onClick:()=>{x(s)},sx:js,children:[s==="Inbox"?e.jsx($e,{badgeContent:h,color:"error",children:e.jsx(Ds,{className:i.IconSize})}):s==="Sent"?e.jsx(bs,{className:i.IconSize}):s==="Trash"?e.jsx($e,{badgeContent:l,color:"error",children:e.jsx(ue,{className:i.IconSize})}):s==="Draft"?e.jsx(He,{className:i.IconSize}):null,e.jsx("br",{}),e.jsx("b",{children:s})]})})},Gs=({activeTab:s,clickTab:x,MarkAsRead:r,TrashReadMessage:h})=>e.jsx("div",{children:e.jsxs(o,{spacing:{xs:1,sm:0},direction:{xs:"row",sm:"column"},children:[e.jsx(o,{item:!0,xs:3,sx:{textAlign:"center",color:"#38548A"},children:e.jsx(te,{ButtonType:"Inbox",clickTab:x,activeTab:s,MarkAsRead:r,TrashReadMessage:h})}),e.jsx(o,{item:!0,xs:3,sx:{textAlign:"center",color:"#38548A"},children:e.jsx(te,{ButtonType:"Sent",clickTab:x,activeTab:s,MarkAsRead:r,TrashReadMessage:h})}),e.jsx(o,{item:!0,xs:3,sx:{textAlign:"center",color:"#38548A"},children:e.jsx(te,{ButtonType:"Trash",clickTab:x,activeTab:s,MarkAsRead:r,TrashReadMessage:h})}),e.jsx(o,{item:!0,xs:3,sx:{textAlign:"center",color:"#38548A"},children:e.jsx(te,{ButtonType:"Draft",clickTab:x,activeTab:s,MarkAsRead:r,TrashReadMessage:h})})]})});function Js({activeTab:s,clickSearchIcon:x,clickTab:r,MarkAsRead:h,TrashReadMessage:l}){return e.jsx("div",{children:e.jsxs(o,{container:!0,children:[e.jsx(o,{item:!0,xs:10,sm:12,children:e.jsx(Gs,{activeTab:s,clickTab:r,MarkAsRead:h,TrashReadMessage:l})}),e.jsx(o,{item:!0,xs:2,md:6,display:{xs:"block",sm:"none"},sx:{textAlign:"center"},children:e.jsx(Cs,{fontSize:"large",sx:{marginTop:"8px",cursor:"pointer"},onClick:x})})]})})}const Ks=Fe(ge)(({theme:s})=>({backgroundColor:s.palette.mode==="dark"?"#1A2027":"#fff",...s.typography.body2,padding:s.spacing(1),textAlign:"center",height:"61px",color:"black",boxShadow:"0px 8px 15px rgba(0, 0, 0, 0.1)"})),Qs=2,Dr=()=>{var Me,Ae;const s=window.location.pathname,x=s.indexOf("/RITeSchool/MessageCenter/msgCenter/")===-1?s.replace("/RITeSchool/MessageCenter/msgCenter",""):s.replace("/RITeSchool/MessageCenter/msgCenter/",""),r=me(),h=Ee(),l=localStorage.getItem("localSchoolId"),i=sessionStorage.getItem("AcademicYearId"),u=sessionStorage.getItem("Id"),[p,y]=n.useState(Qs),[c,k]=n.useState(""),[d,I]=n.useState(""),[R,a]=n.useState(""),[S,_]=n.useState(""),[z,A]=n.useState("="),[T,f]=n.useState(!1),[U,V]=n.useState(""),[O,Q]=n.useState(!1),[C,P]=n.useState([]);n.useState(!1),n.useState(),n.useState(!0);const[D,W]=n.useState("none"),[Se,Ne]=n.useState(!1),[Ce,De]=n.useState(!1),[be,ve]=n.useState(!1),{showAlert:X,closeAlert:L}=n.useContext(Jt),Ge=v(t=>t.MessageCenter.YearsList),Je=v(t=>t.MessageCenter.AllMonthList),q=v(t=>t.InboxMessage.InboxList),Ke=v(t=>t.InboxMessage.UnReadMessage),ae=v(t=>t.InboxMessage.trashUnReadMessage),Z=v(t=>t.InboxMessage.TotalCountLabel),ne=v(t=>t.MessageCenter.ReadUnReadStatus),le=v(t=>t.InboxMessage.NextPageList),Qe=v(t=>t.InboxMessage.Loading);v(t=>t.DeleteMessagePermanetly.DeleteMessagePermanentlyList);const ie=v(t=>t.DraftMessages.DeleteDraftMessage),Xe=R==""?"0":R;let F=0;switch(c){case"Inbox":F=Z||0;break;case"Sent":F=((Me=C[0])==null?void 0:Me.TotalCountLabel)||0;break;case"Trash":F=((Ae=C[0])==null?void 0:Ae.TotalCountLabel)||Z||0;break;case"Draft":F=Z||0;break;default:F=Z||0}const[N,Ze]=n.useState("Insert_Date"),[G,et]=n.useState("DESC"),E={asSchoolId:l,asAcademicYearId:d,asUserId:sessionStorage.getItem("Id"),asUserRoleId:sessionStorage.getItem("RoleId"),abIsSMSCenter:"0",asFilter:S,asPageIndex:1,asMonthId:Xe,asOperator:z,asDate:U,asSortExp:N,asSortDirection:G},tt=t=>{Ze(t)},st=t=>{et(t)},rt=(t,m)=>({asSchoolId:l,asAcademicYearId:d,asUserId:sessionStorage.getItem("Id"),asUserRoleId:sessionStorage.getItem("RoleId"),abIsSMSCenter:"0",asFilter:t,asPageIndex:1,asMonthId:m}),ot=(t,m)=>({asSchoolId:l,asAcademicYearId:d,asUserId:sessionStorage.getItem("Id"),asUserRoleId:sessionStorage.getItem("RoleId"),abIsSMSCenter:"0",asFilter:"",asPageIndex:1,asMonthId:"0",asDate:""}),at={asSchoolId:l},nt={asAcademicYearId:d,asSchoolId:l},we=()=>{window.innerWidth<600?ve(!0):ve(!1)};window.addEventListener("resize",we),n.useEffect(()=>{we(),r(Kt(at)),k(x===""?"Inbox":x),I(i)},[]),n.useEffect(()=>{ne!==null&&(H.success(ne.UpdationMessage,{toastId:"success1"}),r(Qt()),r(M(E,c,!1)))},[ne]),n.useEffect(()=>{P(q)},[q]),n.useEffect(()=>{d!==""&&(r(Xt(nt)),a("0"))},[d]),n.useEffect(()=>{d!==""&&r(M(E,c,!1))},[c,T,Se,N,G]);const lt=t=>{k(t),y(2)},it=t=>{I(t),a("")},ct=t=>{a(t)},dt=t=>{V(as(t))},xt=t=>{A(t)},ht=t=>{t.target.value.length<=50&&_(t.target.value)},mt=[{Name:"=",Value:"="},{Name:"<",Value:"<"},{Name:"<=",Value:"<="},{Name:">",Value:">"},{Name:">=",Value:">="}],ut=()=>{Q(!O)},gt=()=>{let t=[];C.map(b=>{b.isActive&&t.push(b.DetailsId)});const m={asSchoolId:l,asAcademicYearId:i,asUserId:u,asMessageIds:t.join(",")};Le.DeleteMessagePermanentlyapi(m).then(b=>{H.success("Message deleted successfully."),r(is(m)),r(M(E,c,!1))}).catch(b=>{alert("error network")})},ft=t=>{let m=[];C.map(j=>{j.isActive&&m.push(j.ReceiverDetailsId)});const b={aiSchoolId:l,aiAcademicYearId:i,asMessageReceiverIds:m.join(","),aiReceiverUserId:u,abMarkAsRead:t=="Read"?"true":"false"};r(ns(b))},ke=()=>{let t=[],m=[];C.map(j=>{j.isActive&&(t.push(j.DetailsId),m.push(j.ReceiverDetailsId))});const b={asSchoolId:l,asMessageDetailsId:t.join(";"),asMessageRecieverDetailsId:c=="Inbox"||c=="Trash"?m.join(";"):t.join(";"),asIsArchive:"Y",asIsCompeteDelete:c=="Inbox"||c=="Sent"?0:1,asFlag:c};xs.MoveToTrash(b).then(j=>{c=="Inbox"||c=="Sent"?H.success("Message(s) has been moved to the trash."):H.success("Message deleted successfully."),r(M(E,c,!1))}).catch(j=>{alert("error network")})},pt=()=>{X({title:"Please Confirm",message:"Are you sure you want to delete the selected message(s)?",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{L()},onConfirm:()=>{ke(),L()}})},jt=()=>{let t=[],m=[];C.map(j=>{j.isActive&&(t.push(j.DetailsId),m.push(j.ReceiverDetailsId))});const b={asSchoolId:l,asMessageRecieverDetailsIds:m.join(","),asMessageDetailsIds:t.join(",")};Le.UnDeleteMessagesapi(b).then(j=>{H.success("Message(s) undeleted successfully."),r(M(E,c,!1))}).catch(j=>{alert("error network")})},It=()=>{X({title:"Please Confirm",message:"Are you sure you want to un-delete the selected message(s)?",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{L()},onConfirm:()=>{jt(),L()}})},St=()=>{X({title:"Please Confirm",message:"This action will permanently delete selected message(s) from the sent message list of the current user as well as from the inbox of all related recipients (if unread). If any recipient reads the message, then that message will be visible in the sent message list of the current user. Do you want to continue?",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{L()},onConfirm:()=>{gt(),L()}})},Ct=()=>{P(C.map(t=>({...t,isActive:!1})))},Dt=(t,m,b,j,zt,Lt)=>{_(t),I(m),a(b),A(j),V(zt),f(Lt)},bt=t=>{P(t)},vt=()=>{Ne(!Se),_(""),I(i),a(""),A(""),V("")},ce=document.getElementById("ScrollableDiv"),Re=()=>{y(t=>p+1)},wt=t=>{if(t.scrollTop>=400&&W("flex"),t.scrollTop<400&&W("none"),t.scrollHeight-t.scrollTop<=t.clientHeight+5){const m={asSchoolId:l,asAcademicYearId:d,asUserId:sessionStorage.getItem("Id"),asUserRoleId:sessionStorage.getItem("RoleId"),abIsSMSCenter:"0",asFilter:S,asPageIndex:p,asMonthId:R,asOperator:z,asDate:U,asSortExp:N,asSortDirection:G};r(M(m,c,!0)),Re()}};n.useEffect(()=>{le.length>0&&P(t=>[...C,...le])},[le]);const kt=()=>{Q(!1),I(i),a(""),_(""),r(c==="Draft"?M(ot(),c,!1):M(rt("",""),c,!1))},Rt=t=>{ce.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{W("none")},10)},yt=()=>{const t=ce;ce.scrollTo({top:t.scrollHeight,behavior:"smooth"}),Mt()},Mt=()=>{const t={asSchoolId:l,asAcademicYearId:d,asUserId:sessionStorage.getItem("Id"),asUserRoleId:sessionStorage.getItem("RoleId"),abIsSMSCenter:"0",asFilter:S,asPageIndex:p,asMonthId:R,asOperator:z,asDate:U,asSortExp:N,asSortDirection:G};r(M(t,c,!0)),Re()},ye=()=>{localStorage.setItem("ViewMessageData","")};he();const At=()=>{De(!0)},_t=t=>{const m={aiSchoolId:l,aiAcademicYearId:i,aiUserId:sessionStorage.getItem("Id"),aiDraftId:t};X({title:"Please Confirm",message:"Are you sure you want to delete this record?",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{L()},onConfirm:()=>{r(ls(m)),L()}})};return n.useEffect(()=>{ie!==""&&(H.success(ie,{toastId:"success1"}),r(Zt()),r(M(E,c,!1)))},[ie]),e.jsx(e.Fragment,{children:e.jsxs(g,{sx:{px:2},children:[e.jsx(es,{navLinks:[{title:"Message Center",path:""}],rightActions:e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(B,{title:'Inbox - List of message Received. Select message(s) and click on "Delete" to send the message to trash box. Trash - List of Trash(deleted messages) messages. Select message and click on "Un-Delete" to move the message back to inbox. To permanently delete the message click on "Delete". Sent items - List of messages which you have sent.Select message(s) and click on "Delete" to send the message to trash box.',children:e.jsx($,{sx:{color:"white",backgroundColor:ee[500],height:"36px !important",":hover":{backgroundColor:ee[600]}},children:e.jsx(ts,{})})})}),e.jsx(g,{children:e.jsxs(Ue,{children:[e.jsx(B,{title:"Setting",children:e.jsx($,{sx:{color:"white",mr:1,backgroundColor:ee[500],"&:hover":{backgroundColor:ee[600]}},children:e.jsx(ss,{onClick:At,fontSize:"medium"})})}),e.jsx(B,{title:"Refresh",children:e.jsx($,{sx:{color:"white",backgroundColor:se[500],"&:hover":{backgroundColor:se[600]}},children:e.jsx(ds,{onClick:vt,fontSize:"medium"})})})]})})]})}),e.jsxs(o,{container:!0,columnGap:1,children:[e.jsxs(o,{item:!0,sm:1.3,xs:12,spacing:1,children:[e.jsx(Ue,{smDown:!0,children:e.jsx(ze,{style:{textDecoration:"none",color:"#223354"},to:`/${location.pathname.split("/")[1]}/MessageCenter/Compose`,children:e.jsxs(ge,{onClick:ye,sx:{textAlign:"center",height:"80px",backgroundColor:"white",mb:"10px",borderRadius:"5px"},children:[e.jsx(Te,{sx:{mt:"10px",color:"#38548A"},className:h.IconSize}),e.jsx("br",{}),e.jsx("b",{style:{color:"#38548A"},children:"Compose"})]})})}),e.jsx(g,{children:!O&&e.jsx(Js,{activeTab:c,MarkAsRead:Ke,TrashReadMessage:ae==null?void 0:ae.UnreadMessageTotalCount,clickTab:lt,clickSearchIcon:ut})})]}),e.jsxs(o,{container:!0,sm:10.7,spacing:1,children:[(O&&be||!be)&&e.jsx(e.Fragment,{children:e.jsx(o,{item:!0,xs:12,sm:12,md:12,children:e.jsx(ks,{activeTab:c,AcademicYearList:Ge,MonthYearList:Je,operatorArray:mt,clickSearch:Dt,academicYear:d,monthYear:R,operator:z,searchDate:U,searchText:S,clickAcademicYear:it,clickMonthYear:ct,clickOperator:xt,clickDate:dt,textOnChange:ht,isSearchClicked:T,CloseSearchBar:kt})})}),e.jsx(o,{item:!0,xs:12,children:C.some(t=>t.isActive===!0)&&e.jsx(e.Fragment,{children:e.jsx(g,{mb:2,sx:Is,children:e.jsx(Ns,{activeTab:c,clickReset:Ct,TrashDelete:pt,ConfirmUndelete:It,DeletePermanent:St,clickDelete:ke,clickReadUnread:ft})})})}),e.jsx(o,{item:!0,xs:12,children:e.jsxs(ps,{children:[Qe?e.jsx(rs,{}):e.jsx("div",{id:"ScrollableDiv",onScroll:t=>{wt(t.target)},style:{paddingBottom:"100px",height:"570px",overflow:"auto"},children:(q==null?void 0:q.length)===0?e.jsx(w,{variant:"h6",align:"center",color:"blue",sx:{textAlign:"center",marginTop:1,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:"No record found."}):e.jsxs(o,{container:!0,children:[e.jsx(o,{xs:12,sm:12,md:12,sx:{textAlign:"right"},mt:-1,mb:-1,children:e.jsxs(w,{variant:"subtitle1",sx:{margin:"16px 0",textAlign:"center"},children:[e.jsx(g,{component:"span",fontWeight:"fontWeightBold",children:C.length})," ","Out of"," ",e.jsx(g,{component:"span",fontWeight:"fontWeightBold",children:F})," "," records"]})}),e.jsx(o,{xs:12,sm:12,md:12,children:e.jsx(As,{Itemlist:C,ActiveTab:c,DeleteDraft:_t,refreshData:bt,clickSortExp:tt,clickSortDirection:st,SortDirection:G,SortExp:N})})]})}),e.jsxs(g,{sx:{isplay:D,position:"fixed",bottom:"95px",zIndex:"1",left:"15px",p:"1px",width:50,height:80,backgroundColor:"white",m:2,textAlign:"center",boxShadow:"5px 5px 10px rgba(163, 177, 198, 0.4), -5px -5px 10px rgba(255, 255, 255, 1) !important",borderRadius:"15px"},children:[e.jsx(cs,{onClick:Rt,fontSize:"large",color:"success"}),e.jsx(os,{onClick:yt,fontSize:"large",color:"success"})]}),e.jsx(g,{sx:{display:"flex",justifyContent:"flex-start",gap:"8px"},children:Ce&&e.jsx(vs,{open:Ce,setOpen:De})}),e.jsx("span",{style:{width:"95px",position:"fixed",bottom:"70px",right:"60px"},children:e.jsx(ze,{style:{textDecoration:"none"},to:`/${location.pathname.split("/")[1]}/MessageCenter/Compose`,children:e.jsxs(Ks,{onClick:ye,sx:{fontSize:"10px",mr:1,mb:"10px",borderRadius:"15px",backgroundColor:"#38548A",color:"white"},children:[e.jsx(Te,{}),e.jsx("br",{}),e.jsx("b",{children:"Compose"})]})})})]})})]})]})]})})};export{Dr as default};
