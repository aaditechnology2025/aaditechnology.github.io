import{j as t,d5 as Bt,q as Rt,v as ve,A as Mt,u as Pt,ad as Ut,r as s,z as Ot,c as h,mH as Vt,mI as Gt,aJ as Fe,mJ as Ae,mK as Ht,mL as zt,t as he,mM as $t,mN as Jt,mO as Wt,B as l,C as Yt,E as A,I as w,ap as xe,J as we,K as _t,G as a,T as P,o as Se,aH as i,bI as qt,a9 as Le,aq as Kt,bs as Qt,c7 as D,bH as C,mP as Xt,aK as Zt,mQ as es,az as Be}from"./index-CpZD2H93.js";import{d as ts}from"./Close-7OiSXahc.js";import{R as ss}from"./index-DJQdxN4p.js";/* empty css                   */import{S as Re}from"./SingleFile2-CCMdUYvr.js";import{R as os}from"./RadioButton1-Bomg8HHo.js";import{S as as}from"./SelectListHierarchy-B0--0w-H.js";import{T as Me}from"./TimepickerTwofields-CJ0DH21z.js";import{F as rs}from"./FormGroup-C5-m8U5s.js";import"./CloudUpload-C2WsbpCZ.js";import"./Errormessage-DVJGTehf.js";import"./ButtonStyle-DAEB_dBE.js";import"./RadioGroup-DpIwLy2j.js";import"./Radio-IVxzoZco.js";const Pe=({DateValue:r,onDateChange:g,label:p,size:c,fullWidth:m=!0})=>t.jsx(t.Fragment,{children:t.jsx(Bt,{value:r?new Date(r):null,onChange:g,format:"dd MMM yyyy",label:p?t.jsxs(t.Fragment,{children:[p," ",p&&t.jsx("span",{style:{color:"red"},children:"*"})]}):p===""?"":"Select Date",views:["year","month","day"],slotProps:{textField:{variant:"outlined",fullWidth:m,size:c||"medium",inputProps:{readOnly:!0}}}})}),bs=()=>{let{NoticeId:r,selectDisplayType:g}=Rt();r=ve(r),g=ve(g);const p=Mt(),c=Pt();Ut();const m=Number(localStorage.getItem("localSchoolId")),Ue=Number(sessionStorage.getItem("AcademicYearId")),fe=Number(localStorage.getItem("UserId")),Oe=localStorage.getItem("FolderName"),[d,U]=s.useState("1");s.useState("");const[x,L]=s.useState(""),[u,ge]=s.useState("B"),[S,O]=s.useState(new Date().toISOString().split("T")[0]),[j,V]=s.useState(new Date().toISOString().split("T")[0]),[G,H]=s.useState("00:00"),[z,$]=s.useState("23:59"),[N,J]=s.useState(""),[W,Y]=s.useState(""),[Ve,_]=s.useState(""),[pe,B]=s.useState(""),[Ge,q]=s.useState(""),[b,R]=s.useState(""),[He,ze]=s.useState(""),[$e,Je]=s.useState(""),[je,K]=s.useState([]),[Ne,Q]=s.useState(""),[k,X]=s.useState(""),[ls,be]=s.useState(""),[Ie,T]=s.useState(!1),[We,Z]=s.useState(""),[Ye,ee]=s.useState(""),[_e,te]=s.useState(""),[qe,se]=s.useState(""),[Ke,y]=s.useState(""),[Qe,oe]=s.useState(""),[Xe,ae]=s.useState(""),[Ze,re]=s.useState(""),[et,le]=s.useState(""),[tt,ie]=s.useState("");s.useState(!1),s.useState(""),s.useState("");const[st,I]=s.useState(!1);s.useState("");const{showAlert:ot,closeAlert:Ee}=s.useContext(Ot),[n,E]=s.useState({admin:!1,teacher:!1,student:!1,adminStaff:!1,otherStaff:!1}),at=[{Value:"1",Name:"File"},{Value:"2",Name:"Text"}],rt=[{Id:1,Name:"Both",Value:"B"},{Id:2,Name:"Control Panel",Value:"C"},{Id:3,Name:"Home Page",Value:"H"}],lt=["PDF","PNG","JPEG","JPG","BMP"],it=3e6,nt=["JPG","JPEG","PNG","BMP"],ct=3e6,ne=h(e=>e.SchoolNoticeForm.AllClassesAndDivisionss),dt=h(e=>e.SchoolNoticeForm.AllClassesAndDivisionss1),De=h(e=>e.SchoolNoticeForm.SaveSchoolNotice),ce=h(e=>e.SchoolNoticeForm.DeleteImageMsg),M=h(e=>e.SchoolNoticeForm.EditSchoolNotice),de=h(e=>e.SchoolNoticeForm.UserRoleselected),me=h(e=>e.SchoolNoticeForm.SelectedStandardAndDivisionCheckBoxx),Ce=h(e=>e.SchoolNoticeForm.getSchoolNoticeIdByName);s.useEffect(()=>{c(Vt({asSchoolId:m,asAcademicYearId:Ue}));const o={asSchoolId:Number(m),asNoticeId:Number(r)};c(Gt(o))},[]);const v=e=>{let o=!1;return de.map(f=>{f.UserRoleId==e&&(o=!0)}),o};s.useEffect(()=>{if(de.length>0){let e={admin:v("1"),teacher:v("2"),student:v("3"),adminStaff:v("6"),otherStaff:v("7")};E(e);const o=Object.values(e).every(f=>f);I(o)}},[de]);const mt=e=>{let o=!1;return me.map(f=>{f.StandardDivisionId==e&&(o=!0)}),o};s.useEffect(()=>{me.length>0&&K(ne.map(e=>({...e,IsActive:mt(e.Value)})))},[me]),s.useEffect(()=>{g=="true"?(U("2"),T(!0)):(U("1"),T(!1))},[g]),s.useEffect(()=>{if(r!=null&&M.length>0&&M[0]!=null){const e=M[0];L(e.Text1),O(Fe(e.Text2)),H(Ae(e.Text2)),V(Fe(e.Text3)),$(Ae(e.Text3)),ge(e.Text4),X(e.Text5),J(e.Text6),Q(e.Text7),Y(e.Text8),be(e.Text9),T(e.IsText),R(e.NoticeImage)}},[M]),s.useEffect(()=>{if(r){const e={asSchoolId:m,asNoticeId:Number(r)};c(Ht(e)),c(zt(e))}},[r]);const ue=()=>{let e=[];return je.map(o=>{o.IsActive&&e.push(o.Id)}),e.toString()};ue();const ut=e=>{const o={asSchoolId:Number(m),asNoticeId:Number(e),asIsText:0};b&&ot({title:"Please Confirm",message:"Are you sure you want to delete Event Image?",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{Ee()},onConfirm:()=>{c(Xt(o)),Ee()}})};s.useEffect(()=>{ce!==""&&(he.success(ce),c($t()),R(""))},[ce]);const ke=()=>{let e="";return e=n.admin?"1,":"",e=e+(n.teacher?"2,":""),e=e+(n.student?"3,":""),e=e+(n.adminStaff?"6,":""),e=e+(n.otherStaff?"7,":""),e=e==""?"":e.substring(0,e.length-1),e};s.useEffect(()=>{const e={asSchoolId:Number(m),asNoticeName:x,asStartDate:S+" "+G,asEndDate:j+" "+z};c(Jt(e))},[x,S,j]);const ht={NoticeId:Number(r||0),asUserRoleIds:ke(),asClassIds:ue(),asSaveFeature:"School Notices",asFolderName:Oe,asBase64String:He,asBase64String2:$e,NoticeName:x,DisplayLocation:u,StartDate:S+" "+G,EndDate:j+" "+z,SortOrder:Number(k),FileName:N==""?null:N,IsSelected:!0,IsText:Ie,NoticeContent:W,UserId:fe,SchoolId:Number(m),InertedById:fe,NoticeDescription:Ne,NoticeImage:b==""?null:b},xt=()=>{let e=!1;d=="1"&&(x==""?(Z("Link name should not be blank."),e=!0):Z("")),d=="2"&&(x==""?(te("Notice name should not be blank."),e=!0):te("")),ke()?ie(""):(ie("At least one user role should be selected."),e=!0),!ue()&&n.student==!0?(q("At least one class should be selected."),e=!0):q(""),S===""?(re("Please choose a valid start date."),e=!0):re(""),S===null?(oe("Start Date should not be blank."),e=!0):oe(""),Zt(j,S)?(le("End date should be greater than start date."),e=!0):le(""),j==null?(ae("End Date should not be blank."),e=!0):ae(""),d=="1"&&(N==""?(B("Notice File to be uploaded should be selected."),e=!0):B("")),d=="2"&&(W==""?(_("Notice content should not be blank."),e=!0):_("")),k===""?(y("Sort order should not be blank."),e=!0):/^\d+$/.test(k)?parseInt(k,10)===0?(y("Sort order cannot be 0."),e=!0):y(""):(y("Sort order should only contain numbers."),e=!0),r||(d=="1"&&(Ce!=null?(ee("Link name already exists."),e=!0):ee("")),d=="2"&&(Ce!=null?(se("Notice name already exists."),e=!0):se(""))),e||c(es(ht))};s.useEffect(()=>{De!=""&&(r?he.success("Notice updated successfully.",{toastId:"success1"}):he.success("School notice added successfully.",{toastId:"success1"}),c(Wt()),p("/RITeSchool/Teacher/SchoolNoticeBasescreen",{state:{fromInternal:!0}}))},[De]);const St={toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],["bold","italic","underline","strike","blockquote"],[{script:"sub"},{script:"super"}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image","video"],["clean"]]},ft=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","color","background","link","image","video","script"],gt=e=>{U(e),e=="1"?T(!1):T(!0)},pt=e=>{Y(e)},jt=e=>{const{checked:o}=e.target;I(o),E({admin:o,teacher:o,student:o,adminStaff:o,otherStaff:o})},F=e=>{const{name:o,checked:f}=e.target;E(At=>{const ye={...At,[o]:f},wt=Object.values(ye).every(Lt=>Lt);return I(wt),ye})},Nt=()=>{L(""),O(new Date().toISOString().split("T")[0]),V(new Date().toISOString().split("T")[0]),H("00:00"),$("23:59"),X(""),J(""),Q(""),Y(""),be(""),R(""),I(!1),E({admin:!1,teacher:!1,student:!1,adminStaff:!1,otherStaff:!1}),Z(""),te(""),ee(""),se(""),B(""),ie(""),y(""),q(""),le(""),ae(""),re(""),oe(""),_("")};s.useEffect(()=>{K(ne)},[ne]);const bt=e=>{K(e)},It=e=>{H(e)},Et=e=>{$(e)},Dt=e=>{ge(e),e==="H"?(I(!0),E({admin:!0,teacher:!0,student:!0,adminStaff:!0,otherStaff:!0})):(I(!1),E({admin:!1,teacher:!1,student:!1,adminStaff:!1,otherStaff:!1}))},Ct=e=>{O(Be(e))},kt=e=>{V(Be(e))},Tt=e=>{J(e.Name),ze(e.Value),B("")},yt=e=>{R(e.Name),Je(e.Value)};let Te=localStorage.getItem("SiteURL")+"/RITeSchool/DOWNLOADS/School Notices/";const vt=()=>{if(b){const e=`${Te}${b}`;window.open(e,"_blank")}},Ft=()=>{if(N){const e=`${Te}${N}`;window.open(e,"_blank")}};return t.jsx(t.Fragment,{children:t.jsxs(l,{sx:{px:2},children:[t.jsx(Yt,{navLinks:[{title:"School Notice",path:"/RITeSchool/Teacher/SchoolNoticeBasescreen/"+Ie},{title:`${d==="1"?"File":"Text"}`,path:"/RITeSchool/Teacher/AddSchoolNotceFT"}],rightActions:t.jsxs(t.Fragment,{children:[t.jsx(l,{children:t.jsx(A,{title:"Cancel",children:t.jsx(w,{sx:{color:"white",backgroundColor:xe[500],height:"36px !important",":hover":{backgroundColor:xe[600]}},onClick:Nt,children:t.jsx(ts,{})})})}),t.jsx(l,{children:t.jsx(A,{title:r!=null?"Update":"Save",children:t.jsx(w,{type:"submit",sx:{color:"white",backgroundColor:we[500],height:"36px !important",":hover":{backgroundColor:we[600]}},onClick:xt,children:t.jsx(_t,{})})})})]})}),t.jsx(a,{sx:{backgroundColor:"white",mb:1,p:1},children:t.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(P,{variant:"h5",children:"Notice Display Type : "}),t.jsx(os,{Array:at,ClickRadio:gt,defaultValue:d,Label:""})]})}),t.jsx(l,{sx:{p:2,background:"white"},children:t.jsxs(a,{container:!0,spacing:2,children:[d==="1"?t.jsxs(a,{item:!0,xs:12,sm:4,md:4,lg:6,children:[t.jsx(Se,{fullWidth:!0,label:t.jsxs("span",{children:["Link Name ",t.jsx("span",{style:{color:"red"},children:"*"})]}),multiline:!0,rows:1,value:x,onChange:e=>{const o=e.target.value;o.length<=50&&L(o)}}),t.jsxs(l,{children:[t.jsx(i,{Error:We}),t.jsx(i,{Error:Ye})]})]}):t.jsxs(a,{item:!0,xs:12,sm:4,md:4,lg:6,children:[t.jsx(Se,{fullWidth:!0,label:t.jsxs("span",{children:["Notice Name ",t.jsx("span",{style:{color:"red"},children:"*"})]}),multiline:!0,rows:1,value:x,onChange:e=>{const o=e.target.value;o.length<=50&&L(o)}}),t.jsx(i,{Error:_e}),t.jsx(i,{Error:qe})]}),t.jsx(a,{item:!0,xs:12,sm:4,md:4,lg:3,children:t.jsx(qt,{sx:{minWidth:"20vw"},ItemList:rt,defaultValue:u,onChange:Dt,label:"Display Location"})}),t.jsxs(a,{item:!0,xs:12,sm:4,md:4,lg:3,children:[t.jsx(Se,{fullWidth:!0,label:t.jsxs("span",{children:["Sort Order ",t.jsx("span",{style:{color:"red"},children:"*"})]}),multiline:!0,rows:1,value:k,onChange:e=>{const o=e.target.value;o.length<=3&&X(o)}}),t.jsx(i,{Error:Ke})]}),t.jsxs(a,{item:!0,xs:12,sm:4,md:4,lg:3,children:[t.jsx(Pe,{DateValue:S,onDateChange:Ct,label:"Start Date",size:"medium"}),t.jsx(i,{Error:Ze}),t.jsx(i,{Error:Qe})]}),t.jsx(a,{item:!0,xs:12,sm:4,md:4,lg:3,children:t.jsx(Me,{Item:G,label:"Start Time",isMandatory:!1,ClickItem:It,size:"medium",tooltipMessage:"e.g. 10:00 AM"})}),t.jsxs(a,{item:!0,xs:12,sm:4,md:4,lg:3,children:[t.jsx(Pe,{DateValue:j,onDateChange:kt,label:"End Date",size:"medium"}),t.jsx(i,{Error:et}),t.jsx(i,{Error:Xe})]}),t.jsx(a,{item:!0,xs:12,sm:4,md:4,lg:3,children:t.jsx(Me,{Item:z,label:"End Time",isMandatory:!1,ClickItem:Et,size:"medium",tooltipMessage:"e.g. 04:00 PM"})}),d==="1"&&t.jsxs(t.Fragment,{children:[t.jsxs(a,{item:!0,xs:10,sm:3,md:3,lg:2.5,children:[t.jsx(Re,{ValidFileTypes:lt,MaxfileSize:it,ChangeFile:Tt,errorMessage:"",FileName:N,FileLabel:"Select File",width:"100%",height:"52px",isMandatory:!0}),pe&&t.jsx(i,{Error:pe})]}),t.jsx(a,{item:!0,xs:1,sm:1,md:1,lg:.5,children:t.jsx(A,{title:"View",children:t.jsx(w,{onClick:Ft,sx:{color:"#223354",mt:.7,"&:hover":{color:"#223354",cursor:"pointer"}},children:t.jsx(Le,{})})})})]}),t.jsx(a,{item:!0,xs:8,sm:2.3,md:2.5,lg:2,children:t.jsx(Re,{ValidFileTypes:nt,MaxfileSize:ct,ChangeFile:yt,errorMessage:"",FileName:b,FileLabel:"Select Image",width:"100%",height:"52px",isMandatory:!1})}),t.jsx(a,{item:!0,xs:4,sm:1.7,md:1.5,lg:1,children:t.jsxs(t.Fragment,{children:[t.jsx(A,{title:"View",children:t.jsx(w,{onClick:vt,sx:{color:"#223354",mt:.7,"&:hover":{color:"#223354",cursor:"pointer"}},children:t.jsx(Le,{})})}),t.jsx(A,{title:"Delete",children:t.jsx(w,{onClick:()=>ut(Number(r)),sx:{color:"#223354",mt:.7,"&:hover":{color:"red",backgroundColor:xe[100]}},children:t.jsx(Kt,{})})})]})}),t.jsx(a,{item:!0,xs:12,children:t.jsx(Qt,{label:t.jsx(t.Fragment,{children:"Description"}),multiline:!0,value:Ne,onChange:e=>{Q(e.target.value)},fullWidth:!0,sx:{resize:"both"}})}),t.jsx(a,{container:!0,spacing:2,pl:1,children:t.jsxs(a,{item:!0,xs:12,sm:12,md:2,mt:2,ml:1,children:[t.jsxs(P,{variant:"h5",p:1,children:["Applicable to: ",t.jsx("span",{style:{color:"red"},children:"*"})]}),t.jsxs(rs,{children:[t.jsx(l,{bgcolor:"lightgrey",pl:2,justifyContent:"flex-start",width:{xs:"100%",sm:"100%",md:"200px"},sx:{display:"flex",alignItems:"center"},children:t.jsx(D,{control:t.jsx(C,{checked:st,onChange:jt,disabled:u==="H"}),label:t.jsx(P,{variant:"h6",children:"Select All"})})}),t.jsxs(l,{gap:1,sx:{ml:1,pl:1,display:"flex",flexDirection:{xs:"column",sm:"column",md:"row"},alignItems:{xs:"flex-start",md:"center"}},children:[t.jsx(l,{width:{xs:"100%",sm:"100%",md:"auto"},children:t.jsx(D,{control:t.jsx(C,{checked:n.admin,onChange:F,disabled:u==="H",name:"admin"}),label:"Admin"})}),t.jsx(l,{width:{xs:"100%",sm:"100%",md:"auto"},children:t.jsx(D,{control:t.jsx(C,{checked:n.teacher,onChange:F,disabled:u==="H",name:"teacher"}),label:"Teacher"})}),t.jsx(l,{width:{xs:"100%",sm:"100%",md:"auto"},children:t.jsx(D,{control:t.jsx(C,{checked:n.student,onChange:F,disabled:u==="H",name:"student"}),label:"Student"})}),t.jsx(l,{width:{xs:"100%",sm:"100%",md:"125px"},children:t.jsx(D,{control:t.jsx(C,{checked:n.adminStaff,onChange:F,disabled:u==="H",name:"adminStaff"}),label:"Admin Staff"})}),t.jsx(l,{width:{xs:"100%",sm:"100%",md:"200px"},children:t.jsx(D,{control:t.jsx(C,{checked:n.otherStaff,onChange:F,disabled:u==="H",name:"otherStaff"}),label:"Other Staff"})})]}),t.jsx(i,{Error:tt})]})]})}),t.jsx(a,{container:!0,pl:2,children:n.student&&t.jsxs(a,{item:!0,xs:12,md:12,mt:1,children:[t.jsxs(P,{variant:"h4",py:1,children:["Associated Classes  ",t.jsx("span",{style:{color:"red"},children:"*"})]}),t.jsx(as,{ItemList:je,ParentList:dt,ClickChild:bt}),t.jsx(i,{Error:Ge})]})}),d==="1"?null:t.jsx(a,{item:!0,md:12,children:t.jsxs(l,{children:[t.jsx(ss,{className:"ql-editor",value:W,onChange:pt,modules:St,formats:ft,style:{height:"300px",marginBottom:"20px"}}),t.jsx(i,{Error:Ve})]})})]})})]})})};export{bs as default};
