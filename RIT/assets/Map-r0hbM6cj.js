import{j as e,G as t,b3 as g,T as x,u as y,ad as T,q as I,v as h,c,r as u,ab as k,fz as w,B as D,l as b}from"./index-CpZD2H93.js";import{d as B}from"./Refresh-DQlbduBZ.js";import{N as M}from"./Note-D5w6lthy.js";import{B as R}from"./BackButton-D8aQMrwN.js";import{P as L}from"./PageHeader-C9ChZO91.js";import{L as C}from"./CardStyle-CBuNm0_N.js";import{B as m}from"./ButtonStyle-DAEB_dBE.js";import"./Card-B0aZ7mGs.js";function F({item:a,selected:s}){return e.jsx(C,{color:s?"secondary":"primary",children:e.jsxs(t,{container:!0,alignItems:"center",children:[e.jsx(t,{item:!0,xs:1.5,children:e.jsx(g,{sx:{width:24,height:24,color:"#5c6981",backgroundColor:"white",border:"2px solid #5c6981"},children:a.Text1})}),e.jsx(t,{item:!0,xs:6.5,children:e.jsx(x,{variant:"h5",children:a.Text2})}),e.jsx(t,{item:!0,xs:4,children:e.jsx(x,{variant:"body2",sx:{float:"right"},children:a.Text3})})]})})}function H(){const a=y();T();let{PickDrop:s,alignment:o}=I();s=h(s),o=h(o);const l=c(r=>r.TransportDetails.StopDetails),i=c(r=>r.TransportDetails.OtherTrackingDetails),j=c(r=>r.TransportDetails.Loading),[n,d]=u.useState(!0),[p,f]=k.useState(!1);return u.useEffect(()=>{const r={aiUserId:parseInt(sessionStorage.getItem("Id")),aiSchoolId:parseInt(localStorage.getItem("localSchoolId")),aiAcademicYearId:parseInt(sessionStorage.getItem("AcademicYearId")),aiTypeId:parseInt(o)};a(w(r))},[o,p]),e.jsxs(D,{sx:{px:2},children:[e.jsx(R,{FromRoute:"/Student/TransportDetails/"+s}),e.jsx(L,{heading:s,subheading:""}),e.jsx(g,{onClick:()=>{f(!p)},sx:{height:40,width:40,color:"black",float:"right",mt:"-50px"},children:e.jsx(B,{fontSize:"small"})}),i.ShowStops?e.jsxs(e.Fragment,{children:[l==null?void 0:l.map((r,S)=>(n?r.IsMyStop:!0)&&e.jsx(F,{item:r.StopDetail,selected:n?!1:r.IsMyStop},S)),e.jsxs(t,{container:!0,spacing:2,sx:{mb:"10px"},children:[e.jsx(t,{item:!0,xs:6,children:e.jsx(m,{fullWidth:!0,color:n?"primary":"warning",onClick:()=>{d(!1)},children:"Show All Stops"})}),e.jsx(t,{item:!0,xs:6,children:e.jsx(m,{fullWidth:!0,color:n?"warning":"primary",onClick:()=>{d(!0)},children:"Show My Stop"})})]})]}):null,i.TrackingURL!==""?e.jsxs(e.Fragment,{children:[e.jsxs(t,{container:!0,children:[e.jsx(t,{item:!0,xs:11}),e.jsx(t,{item:!0,xs:1})]}),j?e.jsx(b,{}):i.TrackingMessage==""?e.jsx(e.Fragment,{children:e.jsx("iframe",{allowFullScreen:!0,style:{border:"none"},width:"100%",height:"580px",title:"Vehicle Tracking",src:i.TrackingURL,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",children:" "})}):e.jsx(M,{NoteDetail:[i.TrackingMessage]})]}):null]})}export{H as default};
