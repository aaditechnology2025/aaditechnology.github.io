import{u as B,c as n,r as a,dH as y,t as D,dI as M,j as e,B as o,a0 as A,a1 as R,bd as H,T as g,a3 as w,l as F,bH as T,o as G,a5 as L,G as h,a6 as p,ap as W,J as Y,dJ as J}from"./index-CpZD2H93.js";import{E as P}from"./Errormessage-DVJGTehf.js";import{B as z}from"./BackButton-D8aQMrwN.js";import{H as N}from"./Hidden-BOlgbOvj.js";import{C as q}from"./Card-B0aZ7mGs.js";const _=({open:f,setOpen:r})=>{const l=B(),t=n(s=>s.MessageCenter.EmailSettings),d=n(s=>s.MessageCenter.UpdationMessage),C=n(s=>s.MessageCenter.Loading),[i,c]=a.useState(""),[m,b]=a.useState(!1),[j,x]=a.useState(!0),[S,E]=a.useState(!1);a.useState(!1);const I={asSchoolId:localStorage.getItem("localSchoolId"),asUserId:sessionStorage.getItem("Id")},k={asSchoolId:localStorage.getItem("localSchoolId"),asUserId:sessionStorage.getItem("Id"),asCanReceiveMail:S?"Y":"N",asEmailAddress:i};a.useEffect(()=>{l(y(I))},[]),a.useEffect(()=>{c(t==null?void 0:t.EmailAddress),E((t==null?void 0:t.CanReceiveMail)==="Y")},[t]),a.useEffect(()=>{d!==""&&(D.success("Email setting saved successfully."),r(!1),l(M()))},[d,l,r]);const v=()=>{if(i===""){b(!0);return}m||l(J(k))},U=s=>{s.target.checked&&x(!1),s.target.checked||x(!0)},u=()=>{r(!1)};return e.jsx(o,{children:e.jsxs(A,{open:f,onClose:()=>r(!1),fullWidth:!0,maxWidth:"sm",PaperProps:{sx:{borderRadius:"15px"}},children:[e.jsx(R,{sx:{bgcolor:"#223354"},children:e.jsx(H,{onClick:u,sx:{color:"white",borderRadius:"7px",position:"absolute",top:"5px",right:"8px",cursor:"pointer","&:hover":{color:"red"}}})}),e.jsx(g,{variant:"h3",sx:{pt:1,pl:4},children:"Email Setting"}),e.jsx(w,{children:e.jsxs(o,{sx:{px:2},children:[e.jsx(N,{smUp:!0,children:e.jsx(z,{FromRoute:"/MessageCenter/msgCenter"})}),C&&e.jsx(F,{}),e.jsxs(q,{component:o,sx:{display:"flex"},mb:2,children:[e.jsx(T,{size:"small",name:"IsChecked",onChange:s=>U(s)}),e.jsx(g,{variant:"body2",component:o,p:2,children:"Yes, I want to receive messages on the below email address."})]}),e.jsx(G,{fullWidth:!0,variant:"outlined",label:e.jsx("span",{children:"Email Id"}),value:i,onChange:s=>c(s.target.value)}),m?e.jsx(o,{sx:{my:1},children:e.jsx(P,{Error:"Email should not be blank."})}):null]})}),e.jsx(L,{children:e.jsx(h,{item:!0,xs:12,md:12,children:e.jsxs(h,{direction:"row",gap:2,alignItems:"center",sx:{ml:43,pb:2},children:[e.jsx(p,{sx:{ml:2,color:"red",":hover":{backgroundColor:W[100]}},onClick:u,children:"Cancel"}),e.jsx(p,{sx:{color:"green",":hover":{backgroundColor:Y[100]}},onClick:v,disabled:j,children:"Save"})]})})})]})})};export{_ as default};
