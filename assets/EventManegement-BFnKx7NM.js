import{u as De,A as Ie,q as fe,v as k,r as s,z as je,c as r,cW as be,cP as Ce,cO as Ae,i5 as ke,t as q,cQ as ye,i6 as Le,cY as K,cV as Te,j as e,B as Q,C as Ne,E as y,I as L,F as T,H as Pe,J as E,au as Be,K as Fe,G as n,T as x,D as we,o as m,c7 as Me,bH as Re,n as Ue,a6 as X,ap as Ge,cT as We,ay as He}from"./index-CpZD2H93.js";import{S as ze}from"./SingleFile-VnBjWcb-.js";import{T as Oe}from"./TabularList-BrAkDd2h.js";import{S as Ye}from"./SelectListHierarchy-B0--0w-H.js";import"./CloudUpload-C2WsbpCZ.js";import"./Errormessage-DVJGTehf.js";const Ze=()=>{const a=De(),Z=Ie();let{Id:i,Event_Id:N,Name:P}=fe();i=k(i),N=k(N),P=k(P);const ee=["PDF","JPG","PNG","BMP","JPEG"],te=3e6;s.useState("");const[S,g]=s.useState(""),[B,F]=s.useState(""),[p,D]=s.useState(""),[w,M]=s.useState(""),[I,f]=s.useState(""),[R,U]=s.useState(""),[u,G]=s.useState(""),[se,W]=s.useState("");s.useState([]);const[H,ne]=s.useState("");s.useState("");const[j,z]=s.useState(""),[O,Y]=s.useState("");s.useState("");const{showAlert:ae,closeAlert:_}=s.useContext(je),[b,C]=s.useState([]),[_e,re]=s.useState("");s.useState(0);const[J,V]=s.useState(!1),o=Number(localStorage.getItem("localSchoolId")),v=Number(sessionStorage.getItem("AcademicYearId"));Number(sessionStorage.getItem("StandardDivisionId")),sessionStorage.getItem("StandardId"),sessionStorage.getItem("DivisionId");const h=Number(sessionStorage.getItem("TeacherId")),oe=r(t=>t.EventsManagement.EventListt),l=r(t=>t.EventsManagement.EventDetailss),$=r(t=>t.EventsManagement.AllClassesAndDivisionss),ie=r(t=>t.EventsManagement.AllClassesAndDivisionss1);r(t=>t.EventsManagement.SelectedStandardAndDivisionCheckBoxx);const d=r(t=>t.EventsManagement.SaveUpdateEventt),A=r(t=>t.EventsManagement.DeleteEventt);r(t=>t.EventsManagement.DeleteEventImagee),s.useEffect(()=>{a(be({asEventDate:"2024-02-07",asSchoolId:18,asAcademicYearId:54,asStandardId:1059,asDivisionId:1288}))},[]),s.useEffect(()=>{const t={asSchoolId:o,asAcademicYearId:v,asEventId:Number(i)};a(Ce(t))},[]),s.useEffect(()=>{l!==null&&(g(l.EventTitle),f(l.EventDescription),D(l.EventStartDate),V(l.showRiseAndShine))},[l]),s.useEffect(()=>{C($)},[$]),s.useEffect(()=>{a(Ae({asSchoolId:o,asAcademicYearId:v}))},[]),s.useEffect(()=>{const t={asSchoolId:o,asEventId:Number(i)};a(ke(t))},[]),s.useEffect(()=>{d!==""&&(q.success(d,{toastId:"success1"}),a(ye()))},[d]);const le={asSchoolId:o,asEventId:Number(i),asUserId:Number(h)};s.useEffect(()=>{A!==""&&(q.success(A,{toastId:"success1"}),a(Le()),a(K(le)))},[A]),s.useEffect(()=>{const t={asSchoolId:o,asAcademicYearId:v,asEventId:Number(i),asUserId:Number(h)};a(Te(t))},[]);const[Je,ce]=s.useState([]);s.useEffect(()=>{ce(d)},[d]);const de=()=>{let t="<StandardDivisions>";return Array.isArray(b)&&b.map(c=>{c.IsActive&&(t=t+' <Division StandardDivisionId="'+c.Id+'" />')}),t+="</StandardDivisions>",t},ue=t=>{S==""&&F("Title should not be blank."),I==""&&U("Description should not be blank."),p==""&&M("Start date should not be blank."),j==""&&Y("End date should not be blank."),u==""&&H==""&&W("Please Choose a file");const c={asEventName:S,asEventDescription:I,asEventStartDate:p,asEventEndDate:j,asDisplayOnHomepage:J,asEventImageName:u,asSchoolId:o,asAcademicYearId:v,asInsertedById:h.toString(),asUpdatedById:"754",asStandardDivisions:de(),asSaveFeature:"Event Planner",asFolderName:"PPSN Website",asBase64String:H,asEventId:0};a(We(c))},ve=()=>{g(""),f(""),D(""),z(""),G(""),C([])},he=t=>{G(t.Name),ne(t.Value)},Ee=()=>{ve(),W(""),F(""),U(""),M(""),Y(""),re("")},xe=t=>{Z("/RITeSchool/Teacher/EventManegement//"+He(t),{state:{fromInternal:!0}})},me=t=>{const c={asSchoolId:o,asEventId:Number(t),asUserId:Number(h)};ae({title:"Please Confirm",message:"Are You Sure you want to delete the List?  ",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{_()},onConfirm:()=>{a(K(c)),_()}})},Se=t=>{C(t)},ge=t=>{V(t)},pe=localStorage.getItem("SiteURL")+"/RITeSchool//DOWNLOADS/Event Planner/"+u;return e.jsx(e.Fragment,{children:e.jsxs(Q,{sx:{px:2},children:[e.jsx(Ne,{navLinks:[{title:"Annual Planner",path:"/RITeSchool/Common/AnnualPlanner"},{title:"Event(s) Management",path:""}],rightActions:e.jsxs(e.Fragment,{children:[e.jsx(y,{title:"Add or Update Events",children:e.jsx(L,{sx:{color:"white",backgroundColor:T[500],height:"36px !important",":hover":{backgroundColor:T[600]}},children:e.jsx(Pe,{})})}),e.jsx(y,{title:"Add new Event",children:e.jsx(L,{sx:{color:"white",backgroundColor:T[500],height:"36px !important",":hover":{backgroundColor:E[600]}},children:e.jsx(Be,{})})}),e.jsx(y,{title:"Save Event",children:e.jsx(L,{sx:{color:"white",backgroundColor:E[600],height:"36px !important",":hover":{backgroundColor:E[600]}},children:e.jsx(Fe,{})})})]})}),e.jsxs(Q,{sx:{background:"white",p:2},children:[e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(x,{variant:"h4",children:"Event(s) as of today."})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(Oe,{ItemList:oe,clickEdit:xe,clickDelete:me})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(we,{})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(x,{variant:"h4",children:"Add a new Event."})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(m,{label:e.jsxs("span",{children:["Title ",e.jsx("span",{style:{color:"red"},children:"*"})]}),multiline:!0,rows:1,value:S,onChange:t=>{g(t.target.value)},error:B!=="",helperText:B,fullWidth:!0,sx:{resize:"both"}})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(m,{label:e.jsxs("span",{children:["Description ",e.jsx("span",{style:{color:"red"},children:"*"})]}),multiline:!0,rows:1,value:I,onChange:t=>{f(t.target.value)},error:R!=="",helperText:R,fullWidth:!0,sx:{resize:"both"}})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(m,{label:e.jsxs("span",{children:["Start Date ",e.jsx("span",{style:{color:"red"},children:"*"})]}),inputProps:{type:"date"},InputLabelProps:{shrink:!0},value:p,onChange:t=>{D(t.target.value)},error:w!=="",helperText:w,fullWidth:!0})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(m,{label:e.jsxs("span",{children:["End Date ",e.jsx("span",{style:{color:"red"},children:"*"})]}),inputProps:{type:"date"},InputLabelProps:{shrink:!0},value:j,onChange:t=>{z(t.target.value)},error:O!=="",helperText:O,fullWidth:!0})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(Ye,{ItemList:b,ParentList:ie,ClickChild:Se})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(x,{children:e.jsx(Me,{control:e.jsx(Re,{checked:J,onChange:t=>{ge(t.target.checked)}}),label:"Display On Homepage"})})}),e.jsxs(n,{item:!0,xs:6,children:[e.jsx(x,{fontSize:"10px",children:"Attachment:"}),e.jsx(ze,{ValidFileTypes:ee,MaxfileSize:te,ChangeFile:he,errorMessage:se,FilePath:pe,FileName:u,viewIcon:!0,deleteIcon:!0})]})]}),e.jsxs(Ue,{spacing:2,direction:"row",justifyContent:"center",children:[e.jsxs(X,{onClick:Ee,children:["sx=",{color:"red",":hover":{backgroundColor:Ge[100]}},"Cancel"]}),e.jsx(X,{onClick:ue,sx:{color:"green",":hover":{backgroundColor:E[100]}},children:"Save"})]})]})]})})};export{Ze as default};
