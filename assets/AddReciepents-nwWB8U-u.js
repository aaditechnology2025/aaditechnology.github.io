import{P as q,ad as Is,j as e,a4 as Cs,o as he,u as ye,r as a,z as ts,c as S,db as $e,af as as,B as d,ag as os,ah as rs,ai as be,aj as X,ak as ns,I as pe,ap as ls,E as te,aq as cs,dc as es,dd as js,de as As,df as bs,dg as Ns,dh as ys,t as Qe,di as Us,dj as Ze,G as p,T as v,aH as ue,a7 as vs,c7 as ws,bH as Ke,bI as ss,dk as Gs,av as ks,a5 as Rs,a6 as qe,J as Es,dl as Ds,ae as is,bv as Ts,ab as Bs,b3 as Ms,F as Ne,aw as Ps,a0 as ds,a1 as us,bd as hs,a3 as ps,dm as Ys,A as Ls,dn as Ws,dp as Os,dq as Fs,dr as Vs,ds as _s,b1 as zs,bl as Hs}from"./index-CpZD2H93.js";import{d as $s}from"./GroupAdd-YcnFVjzY.js";import{d as Ks}from"./Square-CVQpjtQG.js";import{C as qs,L as Xe}from"./ListSelect-CwnzciXr.js";import{d as Xs}from"./ArrowCircleUp-C3u-oYJu.js";import{A as Qs}from"./ArrowCircleDown-7BHmj5tB.js";import{L as Js}from"./ListHeaderCard3ColSel-e-z25ypD.js";import{C as Zs}from"./CheckboxImg-BrcA302U.js";import{k as et}from"./CardStyle-CBuNm0_N.js";import{Q as xs}from"./QuestionMark-B_7MKkiz.js";Je.propTypes={onChange:q.func.isRequired,label:q.string,defaultValue:q.string,mandatory:q.bool,sx:q.object,size:q.string,DisableClearable:q.bool,disabled:q.bool};function Je({ItemList:r,onChange:i,label:b,defaultValue:x="",mandatory:f=!1,sx:I=null,size:g="medium",DisableClearable:C=!1,disabled:u=!1}){Is().pathname.replace("/RITeSchool/Student/","");const E=m=>{/[a-zA-Z0-9\s-]/.test(m.key)||["Backspace","ArrowLeft","ArrowRight","Tab","Delete"].includes(m.key)||m.preventDefault()};return e.jsx(Cs,{value:r.find(m=>m.Id===x)||null,onChange:(m,D)=>i(D?D.Id:""),options:r,disableClearable:C,disabled:u,getOptionLabel:m=>m.Name,isOptionEqualToValue:(m,D)=>m.Id===D.Id,renderInput:m=>e.jsx(he,{...m,size:g,sx:I||{minWidth:"350px",pl:"10px"},label:b?e.jsxs("span",{children:[b," ",f&&e.jsx("span",{style:{color:"red"},children:"*"})]}):"",onKeyDown:E})})}function st({GPID:r=0}){const i=ye(),{showAlert:b,closeAlert:x}=a.useContext(ts),f=localStorage.getItem("localSchoolId"),I=sessionStorage.getItem("AcademicYearId"),g=S(n=>n.ContactGroup.IGetUser),C={asSchool_Id:Number(f),asAcademicYearId:Number(I),asGroupId:r};a.useEffect(()=>{i($e(C))},[]);const u=n=>{const N={asSchoolId:Number(f),asAcademicYearId:Number(I),asGroupId:r,asUserId:n,asInsertedById:0};n&&b({title:"Please Confirm",message:"Are you sure you want to remove this user from selected group?",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{x()},onConfirm:()=>{i(es(N)),i($e(C)),x()}}),a.useEffect(()=>{i(es(N)),i($e(C))},[])};return e.jsx(as,{component:d,children:e.jsxs(os,{"aria-label":"simple table",sx:{border:n=>`1px solid ${n.palette.grey[300]}`,overflow:"hidden"},children:[e.jsx(rs,{children:e.jsxs(be,{sx:{background:n=>n.palette.secondary.main,color:n=>n.palette.common.white},children:[e.jsx(X,{sx:{background:n=>n.palette.secondary.main,color:"white",fontWeight:"bold",py:1.5},children:"User Name"}),e.jsx(X,{align:"center",sx:{background:n=>n.palette.secondary.main,color:"white",fontWeight:"bold",py:1},children:"Delete"})]})}),e.jsx(ns,{children:g.map(n=>e.jsxs(be,{children:[e.jsx(X,{sx:{py:.5},children:n.UserName}),e.jsx(X,{align:"center",sx:{py:1},children:e.jsx(pe,{onClick:()=>u(n.UserId),sx:{color:"#38548A	","&:hover":{color:"red",backgroundColor:ls[100]}},children:e.jsx(te,{title:"Delete",children:e.jsx(cs,{})})})})]},n.UserId))})]})})}const ms=({onClose:r,GPID:i=0,GPName:b=""})=>{const x=ye(),[f,I]=a.useState(10),[g,C]=a.useState(1),u=[10,20,30,40,50,60];a.useState(!1);const[n,N]=a.useState([]),[E,m]=a.useState([]),[D,_]=a.useState(!1),[T,j]=a.useState(null),[A,w]=a.useState("0"),[Y,ne]=a.useState("0"),[B,Q]=a.useState(b),[Ue,le]=a.useState(""),[ve,z]=a.useState(""),[xe,M]=a.useState(""),[L,ae]=a.useState(""),[oe,re]=a.useState(""),[W,ce]=a.useState(""),[U,J]=a.useState([]),P=sessionStorage.getItem("AcademicYearId"),R=localStorage.getItem("localSchoolId"),me=sessionStorage.getItem("RoleId"),fe=Number(localStorage.getItem("UserId")),[O,ge]=a.useState("asc"),[H,Z]=a.useState("Name"),we=S(t=>t.getuser1.GetUser);S(t=>t.ContactGroup.IContactGroups);const ie=S(t=>t.ContactGroup.IContactGroupUserRoles),F=S(t=>t.ContactGroup.IGetUserRole),$=S(t=>t.ContactGroup.IGetStandardClass),ee=S(t=>t.ContactGroup.IlistGetUserName),Se=S(t=>t.ContactGroup.IAddUpdateGroup),V=S(t=>t.ContactGroup.IUserCount);a.useEffect(()=>{i!==0&&N(typeof ie=="string"?ie.split(",").map(t=>t.trim()):[])},[ie]);const G=a.useMemo(()=>Array.isArray(V)?V.reduce((t,l)=>{const y=Number(l.TotalCount);return isNaN(y)?t:t+y},0):0,[V]),se={asSchoolId:Number(R),asAcademicYearId:Number(P),asGroupId:0,asRoleId:Number(A),asStandardDivisionId:Number(Y),asFilter:""};a.useEffect(()=>{x(js(se))},[A,Y]);const K={asSchoolId:R.toString(),asAcademicYearId:P,asGroupId:i.toString(),asUserRoleId:me,asUserId:fe.toString()};a.useEffect(()=>{x(As(K))},[]);const de={asSchoolId:Number(R),asAcademicYearId:Number(P),asGroupId:0,asUserRoleId:Number(me),asUserId:fe},Ge={asSchoolId:Number(R)};a.useEffect(()=>{x(bs(Ge))},[]),a.useEffect(()=>{F.length>0&&w(F[0].Id)},[F]);const ke={asSchoolId:Number(R),asAcademicYearId:Number(P)};a.useEffect(()=>{x(Ns(ke))},[R,P]),a.useEffect(()=>{$.length>0&&ne($[0].Id)},[$]);const Ie={asSchoolId:Number(R),asAcademicYearId:Number(P),asGroupId:0,asRoleId:Number(A),asStartIndex:(g-1)*f,asEndIndex:g*f,asSortDirection:O.toString(),asStandardDivisionId:Number(Y),asFilter:""};a.useEffect(()=>{x(ys(Ie))},[x,g,f,A,Y,O]),a.useEffect(()=>{U.join(",")},[U]),a.useEffect(()=>{Q(b)},[b]);const Re=t=>{w(t)},Ee=t=>{t!==Y&&(ne(t),j(Y))};function De(){let t=`<MailingGroup xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\r
  `;return t+=" <GroupId>"+i+`</GroupId>\r
  <Name>`+B+`</Name>\r
  <lstUserRoles>\r
`,n.forEach(l=>{t+=`    <UserRoles>\r
  <User_Role_Id>`+l+`</User_Role_Id>\r
    </UserRoles>\r
`}),t+=`  </lstUserRoles>\r
  <Users>`+E+`</Users>\r
  <IsDefault>false</IsDefault>\r
  <IsAllDeactivated>false</IsAllDeactivated>`,t+=`\r
</MailingGroup>`,t}const Te=async()=>{Q(""),m([]),N([]),_(!1),ae(""),M(""),le(""),z(""),re("")},Ce=async()=>{let t=!0;if(M(""),le(""),z(""),re(""),ae(""),B.trim()||(M("Group name should not be blank."),t=!1),i===0&&await Be(B)&&(re("Group Name already exists."),t=!1),n.length===0&&(le("At least one applicable role should be selected."),t=!1),i===0&&E.length===0&&(z("At least one user should be selected for the group."),t=!1),!t)return;const l={asSchoolId:Number(R),asAcademicYearId:Number(P),asMailingGroupXML:De()};x(Ds(l)),Q(""),m([]),N([]),_(!1),ae(""),M(""),le(""),z(""),re("")};a.useEffect(()=>{Se!==""&&(i===0?Qe.success("Group details added successfully."):Qe.success("Group details updated successfully."),x(Us()),x(Ze(de)))},[Se,r,B,n,E,i]);const Be=async t=>we.map(y=>y.Value).includes(t.trim()),Me=t=>{I(parseInt(t.target.value,10)),C(1)},Pe=t=>{C(t)},Ye=t=>{const l=t.target.checked;_(l),m(l?ee.map(y=>y.UserId):[])},Le=t=>{m(l=>l.includes(t)?l.filter(y=>y!==t):[...l,t]),_(!1)},We=t=>{N(l=>l.includes(t)?l.filter(y=>y!==t):[...l,t])},Oe=t=>{ce(t)},k=()=>{if(W==="")J(ee);else{const t=ee.filter(l=>{const y=l.UserName.toLowerCase().includes(W.toLowerCase()),_e=l.UserName.toLowerCase().includes(W.toLowerCase());return y||_e});J(t)}};a.useEffect(()=>{J(ee)},[ee]);const Fe=(g-1)*f+1,Ve=Math.min(g*f,G),je=Math.ceil(G/f),Ae=t=>{H===t?ge(O==="asc"?"desc":"asc"):(Z(t),ge("asc"))};return e.jsxs(e.Fragment,{children:[e.jsxs(d,{children:[e.jsx(p,{container:!0,spacing:2,children:e.jsx(p,{item:!0,xs:12,sm:4,children:e.jsx(he,{fullWidth:!0,label:e.jsxs("span",{children:["Group Name ",e.jsx("span",{style:{color:"red"},children:"*"})]}),multiline:!0,rows:1,value:B,onChange:t=>{const l=t.target.value;l.length<=50&&Q(l)}})})}),e.jsx(p,{sx:{marginTop:1},children:e.jsxs(v,{children:[e.jsx(ue,{Error:L}),e.jsx(ue,{Error:xe}),e.jsx(ue,{Error:Ue}),e.jsx(ue,{Error:ve}),e.jsx(ue,{Error:oe})]})}),e.jsxs(p,{item:!0,xs:12,children:[e.jsx(v,{pt:1,children:e.jsx("b",{children:"Applicable To "})}),e.jsx(vs,{component:"fieldset",children:e.jsx(p,{container:!0,direction:"row",alignItems:"center",spacing:2,children:F.map((t,l)=>e.jsx(p,{item:!0,children:e.jsx(ws,{control:e.jsx(Ke,{checked:n.includes(t.Id),onChange:()=>We(t.Id),defaultValue:n}),label:t.Name})},l))})})]})]}),i!==0&&e.jsx(st,{GPID:i}),e.jsxs(p,{container:!0,direction:"row",alignItems:"center",spacing:2,sx:{pt:1},children:[e.jsx(p,{item:!0,xs:12,sm:4,children:e.jsx(ss,{label:"User Role ",sx:{minWidth:"15vw"},ItemList:F,onChange:Re,defaultValue:A})}),A==="3"&&e.jsx(p,{xs:12,sm:4,children:e.jsx(ss,{label:"Class",sx:{minWidth:"15vw"},ItemList:$,onChange:Ee,defaultValue:Y})}),e.jsx(p,{item:!0,xs:12,sm:4,children:e.jsx(he,{fullWidth:!0,label:e.jsxs("span",{children:["Search By Name ",e.jsx("span",{style:{color:"red"},children:"*"})]}),rows:1,value:W,onChange:t=>{const l=t.target.value;l.length<=50&&Oe(l)},onKeyDown:t=>{(t.key==="Enter"||t.key==="Tab")&&k()}})}),e.jsx(p,{item:!0,xs:1.5,children:e.jsx(pe,{onClick:k,sx:{background:t=>t.palette.primary.main,color:"white","&:hover":{backgroundColor:t=>t.palette.primary.dark}},children:e.jsx(Gs,{})})})]}),e.jsx(d,{py:1,children:e.jsx(d,{sx:{display:"flex",justifyContent:"space-between",p:.5},children:e.jsx(d,{children:e.jsx(v,{variant:"h4",sx:{marginTop:1},children:"Select Users To Add In Selected Group"})})})}),e.jsx(d,{p:.5,children:U.length!==0?e.jsx(d,{style:{flex:1,textAlign:"center"},children:e.jsxs(v,{variant:"subtitle1",sx:{margin:" 0px",textAlign:"center"},children:[e.jsxs(d,{component:"span",fontWeight:"fontWeightBold",children:[Fe," to ",Ve]})," ","out of"," ",e.jsx(d,{component:"span",fontWeight:"fontWeightBold",children:G})," ",G===1?"record":"records"]})}):null}),U.length!==0?e.jsxs(d,{children:[e.jsx(as,{component:d,sx:{overflow:"auto"},children:e.jsxs(os,{"aria-label":"simple table",sx:{border:t=>`1px solid ${t.palette.grey[300]}`,overflow:"hidden"},children:[e.jsx(rs,{children:e.jsxs(be,{sx:{background:t=>t.palette.secondary.main,color:t=>t.palette.common.white},children:[e.jsx(X,{padding:"checkbox",sx:{py:0,color:"white"},children:e.jsx(Ke,{checked:D,onChange:Ye,size:"small"})}),e.jsx(X,{sx:{py:0,color:"white"},children:e.jsxs("b",{onClick:()=>Ae("Name"),style:{cursor:"pointer",display:"flex",alignItems:"center"},children:["User Name ",H==="Name"&&(O==="asc"?e.jsx(Xs,{}):e.jsx(Qs,{}))]})})]})}),e.jsx(ns,{children:U.map((t,l)=>e.jsxs(be,{children:[e.jsx(X,{padding:"checkbox",sx:{py:0},children:e.jsx(Ke,{checked:E.includes(t.UserId),onChange:()=>Le(t.UserId),size:"small"})}),e.jsx(X,{sx:{py:0},children:t.UserName})]},l))})]})}),G>9?e.jsx(ks,{ChangeRowsPerPage:Me,rowsPerPageOptions:u,rowsPerPage:f,PageChange:Pe,pagecount:je}):e.jsx("span",{})]}):e.jsx(d,{sx:{backgroundColor:"#D2FDFC"},children:e.jsx(v,{variant:"h6",align:"center",sx:{textAlign:"center",marginTop:1,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:"No record found."})}),e.jsx(d,{children:e.jsxs(Rs,{sx:{py:2,px:3},children:[e.jsx(qe,{color:"error",onClick:r,children:"Cancel"}),e.jsx(qe,{color:"error",onClick:Te,children:"Clear"}),e.jsx(qe,{onClick:Ce,sx:{color:"green","&:hover":{color:"green",backgroundColor:Es[100]}},children:i===0?"Add":"Update"})]})})]})},tt=({Item:r,onClick:i})=>{a.useState(!1);const[b,x]=a.useState(!1);a.useState([]);const{showAlert:f,closeAlert:I}=a.useContext(ts),g=ye(),C=localStorage.getItem("localSchoolId"),u=sessionStorage.getItem("Id"),n=sessionStorage.getItem("AcademicYearId"),N=sessionStorage.getItem("RoleId"),E=is("Message Center"),m=()=>{i({Id:r.Id,isActive:!r.isActive})};function D(j){const A={asSchoolId:Number(C),asGroupId:j,asInsertedById:0};if(!r.isActive){f({title:"Please Confirm",message:"Are you sure you want to remove this group?",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{I()},onConfirm:()=>{g(Ys(A)),I()}});const w={asSchoolId:Number(C),asAcademicYearId:Number(n),asGroupId:0,asUserRoleId:Number(N),asUserId:Number(u)};g(Ze(w))}}const _=j=>{x(!0)},T=()=>{x(!1)};return e.jsx(d,{children:e.jsx(Ts,{sx:{border:j=>`1px solid ${j.palette.grey[400]}`,py:.2},children:e.jsxs(d,{sx:{display:"flex"},children:[e.jsx(Zs,{name:r.Name,value:r.Value,checked:r.isActive,onChange:m,IsAllDeactivated:r.IsAllDeactivated,IsExamSubmitted:r.IsExamSubmitted}),e.jsxs(e.Fragment,{children:[e.jsx(p,{item:!0,container:!0,xs:12,children:e.jsx(te,{title:e.jsxs(Bs.Fragment,{children:[e.jsx(v,{variant:"h6",sx:{mb:1,color:"white"},children:r.Name}),e.jsx(v,{variant:"body1",sx:{color:"white"},children:r.Users})]}),placement:"right",disableFocusListener:!0,disableTouchListener:!0,PopperProps:{disablePortal:!0},componentsProps:{tooltip:{sx:{overflow:"hidden",whiteSpace:"normal",textOverflow:"ellipsis",maxHeight:"6.25rem",lineHeight:"1.25rem",display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",position:"relative"}}},children:e.jsx(et,{children:r.Name!==""?e.jsx(v,{sx:{width:"130px",overflow:"hidden",color:"#38548A	"},children:r.Name}):e.jsx(Ms,{alt:"user.name",src:localStorage.getItem("SiteURL")+"RITeSchool/Uploads/OnlineExamImages/"+r.path1,sx:{width:"180px",height:"160px",border:"2px solid gray",textAlign:"center"},variant:"square","aria-label":"add"})})})}),e.jsxs(p,{container:!0,children:[e.jsx(p,{item:!0,xs:4,children:E==="Y"&&e.jsx(pe,{sx:{ml:1,p:0,textAlign:"left",color:"#38548A	","&:hover":{color:"#38548A",p:0,backgroundColor:Ne[300]}},onClick:()=>_(),children:e.jsx(te,{title:"Edit",children:e.jsx(Ps,{sx:{p:0}})})})}),e.jsx(p,{item:!0,xs:4,children:E==="Y"&&e.jsx(pe,{onClick:()=>D(r.Id),sx:{ml:4.5,p:0,color:"#38548A	","&:hover":{color:"red",p:0,backgroundColor:ls[100]}},children:e.jsx(te,{title:"Delete",children:e.jsx(cs,{sx:{p:0}})})})}),e.jsxs(ds,{open:b,onClose:T,fullWidth:!0,maxWidth:"md",PaperProps:{sx:{borderRadius:"15px"}},children:[e.jsxs(us,{sx:{bgcolor:"#223354"},children:[e.jsx(te,{title:"Add / edit delete contact group(s).",placement:"bottom-end",children:e.jsx(xs,{sx:{color:"white",borderRadius:"10px",position:"absolute",top:"4px",right:"35px",cursor:"pointer","&:hover":{backgroundColor:Ne[600]}}})}),e.jsx(hs,{onClick:T,sx:{color:"white",borderRadius:"7px",position:"absolute",top:"5px",right:"8px",cursor:"pointer","&:hover":{color:"red"}}})]}),e.jsx(v,{variant:"h3",sx:{pt:2,pl:3},children:"Update Contact Group"}),e.jsx(ps,{children:e.jsx(d,{children:e.jsx(ms,{onClose:T,GPID:r.Id,GPName:r.Name})})})]})]})]})]})})})},at=({Itemlist:r,onChange:i,isSingleSelect:b=!1,ContactGP:x="0",ClickGroupRadio1:f})=>{const I=u=>{f(u),r=r.map(n=>n.Id===u.Id?{...n,isActive:u.isActive}:{...n,isActive:b?!1:n.isActive}),i(r)};let g=r.some(u=>u.isActive===!1)?r.some(u=>u.isActive===!0)?2:0:1;const C=u=>{r=r.map(n=>({...n,isActive:u})),i(r)};return e.jsxs(e.Fragment,{children:[e.jsx(Js,{Item:{text1:"",text2:"Select All",isActive:g,text3:x==="9"?"Edit":"",text4:x==="9"?"Delete":""},onChange:C}),r==null?void 0:r.map((u,n)=>e.jsx(e.Fragment,{children:x==="9"?e.jsx(tt,{Item:u,onClick:I},n):e.jsx(qs,{Item:u,onClick:I},n)}))]})},xt=({RecipientName:r,RecipientId:i,recipientListClick:b,contactGroupList:x,classIdList:f,IsConfirm:I,getGroupRadio:g,getGroupRadio1:C})=>{const u=ye();Ls();const[n,N]=a.useState(!1),[E,m]=a.useState(!1),[D,_]=a.useState(""),[T,j]=a.useState(r||[]),[A,w]=a.useState(i||[]),[Y,ne]=a.useState(f||[]),[B,Q]=a.useState(x||[]),[Ue,le]=a.useState(),[ve,z]=a.useState(),[xe,M]=a.useState([]),[L,ae]=a.useState(""),[oe,re]=a.useState("");a.useState("0");const[W,ce]=a.useState([]),[U,J]=a.useState(""),[P,R]=a.useState(!1),[me,fe]=a.useState(!0),[O,ge]=a.useState(""),H=sessionStorage.getItem("AcademicYearId"),Z=localStorage.getItem("localSchoolId"),we=sessionStorage.getItem("RoleId"),ie=sessionStorage.getItem("StandardDivisionId"),F=sessionStorage.getItem("Id"),$=is("Message Center"),[ee,Se]=a.useState([{Id:"Entire School",Name:"Entire School",Value:"Entire School",isActive:!1}]),V=S(s=>s.getGetAdminAndprincipalUsers.getGetAdminAndprincipalUsers),G=S(s=>s.getuser1.GetUser);S(s=>s.getuser1.Loading);const se=S(s=>s.getuser1.getClass);S(s=>s.getuser1.getStudent);const K=S(s=>s.getuser1.PTAOption),de=S(s=>s.ContactGroup.IDeleteMailGroupMsg);a.useEffect(()=>{de!==""&&(Qe.success(de),u(Ws()))},[de]);const Ge={asAcademicYearId:H,asSchoolId:Z},ke={asStdDivId:L,asAcadmeicYearId:H,asSchoolId:Z},Ie=oe||"0",Re={asAcademicYearId:H,asSchoolId:Z,asStdDivId:P?Ie:ie,asUserId:F,asSelectedUserGroup:U,asName:O,abIsSMSCenter:!!location.pathname.includes("ComposeSMS"),IsForLeftStudents:P},Ee={asSchoolId:Z,asUserId:F,asAcademicYearId:H},De={asSchoolId:Number(Z),asAcademicYearId:Number(H),asGroupId:0,asUserRoleId:$==="Y"?0:Number(we),asUserId:Number(F)};a.useEffect(()=>{u(Os(Ee))},[]);const Te=s=>{fe(!0);const o=T.filter(h=>h!==s),c=A.filter((h,Ss)=>T[Ss]!==s);j(o),w(c)};a.useEffect(()=>{const s=sessionStorage.getItem("SchoolId");sessionStorage.getItem("RoleId");const o=location.pathname.includes("ComposeSMS"),c=!o;let h=[];sessionStorage.getItem("RoleId")==="3"?(h=[{Id:"2",Name:"Teacher",isActive:!1},{Id:"6",Name:"Admin Staff",isActive:!1},{Id:"9",Name:"Contact group",isActive:!1}],(K.ShowPTAOption||o||c&&s==="122")&&sessionStorage.getItem("RoleId")!=="2"&&h.push({Id:"11",Name:"PTA",isActive:!1}),K.HideStudentOption||h.push({Id:"3",Name:"Student",isActive:!1})):sessionStorage.getItem("RoleId")==="2"?(h=[{Id:"2",Name:"Teacher",isActive:!1},{Id:"6",Name:"Admin Staff",isActive:!1},{Id:"9",Name:"Contact group",isActive:!1}],(K.ShowPTAOption||o||c&&s==="122")&&!(c&&s!=="122")&&h.push({Id:"11",Name:"PTA",isActive:!1}),K.HideStudentOption||h.push({Id:"3",Name:"Student",isActive:!1})):(h=[{Id:"2",Name:"Teacher",isActive:!1},{Id:"3",Name:"Student",isActive:!1},{Id:"7",Name:"Other Staff",isActive:!1},{Id:"6",Name:"Admin Staff",isActive:!1},{Id:"9",Name:"Contact group",isActive:!1}],(K.ShowPTAOption||c&&s==="122"||o)&&h.push({Id:"11",Name:"PTA",isActive:!1})),o&&s=="122"&&h.push({Id:"3",Name:"Student",isActive:!1}),o&&(h.push({Id:"12",Name:"Left Students",isActive:!1}),h.push({Id:"7",Name:"Other Staff",isActive:!1})),ce(h),j(r),w(i),Ce(i)},[K]),a.useEffect(()=>{u(Fs(ke))},[L]),a.useEffect(()=>{u(Vs(Ge))},[Ue]),a.useEffect(()=>{z(V==null?void 0:V.map(s=>({...s,isActive:!!i.includes(s.Id)})))},[V]),a.useEffect(()=>{U=="9"?u(Ze(De)):u(_s(Re))},[U,oe,Ie]),a.useEffect(()=>{Ce(A)},[G]);const Ce=s=>{M(G==null?void 0:G.map(o=>({...o,isActive:!!(k("Contact group")?B.includes(o.Id):s.includes(o.Id)||Be())})))},Be=()=>{let s=se.filter(o=>o.Id===Number(L)).map(o=>o.Name);return T.includes(s[0])},Me=s=>{ae(s)},Pe=s=>{re(s)},Ye=s=>{Se(s),j([]),w([]),z(V),ce(W.map(o=>({...o,isActive:!1}))),J(""),l(s)},Le=()=>{M(O===""?G:G.filter(s=>s.Name.toLowerCase().includes(O.toLowerCase())))},We=s=>{ge(s)},Oe=s=>{M([]),ae(""),J(""),s==null||s.map((o,c)=>{o.isActive&&J(o.Id)}),ce(s)},k=s=>{let o=!1;return W.map(c=>{c.Name===s&&c.isActive&&(o=!0)}),o},Fe=()=>{let s=!1;return W.map(o=>{o.isActive&&(s=!0)}),s},Ve=s=>{M(s),k("Student")?s.some(o=>o.isActive===!1)?(ne([]),j(o=>o.filter(c=>c!==je[0])),w(o=>o.filter(c=>c!==Ae[0])),l(s)):(y(s),ne(o=>[...o,Ae[0]]),j(o=>[...o,je[0]])):l(s)},je=se.filter(s=>s.Id==L).map(s=>s.Name),Ae=se.filter(s=>s.Id==L).map(s=>s.Id),t=s=>{z(s),l(s)},l=s=>{s==null||s.map(o=>{o.isActive&&(!k("Contact group")&&!A.includes(o.Id)||k("Contact group")&&!B.includes(o.Id))?(j(c=>[...c,o.Value]),k("Contact group")?Q(c=>[...c,o.Id]):w(c=>[...c,o.Id])):!o.isActive&&(!k("Contact group")&&A.includes(o.Id)||k("Contact group")&&B.includes(o.Id))&&(j(c=>c.filter(h=>h!==o.Value)),k("Contact group")?Q(c=>c.filter(h=>h!==o.Id)):w(c=>c.filter(h=>h!==o.Id)))})},y=s=>{s==null||s.map(o=>{A.findIndex(c=>c===o.Id),w(c=>c.filter(h=>h!==o.Id)),j(c=>c.filter(h=>h!==o.Value))})};a.useEffect(()=>{I!=""&&_e()},[I]);const _e=()=>{b({RecipientName:T,RecipientId:A,ClassId:Y,ContactGroup:B})},ze=()=>{N(!1)},fs=s=>{_(""),m(s),N(!0)},He=s=>{const o=s.isActive;g(s.Id),s.Id==12?R(o):R(!1)},gs=s=>{C(s.isActive)};return e.jsxs(e.Fragment,{children:[e.jsxs(d,{children:[e.jsx(p,{container:!0,children:e.jsx(p,{item:!0,xs:12,sm:11.5,children:e.jsx(he,{fullWidth:!0,placeholder:"Selected Recipient",margin:"normal",InputProps:{startAdornment:e.jsx(d,{sx:{display:"flex",flexWrap:"wrap",overflowY:"scroll",minWidth:"100%",height:"115px"},children:T.map((s,o)=>e.jsx(zs,{label:s==null?void 0:s.trim(),onDelete:()=>Te(s),sx:{my:.3,mx:.3}},o))}),readOnly:!0},value:""})})}),e.jsx(p,{xs:12,sm:12,item:!0,children:e.jsx(he,{sx:{width:"28.5vw",my:1,ml:51},fullWidth:!0,label:"Search By Name",value:O,variant:"outlined",size:"small",onChange:s=>{We(s.target.value)},onKeyDown:s=>{(s.key==="Enter"||s.key==="Tab")&&Le()}})}),e.jsx(e.Fragment,{children:me===!0?e.jsx(e.Fragment,{children:e.jsxs(p,{container:!0,spacing:2,children:[e.jsx(p,{item:!0,xs:12,sm:6,mt:-5,children:e.jsxs(p,{container:!0,spacing:1,children:[e.jsx(p,{item:!0,xs:6,sm:12,children:e.jsx(d,{children:e.jsx(Xe,{ClickGroupRadio:He,Itemlist:ve,onChange:t})})}),e.jsx(p,{item:!0,xs:6,sm:12,children:e.jsx(d,{children:e.jsx(Xe,{ClickGroupRadio:He,Itemlist:W,onChange:Oe,isSingleSelect:!0})})}),$==="Y"&&e.jsx(p,{item:!0,xs:6,sm:12,children:e.jsx(d,{sx:{borderColor:"grey.300"},children:e.jsx(Xe,{ClickGroupRadio:He,Itemlist:ee,onChange:Ye})})})]})}),e.jsxs(p,{item:!0,xs:12,sm:6,children:[U==="3"&&e.jsx(Je,{sx:{minWidth:"300px"},ItemList:se,onChange:Me,label:"Select Class",defaultValue:L,size:"small"}),U==="12"&&e.jsx(Je,{sx:{minWidth:"300px",mb:1},ItemList:se,onChange:Pe,label:"Select Class",defaultValue:oe,size:"small"}),U==="9"&&e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",p:.5},children:[e.jsx(d,{sx:{background:"white",pt:1},children:e.jsxs(d,{sx:{display:"flex",gap:"20px",alignItems:"center"},children:[e.jsx(v,{variant:"h4",sx:{mb:0,lineHeight:"normal",alignSelf:"center",paddingBottom:"2px"},children:"Legend"}),e.jsx(d,{sx:{display:"flex",gap:"20px"},children:e.jsxs(d,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(Ks,{style:{color:"grey",fontSize:25,position:"relative",top:"-2px"}}),e.jsx(v,{children:"Deactivated User"})]})})]})}),e.jsx(d,{children:$==="Y"&&e.jsx(te,{title:"Add New Group",children:e.jsx(pe,{sx:{color:"#38548A",backgroundColor:Ne[100],"&:hover":{color:"#38548A",backgroundColor:Hs[100]}},onClick:()=>fs(!0),children:e.jsx($s,{})})})})]}),xe.length===0?(k("Student")||Fe())&&L!==""&&e.jsx(v,{variant:"h6",align:"center",color:"blue",sx:{textAlign:"center",marginTop:1,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:"No record found."}):e.jsx(at,{Itemlist:xe,onChange:Ve,ContactGP:U,ClickGroupRadio1:gs})]})]})}):null})]}),e.jsxs(ds,{open:n,onClose:ze,fullWidth:!0,maxWidth:"md",PaperProps:{sx:{borderRadius:"15px"}},children:[e.jsxs(us,{sx:{bgcolor:"#223354"},children:[e.jsx(te,{title:"Add / edit delete contact group(s).",placement:"bottom-end",children:e.jsx(xs,{sx:{color:"white",borderRadius:"10px",position:"absolute",top:"4px",right:"35px",cursor:"pointer","&:hover":{backgroundColor:Ne[600]}}})}),e.jsx(hs,{onClick:ze,sx:{color:"white",borderRadius:"7px",position:"absolute",top:"5px",right:"8px",cursor:"pointer","&:hover":{color:"red"}}})]}),e.jsx(v,{variant:"h3",sx:{pt:2,pl:3},children:"Add Contact Group"}),e.jsx(ps,{children:e.jsx(d,{children:e.jsx(ms,{onClose:ze,GPID:0,GPName:""})})})]})]})};export{xt as A};
