import{h as j,S as w,u as A,c as i,r as s,i as F,k as L,j as o,B as d,l as B}from"./index-CpZD2H93.js";import{B as k}from"./BackButton-D8aQMrwN.js";import{L as v}from"./List1-CVRAXJd-.js";import{S as y}from"./SchoolNoticeHeader-C-nuke4I.js";import"./Attachment-BXtOqCtF.js";import"./ChevronRightTwoTone-CAnY7-jl.js";import"./HomeTwoTone-BpJsp3JX.js";function H(){j(),w();const l=A(),m=i(t=>t.Schoolnotice.SchoolNoticeData),c=i(t=>t.SchoolNoticeBoard.AllActiveNotices),n=localStorage.getItem("localSchoolId"),r=sessionStorage.getItem("Id"),h=i(t=>t.Schoolnotice.Loading),u={asSchoolId:n,asNoticeId:0,asUserId:r},I={asSchoolId:n,asUserId:r};s.useEffect(()=>{sessionStorage.getItem("Id")!==null&&localStorage.setItem("url",window.location.pathname),l(F(u))},[]);const[S,E]=s.useState("");s.useEffect(()=>{l(L(I))},[]),c.filter((t,e)=>S==t.id?t.FileName:"");const g=m.map((t,e)=>{const a=t.Date,x=new Date(a).getDate(),N=new Date(a).toLocaleString("default",{month:"short"}),f=new Date(a).getFullYear(),D=`${x} ${N} ${f}`;return{id:e,header:t.Name,text1:D,text2:"",linkPath:"/Common/Viewschoolnotice/"+t.Id,FileName:t.FileName}}),[T,p]=s.useState([]);return s.useEffect(()=>{let t=[];localStorage.getItem("ImportantNotices")!==null&&(t=localStorage.getItem("ImportantNotices").split(",")),p(c.filter(e=>!t.includes(e.Id)).map((e,a)=>({id:e.Id,header:e.Name,text2:"",linkPath:"/Common/Viewschoolnotice/"+e.Id,FileName:e.FileName,IsText:e.IsText,IsImageNotice:e.IsImageNotice,isActive:!1})))},[c]),o.jsxs(d,{sx:{px:4},children:[o.jsx(y,{navLinks:[{title:"School Notice",path:""}]}),o.jsxs(d,{sx:{background:"white",py:2},children:[sessionStorage.getItem("Id")===null&&o.jsx(k,{FromRoute:"/schoolList"}),h?o.jsx(B,{}):o.jsx(o.Fragment,{children:o.jsx(v,{items:g})})]})]})}export{H as default};
