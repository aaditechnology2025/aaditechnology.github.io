import{P as i,r as n,h as Y,S as _,q as H,v as O,c as R,by as U,j as e,bV as q,G as a,b3 as V,u as z,bW as E,B as C,C as J,E as K,I as Q,F as T,H as X,T as c}from"./index-CpZD2H93.js";import{M as Z}from"./MonthSelector-CPfriGlj.js";import{h as o}from"./moment-CaEEsv53.js";import{L as ee,C as u,e as F}from"./CardStyle-CBuNm0_N.js";import{D as te,a as W}from"./DotLegendStyled-CQchpEqY.js";import"./ArrowRight-CUT45HBv.js";import"./Card-B0aZ7mGs.js";$.propTypes={Name:i.string,BirthDate:i.string,list:i.string,setAssignedMonth:i.string,SetassignedMonth_num:i.string,setCurrentDate:i.string,BinaryPhotoImage:i.string};function $({Name:l,BirthDate:D,Designation:I,EmailAddress:k,MobileNumber:d,BinaryPhotoImage:L,IsHighlight:f}){const[h,N]=n.useState(!0),p=Y();_();let{assignedDate:x}=H();x=O(x);const[y,P]=n.useState([]);R(r=>r.staffBirthday.staffBirthdayData).map((r,G)=>{y.push(r.BirthDate)});const v=o(new Date).format("DD MMM "),b=new Date,M=new Date(v);o(new Date(M)).format("DD "),new Date(b).toLocaleString("default",{month:"short"}),new Date(b).toLocaleString("default",{month:"short"});const m=o(new Date).format("DD MMM"),t=new Date(m).getTime(),s=1e3*60*60*24,S=t+s,w=new Date(S);o(new Date(w)).format("DD"),new Date(w).toLocaleString("default",{month:"short"});const g=y,A=m;let B;return g.map(r=>{o(r).diff(o(A),"days")>0&&(B?o(r).diff(o(B),"days")<2&&(B=r):B=r)}),U({root:{background:"#e9a69a"},roo1:{background:`${p.colors.gradients.pink1}`}})(),e.jsx(e.Fragment,{children:e.jsx(q,{in:h,style:{transformOrigin:"0 0 1"},...h?{timeout:1500}:{},children:e.jsx(ee,{sx:{background:f==1?"#EFDCC9":f==2?"#d3d3d3":`${p.colors.gradients.pink1}`},children:e.jsxs(a,{container:!0,children:[e.jsxs(a,{item:!0,xs:3,sx:{display:"flex",alignItems:"center"},children:[e.jsx(V,{alt:l,src:`data:image/png;base64,${L}`,sx:{marginRight:1}}),e.jsx(u,{children:l})]}),e.jsx(a,{item:!0,xs:1.5,sx:{display:"flex",alignItems:"center"},children:e.jsx(u,{children:D})}),e.jsx(a,{item:!0,xs:2,sx:{display:"flex",alignItems:"center"},children:e.jsx(u,{children:I})}),e.jsx(a,{item:!0,xs:4,sx:{display:"flex",alignItems:"center"},children:e.jsx(u,{children:k})}),e.jsx(a,{item:!0,xs:1.5,sx:{display:"flex",alignItems:"center"},children:e.jsx(u,{children:d})})]})})})})}function de(){const l=z();Y();const D=R(t=>t.Dashboard.staffBirthdayData),I=sessionStorage.getItem("AcademicYearId"),k=localStorage.getItem("localSchoolId"),[d,L]=n.useState({selectedDate:""}),[f,h]=n.useState(),[N,p]=n.useState(),[x,y]=n.useState(),P=new Date().getMonth()+1;function j(t){const s=t||new Date,S=new Date(s).toLocaleString("default",{month:"long"}),w=new Date(s).getMonth(),g=new Date(s).getFullYear();h(g);const A=`${S}-${g}`;L({selectedDate:A}),h(g),p(S),y(w+1)}n.useEffect(()=>{j()},[]);const v=()=>{const{selectedDate:t}=d,s=new Date(t);s.setMonth(s.getMonth()-1),j(s)},b=()=>{const{selectedDate:t}=d,s=new Date(t);s.setMonth(s.getMonth()+1),j(s)},M={asMonth:x,asAcademicyearId:I,asSchoolId:k,year:f};n.useEffect(()=>{l(E(M))},[N]),n.useEffect(()=>{l(E(M))},[]);const m=_();return e.jsxs(C,{sx:{px:2},children:[e.jsx(J,{navLinks:[{title:"Staff Birthdays",path:" "}],rightActions:e.jsx(C,{children:e.jsx(K,{title:"List of the school staff birthdays.",children:e.jsx(Q,{sx:{color:"white",backgroundColor:T[500],height:"36px !important",":hover":{backgroundColor:T[600]}},children:e.jsx(X,{})})})})}),x==P&&e.jsxs(te,{children:[e.jsx(W,{className:m.border,style:{background:"#e9a69a"}}),e.jsx(F,{children:"Upcoming Birthday"}),e.jsx(W,{className:m.border,style:{background:"#C0C0C0",marginLeft:"10px"}}),e.jsx(F,{children:"Past Birthday"})]}),e.jsx("br",{}),e.jsx(Z,{date:d.selectedDate,PrevDate:v,NextDate:b,Close:void 0}),D.length===0?e.jsx(C,{sx:{backgroundColor:"#D2FDFC"},children:e.jsx(c,{variant:"h6",align:"center",color:"blue",sx:{textAlign:"center",marginTop:1,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:"No birthdays are available."})}):e.jsxs(e.Fragment,{children:[e.jsx(C,{sx:{background:t=>t.palette.secondary.main,p:1.5,borderRadius:"7px",mb:1},children:e.jsxs(a,{container:!0,children:[e.jsx(a,{item:!0,xs:3,children:e.jsx(c,{sx:{color:t=>t.palette.common.white,fontWeight:"bold",ml:10},variant:"subtitle2",children:"Name"})}),e.jsx(a,{item:!0,xs:1.5,children:e.jsx(c,{sx:{color:t=>t.palette.common.white,fontWeight:"bold"},variant:"subtitle2",children:"DOB"})}),e.jsx(a,{item:!0,xs:2,children:e.jsx(c,{sx:{color:t=>t.palette.common.white,fontWeight:"bold"},variant:"subtitle2",children:"Designation"})}),e.jsx(a,{item:!0,xs:4,children:e.jsx(c,{sx:{color:t=>t.palette.common.white,fontWeight:"bold"},variant:"subtitle2",children:"Email Address"})}),e.jsx(a,{item:!0,xs:1.5,children:e.jsx(c,{sx:{color:t=>t.palette.common.white,fontWeight:"bold"},variant:"subtitle2",children:"Mobile Number"})})]})}),D.map((t,s)=>e.jsx($,{Name:t.Name,BirthDate:t.BirthDate,Designation:t.Designation,EmailAddress:t.EmailAddress,MobileNumber:t.MobileNumber,BinaryPhotoImage:t.BinaryPhotoImage,IsHighlight:t.IsHighlight},s))]})]})}export{de as default};
