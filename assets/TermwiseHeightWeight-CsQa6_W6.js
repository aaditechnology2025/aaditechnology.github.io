import{j as e,af as X,B as b,ag as $,ah as K,ai as W,aj as m,ak as G,T as j,o as D,u as J,A as q,q as Q,v as Z,r as o,c as T,ar as ee,S as te,hK as se,hL as ae,hM as L,hN as re,t as ne,hO as oe,C as ie,n as k,G as y,bI as F,E as H,I as v,F as E,H as le,J as z,K as de,hP as ce}from"./index-CpZD2H93.js";import{d as he}from"./PriorityHigh-GKb8m_z9.js";import{D as xe,a as ge}from"./DotLegendStyled-CQchpEqY.js";const ue=({ItemList:n,onTextChange:p,onTextChange2:l,HeaderArray:f,IsPublishedStatus:c})=>{const g=t=>{n=n.map(a=>a.Id===t.Id?{...a,Text3:t.Value}:a),l(n)},h=t=>{n=n.map(a=>a.Id===t.Id?{...a,Text4:t.Value}:a),l(n)},x=(t,a)=>{if(c=="0"){const r=t.target.value.replace(/[^0-9.]/g,""),i=r.split(".");if(i[0].length>3||i[1]&&i[1].length>2)return;g({Value:r,Id:a.Text1})}},w=(t,a)=>{if(c=="0"){const r=t.target.value.replace(/[^0-9.]/g,""),i=r.split(".");if(i[0].length>3||i[1]&&i[1].length>2)return;h({Value:r,Id:a.Text1})}};return e.jsx(e.Fragment,{children:e.jsx(X,{component:b,sx:{border:t=>`1px solid ${t.palette.grey[300]}`},children:e.jsxs($,{"aria-label":"simple table",children:[e.jsx(K,{children:e.jsx(W,{sx:{background:t=>t.palette.secondary.main,color:t=>t.palette.common.white},children:f.map((t,a)=>e.jsx(m,{sx:{textTransform:"capitalize",color:r=>r.palette.common.white},align:t.align?t.align:"left",children:e.jsx("b",{children:t.Header})},a))})}),e.jsx(G,{children:n.map((t,a)=>e.jsxs(W,{children:[e.jsx(m,{size:"small",sx:{textTransform:"capitalize"},children:e.jsx(j,{variant:"subtitle1",style:{color:t.IsLeftStudent==="1"?"red":"inherit"},children:t.Text1})}),e.jsx(m,{size:"small",sx:{textTransform:"capitalize"},children:e.jsx(j,{variant:"subtitle1",style:{color:t.IsLeftStudent==="1"?"red":"inherit"},children:t.Text2})}),e.jsx(m,{size:"small",sx:{textTransform:"capitalize"},children:e.jsx(D,{size:"small",id:"outlined-basic",value:t.Text3,variant:"outlined",onChange:r=>{x(r,t)},disabled:c=="1"})}),e.jsx(m,{size:"small",sx:{textTransform:"capitalize"},children:e.jsx(D,{size:"small",id:"outlined-basic",value:t.Text4,variant:"outlined",onChange:r=>{w(r,t)},disabled:c=="1"})})]},a))})]})})})},fe=()=>{const n=J();q();let{StandardDivisionId:p}=Q();p=Z(p);const[l,f]=o.useState(0),[c,g]=o.useState([]),h=Number(localStorage.getItem("localSchoolId")),x=Number(sessionStorage.getItem("AcademicYearId"));Number(sessionStorage.getItem("StandardDivisionId"));const w=Number(localStorage.getItem("UserId"));Number(sessionStorage.getItem("UserId"));const t=T(s=>s.TermwiseHtWt.ClassTeacherList);let a=ee(247);const[r,i]=o.useState(a=="Y"?0:p),S=T(s=>s.TermwiseHtWt.TermwiseTermList),I=T(s=>s.TermwiseHtWt.Student),C=T(s=>s.TermwiseHtWt.UpdateStudent),u=T(s=>s.TermwiseHtWt.FinalPublishedExamStatus);JSON.parse(sessionStorage.getItem("ScreensAccessPermission")),u.ShowFlag;const B=["User can not change or update any data once summative exam is published."],R=te(),A=[{Id:1,Header:"Roll No."},{Id:2,Header:"Student Name"},{Id:3,Header:"Height (In Centimeters)"},{Id:4,Header:"Weight (In Kilograms)"}];o.useEffect(()=>{n(se({asSchoolId:h,asAcademicYearId:x}))},[]),o.useEffect(()=>{n(ae({asSchoolId:h}))},[]),o.useEffect(()=>{S.length>0&&f(S[0].Id)},[S]);const N={asStdDivId:Number(r),asAcademic_Year_Id:x,asSchoolId:h,asTerm_Id:l};o.useEffect(()=>{n(L(N)),n(re(U))},[r,l]),o.useEffect(()=>{g(I)},[I]);const U={asStandardDivId:Number(r),asTerm_Id:l,asSchoolId:h,asAcademicYearId:x};o.useState(""),o.useState("");const V=()=>{let s="<ArrayOfStudentInfoForHeightWeight xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema'>";return c.map(d=>{s=s+"<StudentInfoForHeightWeight><RollNo>"+d.Text1+"</RollNo><YearWiseStudentId>"+d.Text6+"</YearWiseStudentId><Height>"+(d.Text3===""?"0":d.Text3)+"</Height><Weight>"+(d.Text4===""?"0":d.Text4)+"</Weight><IsLeftStudent>"+d.Text5+"</IsLeftStudent></StudentInfoForHeightWeight>"}),s=s+"</ArrayOfStudentInfoForHeightWeight>",s},_=s=>{i(s)},M=s=>{f(s)},Y=s=>{(s===""||/^[0-9\b]+$/.test(s)&&s.length<=2)&&g(s)},O=s=>{g(s)},P=()=>{const s={asSchoolId:h,asAcademicYearId:x,asTermId:l,asStandardDivisionId:Number(r),aiUserId:w,StudentHeightWeightDetailsXML:V()};n(ce(s))};return o.useEffect(()=>{C!==""&&(ne.success(C,{toastId:"success1"}),n(oe()),n(L(N)))},[C]),e.jsxs(b,{sx:{px:2},children:[e.jsx(ie,{navLinks:[{title:"Exam Results",path:"/RITeSchool/Teacher/ExamResultBase"},{title:"Termwise Height-Weight",path:"/RITeSchool/Teacher/TermwiseHeightWeight"}],rightActions:e.jsx(e.Fragment,{children:e.jsxs(k,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"left",gap:1,sx:{mt:{xs:0,sm:0},flexWrap:{xs:"nowrap",sm:"nowrap"}},children:[e.jsx(y,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:e.jsx(F,{sx:{width:{xs:"70vw",sm:"20vw"},bgcolor:a=="N"?"#F0F0F0":"inherit"},ItemList:t,onChange:_,label:"Class Teacher",defaultValue:r.toString(),mandatory:!0,size:"small",DisableClearable:a=="N",disabled:a=="N"})}),e.jsx(y,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:e.jsx(F,{sx:{width:{xs:"40vw",sm:"15vw"}},ItemList:S,onChange:M,label:"Term",defaultValue:l.toString(),mandatory:!0,size:"small"})}),e.jsxs(y,{item:!0,xs:12,gap:1,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:[e.jsx(H,{title:B,children:e.jsx(v,{sx:{color:"white",backgroundColor:"#fbc02d","&:hover":{backgroundColor:"#e1ac28"}},children:e.jsx(he,{})})}),e.jsx(H,{title:"Capture termwise students' height and weight.",children:e.jsx(v,{sx:{color:"white",backgroundColor:E[500],"&:hover":{backgroundColor:E[600]}},children:e.jsx(le,{})})}),Number(r)>0&&e.jsx(H,{title:"Save",children:e.jsx(v,{sx:{color:"white",backgroundColor:z[500],"&:hover":{backgroundColor:z[500]}},disabled:(u==null?void 0:u.ShowFlag)=="1",onClick:P,children:e.jsx(de,{})})})]})]})})}),e.jsx(b,{sx:{backgroundColor:"white",mb:2,p:2},children:e.jsxs(k,{direction:"row",gap:1,alignItems:"center",mb:0,children:[e.jsx(j,{variant:"h4",mb:0,children:"Legend"}),e.jsxs(xe,{sx:{alignItems:"center",display:"flex",mt:"0px"},children:[e.jsx(ge,{className:R.border,style:{background:"red"}}),"Left Students"]})]})}),e.jsx(b,{sx:{background:"white",p:2},children:I.length>0?e.jsx(e.Fragment,{children:e.jsx(ue,{ItemList:c,onTextChange:Y,onTextChange2:O,HeaderArray:A,IsPublishedStatus:u.IsPublishedStatus})}):e.jsx(j,{variant:"body1",sx:{textAlign:"center",backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:e.jsx("b",{children:"No record found."})})})]})};export{fe as default};
