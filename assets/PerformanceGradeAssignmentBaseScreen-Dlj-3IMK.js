import{j as e,B as a,T,af as O,ag as _,ah as $,ai as C,aj as b,ak as J,E as k,I as y,u as K,A as X,q as Z,v as h,r,c as R,gz as ee,gA as A,C as se,n as te,G as S,bI as ae,F as G,av as re}from"./index-CpZD2H93.js";import{R as ne}from"./RadioButton1-Bomg8HHo.js";import{d as oe}from"./AddCircle-BWwMsra3.js";import{Q as ie}from"./QuestionMark-B_7MKkiz.js";import"./ButtonStyle-DAEB_dBE.js";import"./RadioGroup-DpIwLy2j.js";import"./Radio-IVxzoZco.js";import"./FormGroup-C5-m8U5s.js";function le({ItemList:c,clickView:m,HeaderArray:o}){return e.jsx(a,{children:c.length===0?e.jsx(a,{sx:{backgroundColor:"#D2FDFC"},children:e.jsx(T,{variant:"h6",align:"center",color:"blue",sx:{textAlign:"center",marginTop:1,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:"No record found."})}):e.jsx(e.Fragment,{children:e.jsx(a,{sx:{backgroundColor:"white",px:2},children:e.jsx(O,{component:a,children:e.jsxs(_,{"aria-label":"simple table",sx:{border:s=>`1px solid ${s.palette.divider}`},children:[e.jsx($,{children:e.jsx(C,{sx:{background:s=>s.palette.secondary.main},children:o.map((s,i)=>e.jsx(b,{sx:{textTransform:"capitalize",color:d=>d.palette.common.white,py:1},children:e.jsx("b",{children:s.Header})},i))})}),e.jsx(J,{children:c.map((s,i)=>e.jsxs(C,{children:[e.jsx(b,{sx:{textTransform:"capitalize",paddingTop:"2.5px",paddingBottom:"2.5px"},children:s.Text1}),e.jsx(b,{sx:{textTransform:"capitalize",paddingTop:"2.5px",paddingBottom:"2.5px",pl:9},children:e.jsx(k,{title:"Performance Evaluation",children:e.jsx(y,{onClick:()=>m(s.Id),sx:{color:"#223354","&:hover":{color:"#223354",cursor:"pointer"}},children:e.jsx(oe,{})})})})]},s.ItemID))})]})})})})})}const ve=()=>{const c=K(),m=X();let{asYearID:o,statusID:s}=Z();o=h(o),s=h(s);const[i,d]=r.useState("0"),[U,ce]=r.useState([{Id:1,Header:"Staff Name (Designation)"},{Id:2,Header:"Performance Evaluation"}]),B=[{Value:"1",Name:"Submitted"},{Value:"2",Name:"Pending"}],[x,v]=r.useState("2"),f=Number(localStorage.getItem("localSchoolId")),I=Number(localStorage.getItem("UserId")),u=R(t=>t.PerformanceGradeAssignment.GetAllYearsIS),p=R(t=>t.PerformanceGradeAssignment.GetAllUsersReportingToGivenUserIS),D={asSchoolId:f};r.useEffect(()=>{o!==void 0&&s!==void 0&&(d(h(o)),v(h(s)))},[o,s]);const[de,L]=r.useState([]),[n,P]=r.useState(20),Y=[20,50,100,200],[l,j]=r.useState(1),E=p.filter(t=>t.TotalRows!==void 0).map(t=>t.TotalRows),g=[...new Set(E)][0],H=(l-1)*n+1,w=Math.min(l*n,g),N=Math.ceil(g/n),z={asSchoolId:f,asUserID:I,asYear:Number(i),asShowPending:!0,asStartIndex:(l-1)*n,asPageSize:l*n},V={asSchoolId:f,asUserID:I,asYear:Number(i),asShowPending:!1,asStartIndex:(l-1)*n,asPageSize:l*n};r.useEffect(()=>{c(ee(D))},[]),r.useEffect(()=>{u.length>0&&o===void 0&&s===void 0&&d(u[0].Value)},[u,o,s]),r.useEffect(()=>{x=="1"?c(A(V)):x=="2"&&c(A(z))},[x,i,l,n]),r.useEffect(()=>{p&&L(p)},[p]);const F=t=>{d(t),P(20),j(1)},W=t=>{v(t)},q=t=>{m("/RITeSchool/Teacher/PerformanceEvaluation",{state:{userId:t,asYear:i,status:x,fromInternal:!0}})},M=t=>{j(t)},Q=t=>{P(parseInt(t.target.value,10)),j(1)};return e.jsxs(a,{sx:{px:2},children:[e.jsx(se,{navLinks:[{title:"Performance Grade Assignment",path:"/RITeSchool/Teacher/PerformanceGradeAssignmentBaseScreen"}],rightActions:e.jsx(e.Fragment,{children:e.jsxs(te,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"right",gap:1,sx:{mt:{xs:0,sm:0},flexWrap:{xs:"nowrap",sm:"nowrap"}},children:[e.jsx(S,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:e.jsx(a,{sx:{background:"white"},children:e.jsx(ae,{ItemList:u,onChange:F,defaultValue:i,label:"Year",sx:{width:{xs:"40vw",sm:"20vw"}},size:"small"})})}),e.jsx(S,{item:!0,xs:12,sm:6,gap:1,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-end"},children:e.jsx(a,{sx:{display:"flex",alignItems:"center"},children:e.jsx(k,{title:"Displays user who report to the logged in user.",children:e.jsx(y,{sx:{color:"white",backgroundColor:G[500],height:"36px !important",":hover":{backgroundColor:G[600]},marginRight:"-4px"},children:e.jsx(ie,{})})})})})]})})}),e.jsx(S,{sx:{backgroundColor:"white",mb:1,p:1},children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(T,{variant:"h5",children:"Status "}),e.jsx(ne,{Array:B,ClickRadio:W,defaultValue:x,Label:""})]})}),e.jsxs(a,{sx:{background:"white",p:1},children:[e.jsx(a,{p:1,children:g>n?e.jsx("div",{style:{flex:1,textAlign:"center"},children:e.jsxs(T,{variant:"subtitle1",sx:{textAlign:"center"},children:[e.jsxs(a,{component:"span",fontWeight:"fontWeightBold",children:[H," to ",w]})," ","out of"," ",e.jsx(a,{component:"span",fontWeight:"fontWeightBold",children:g})," ",g===1?"record":"records"]})}):e.jsx("span",{children:" "})}),e.jsx(le,{HeaderArray:U,ItemList:p,clickView:q}),e.jsx(a,{p:2,children:w>19?e.jsx(re,{rowsPerPage:n,ChangeRowsPerPage:Q,rowsPerPageOptions:Y,PageChange:M,pagecount:N}):e.jsx("span",{})})]})]})};export{ve as default};
