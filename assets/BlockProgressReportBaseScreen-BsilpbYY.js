import{P as b,ad as X,j as e,a4 as ee,o as P,r as i,af as K,ag as Q,ah as J,ai as L,aj as a,bH as E,ak as Z,E as v,I as T,aw as se,a0 as oe,a1 as le,bd as te,T as D,a3 as ne,a5 as re,a6 as H,J as W,j3 as ae,c as B,oZ as O,o_ as ie,B as u,C as ce,F as A,o$ as _,ap as M,c7 as Y}from"./index-CpZD2H93.js";import de from"./AddNewPhoto-Bb0IaykY.js";import he from"./AddNewVideo-CLlFmWyO.js";import{d as z}from"./ArrowCircleDown-CuaRBylZ.js";import{d as G}from"./ArrowCircleUp-C3u-oYJu.js";import{S as xe}from"./SearchTwoTone-BuZBJscN.js";import{Q as pe}from"./QuestionMark-B_7MKkiz.js";import{R as ue}from"./RadioGroup-DpIwLy2j.js";import{R as q}from"./Radio-IVxzoZco.js";import"./CloudUpload-C2WsbpCZ.js";import"./SelectListHierarchy-B0--0w-H.js";import"./FormGroup-C5-m8U5s.js";$.propTypes={ItemList:b.array,onChange:b.func.isRequired,label:b.string,defaultValue:b.string,mandatory:b.bool,sx:b.object,size:b.string,DisableClearable:b.bool,disabled:b.bool};function $({ItemList:g,onChange:n,label:j,defaultValue:c="",mandatory:m=!1,sx:d=null,size:C="medium",DisableClearable:y=!1,disabled:f=!1}){X().pathname.replace("/RITeSchool/Student/","");const s=l=>{/[&@*%#!0-9-^_$()+=]/.test(l.key)&&l.preventDefault()};return e.jsx(ee,{value:g.find(l=>l.Value==c)||null,onChange:(l,x)=>n(x?x.Value:""),options:g,disableClearable:y,disabled:f,getOptionLabel:l=>l.Name,renderInput:l=>e.jsx(P,{...l,size:C,sx:d||{minWidth:"350px",pl:"10px"},label:j?e.jsx("span",{children:j}):"",onKeyDown:s})})}const ge=({rowsData:g})=>{const[n,j]=i.useState(g),[c,m]=i.useState([]),[d,C]=i.useState(""),[y,f]=i.useState(!1),[h,N]=i.useState(null),[s,l]=i.useState({key:"",direction:"asc"}),x=o=>{m(r=>r.includes(o.RollNo)?r.filter(S=>S!==o.RollNo):[...r,o.RollNo])},k=o=>{if(o.target.checked){const r=n.map(S=>S.RollNo);m(r)}else m([])},p=o=>{const r=s.key===o&&s.direction==="asc";l({key:o,direction:r?"desc":"asc"});const R=[...n].sort((t,F)=>t[o]<F[o]?r?1:-1:t[o]>F[o]?r?-1:1:0);j(R)},w=o=>{N(o),C(o.reason),f(!0)},I=()=>{f(!1)},U=()=>{j(o=>o.map(r=>r.RollNo===h.RollNo?{...r,reason:d}:r)),f(!1)},V=(o,r)=>{j(S=>S.map(R=>R.rollNo===o.RollNo?{...R,reason:r}:R))};return console.log(g,"rowsData"),e.jsxs("div",{children:[e.jsx(K,{children:e.jsxs(Q,{sx:{border:o=>`1px solid ${o.palette.grey[300]}`},children:[e.jsx(J,{children:e.jsxs(L,{sx:{background:o=>o.palette.secondary.main,color:o=>o.palette.common.white},children:[e.jsx(a,{sx:{color:"white",py:1},children:e.jsx(E,{indeterminate:c.length>0&&c.length<n.length,checked:n.length>0&&c.length===n.length,onChange:k})}),e.jsx(a,{sx:{color:"white",py:1},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>p("rollNo"),children:[e.jsx("strong",{children:"Roll No."}),s.key==="rollNo"&&(s.direction==="asc"?e.jsx(G,{sx:{ml:1,color:"white",fontSize:"20px"}}):e.jsx(z,{sx:{ml:1,color:"white",fontSize:"20px"}}))]})}),e.jsx(a,{sx:{color:"white",py:1},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>p("name"),children:[e.jsx("strong",{children:"Student Name"}),s.key==="name"&&(s.direction==="asc"?e.jsx(G,{sx:{ml:1,color:"white",fontSize:"20px"}}):e.jsx(z,{sx:{ml:1,color:"white",fontSize:"20px"}}))]})}),e.jsx(a,{sx:{color:"white",py:1},children:e.jsx("strong",{children:"Reason"})}),e.jsx(a,{sx:{color:"white",py:1,textAlign:"center"},children:e.jsx("strong",{children:"Edit"})})]})}),e.jsx(Z,{children:n.map(o=>e.jsxs(L,{children:[e.jsx(a,{children:e.jsx(E,{checked:c.includes(o.RollNo),onChange:()=>x(o)})}),e.jsx(a,{sx:{py:.5},children:o.RollNo}),e.jsx(a,{sx:{py:.5},children:o.Name}),e.jsx(a,{sx:{py:.5},children:e.jsx(P,{value:o.reason,multiline:!0,fullWidth:!0,minRows:1,disabled:!0,onChange:r=>V(o,r.target.value),sx:{"& .MuiInputBase-root":{resize:"both",overflow:"auto"}}})}),e.jsx(a,{sx:{textAlign:"center",py:.5},children:e.jsx(v,{title:"Edit",children:e.jsx(T,{onClick:()=>w(o),color:"primary",children:e.jsx(se,{})})})})]},o.RollNo))})]})}),e.jsxs(oe,{open:y,onClose:I,fullWidth:!0,maxWidth:"sm",PaperProps:{sx:{borderRadius:"15px"}},children:[e.jsx(le,{sx:{bgcolor:"#223354",position:"relative"},children:e.jsx(te,{onClick:I,sx:{color:"white",borderRadius:"7px",position:"absolute",top:"5px",right:"8px",cursor:"pointer","&:hover":{color:"red"}}})}),e.jsx(D,{variant:"h3",sx:{pt:1,pl:2},children:"Edit Reason"}),e.jsx(ne,{children:e.jsx(P,{fullWidth:!0,multiline:!0,minRows:3,value:d,onChange:o=>C(o.target.value)})}),e.jsxs(re,{sx:{p:2},children:[e.jsx(H,{onClick:I,color:"error",children:"Cancel"}),e.jsx(H,{onClick:U,sx:{color:"green","&:hover":{color:"green",backgroundColor:W[100]}},children:"Update"})]})]})]})},je=({rowsData:g})=>{const[n,j]=i.useState(g),[c,m]=i.useState([]),[d,C]=i.useState({key:"",direction:"asc"});console.log("first rendered value ✨✨✨✨",g);const y=s=>{m(l=>l.includes(s.rollNo)?l.filter(x=>x!==s.rollNo):[...l,s.rollNo])},f=s=>{if(s.target.checked){const l=n.map(x=>x.rollNo);m(l)}else m([])},h=s=>{const l=d.key===s&&d.direction==="asc";C({key:s,direction:l?"desc":"asc"});const k=[...n].sort((p,w)=>p[s]<w[s]?l?1:-1:p[s]>w[s]?l?-1:1:0);j(k)},N=(s,l)=>{j(x=>x.map(k=>k.rollNo===s.rollNo?{...k,reason:l}:k))};return e.jsx("div",{children:e.jsx(K,{children:e.jsxs(Q,{sx:{border:s=>`1px solid ${s.palette.grey[300]}`},children:[e.jsx(J,{children:e.jsxs(L,{sx:{background:s=>s.palette.secondary.main,color:s=>s.palette.common.white},children:[e.jsx(a,{sx:{color:"white",py:1},children:e.jsx(E,{indeterminate:c.length>0&&c.length<n.length,checked:n.length>0&&c.length===n.length,onChange:f})}),e.jsx(a,{sx:{color:"white",py:1},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>h("rollNo"),children:[e.jsx("strong",{children:"Roll No."}),d.key==="rollNo"&&(d.direction==="asc"?e.jsx(G,{sx:{ml:1,color:"white",fontSize:"20px"}}):e.jsx(z,{sx:{ml:1,color:"white",fontSize:"20px"}}))]})}),e.jsx(a,{sx:{color:"white",py:1},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>h("name"),children:[e.jsx("strong",{children:"Student Name"}),d.key==="name"&&(d.direction==="asc"?e.jsx(G,{sx:{ml:1,color:"white",fontSize:"20px"}}):e.jsx(z,{sx:{ml:1,color:"white",fontSize:"20px"}}))]})}),e.jsx(a,{sx:{color:"white",py:1},children:e.jsx("strong",{children:"Reason"})})]})}),e.jsx(Z,{children:n.length>0&&n.map(s=>e.jsxs(L,{children:[e.jsx(a,{children:e.jsx(E,{checked:c.includes(s.RollNo),onChange:()=>y(s)})}),e.jsx(a,{sx:{py:.5},children:s.RollNo}),e.jsx(a,{sx:{py:.5},children:s.Name}),e.jsx(a,{sx:{py:.5},children:e.jsx(P,{value:s.reason,multiline:!0,fullWidth:!0,minRows:1,onChange:l=>c.includes(s.RollNo)?N(s,l.target.value):null,disabled:!c.includes(s.RollNo),sx:{"& .MuiInputBase-root":{resize:"both",overflow:"auto"}}})})]},s.RollNo))})]})})})},ve=()=>{const g=ae(),[n,j]=i.useState("Blocked"),[c,m]=i.useState(""),[d,C]=i.useState(20),[y,f]=i.useState(1),[h,N]=i.useState("1"),s=Number(localStorage.getItem("localSchoolId")),l=Number(sessionStorage.getItem("AcademicYearId")),x=Number(sessionStorage.getItem("StandardDivisionId")),k=B(t=>t.SliceRequisition.RequisitionListCount),p=B(t=>t.BlockUnBlocklist.IsStudentsName),w=B(t=>t.BlockUnBlocklist.IsStudentsName1);console.log(p,"GetBlockUnblockList"),B(t=>t.BlockUnBlocklist.IsStudentsCount);const I=B(t=>t.BlockUnBlocklist.IsClassTeachers);console.log(I,"GetClassTeacherList"),i.useEffect(()=>{console.log(p,"GetBlockUnblockList")},[p]),Math.min(y*d,k.TotalCount),Math.ceil(k.TotalCount/d);const U={asSchoolId:Number(s),asAcademicYearId:Number(l),asStandardDivId:Number(x),asShowblocked:h!=="1",asStudentId:0,asSearch:"",asSortExp:"ORDER BY RollNo",asStartIndex:0,asEndIndex:20};i.useEffect(()=>{g(O(U,h))},[]),i.useEffect(()=>{g(O(U,h))},[h,n]);const V={asSchoolId:Number(s),asAcademicYearId:Number(l)};i.useEffect(()=>{g(ie(V))},[]);const o=t=>{N(t)};console.log(h,"checkedValues");function r(){throw new Error("Function not implemented.")}const S=t=>{j(t)},R=t=>{m(t)};return console.log(p,"GetBlockUnblockList"),e.jsxs(u,{px:2,children:[e.jsx(ce,{navLinks:[{title:"Block Progress Report",path:"/RITeSchool/Teacher/BlockProgressReportBaseScreen"}],rightActions:e.jsxs(e.Fragment,{children:[e.jsx($,{ItemList:I,onChange:S,label:"Class Teacher",defaultValue:n,mandatory:!0,sx:{width:"15vw"},size:"small",DisableClearable:!1,disabled:!1}),e.jsx($,{ItemList:p,onChange:R,label:"Student Name",defaultValue:c,mandatory:!0,sx:{width:"15vw"},size:"small",DisableClearable:!1,disabled:!1}),e.jsx(P,{sx:{width:"15vw"},fullWidth:!0,label:"Name / Reg. No.",value:void 0,variant:"outlined",size:"small",onChange:t=>{},onKeyDown:t=>{(t.key==="Enter"||t.key==="Tab")&&r()}}),e.jsx(v,{title:"Search",children:e.jsx(T,{onClick:r,sx:{background:t=>t.palette.primary.main,color:"white","&:hover":{backgroundColor:t=>t.palette.primary.dark}},children:e.jsx(xe,{})})}),e.jsx(v,{title:"Block/Unblock progress report of students.",children:e.jsx(T,{sx:{color:"white",backgroundColor:A[500],"&:hover":{backgroundColor:A[600]}},children:e.jsx(pe,{})})}),n==="Unblocked"&&e.jsx(v,{title:"Unblocked",children:e.jsx(T,{sx:{color:"white",backgroundColor:W[500],"&:hover":{backgroundColor:W[600]}},onClick:de,children:e.jsx(_,{})})}),n==="Blocked"&&e.jsx(v,{title:"Blocked",children:e.jsx(T,{sx:{color:"white",backgroundColor:M[500],"&:hover":{backgroundColor:M[600]}},onClick:he,children:e.jsx(_,{})})})]})}),e.jsx(u,{sx:{backgroundColor:"white",px:2,mb:1,py:1},children:e.jsxs(ue,{row:!0,value:h,onChange:t=>o(t.target.value),sx:{mb:4},children:[e.jsx(Y,{value:"0",control:e.jsx(q,{}),label:"Show Blocked Students"}),e.jsx(Y,{value:"1",control:e.jsx(q,{}),label:"Show Unblocked Students"})]})}),e.jsxs(u,{sx:{backgroundColor:"white"},children:[h==="0"&&w.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(u,{sx:{display:"flex",gap:"20px",alignItems:"center",pt:2,pl:2},children:[e.jsx(D,{variant:"h4",sx:{mb:0,lineHeight:"normal",alignSelf:"center",paddingBottom:"2px"},children:"Legend"}),e.jsx(u,{sx:{display:"flex",gap:"20px"},children:e.jsxs(u,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(u,{sx:{width:20,height:20,backgroundColor:A[300],border:"1px solid black"}}),e.jsx(D,{children:"Blocked student progress report due to pending fees"})]})})]}),e.jsx(u,{sx:{px:2,pb:1},children:e.jsx(ge,{rowsData:w})})]}),h==="1"&&p.length>0&&e.jsxs(u,{sx:{px:2,py:1},children:[e.jsxs(u,{sx:{display:"flex",gap:"20px",alignItems:"center",pt:1,pl:0},children:[e.jsx(D,{variant:"h4",sx:{mb:0,lineHeight:"normal",alignSelf:"center",paddingBottom:"2px"},children:"Legend"}),e.jsx(u,{sx:{display:"flex",gap:"20px"},children:e.jsxs(u,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(u,{sx:{width:20,height:20,backgroundColor:A[300],border:"1px solid black"}}),e.jsx(D,{children:"Blocked student progress report due to pending fees"})]})})]}),e.jsx(je,{rowsData:p})]})]})]})};export{ve as default};
