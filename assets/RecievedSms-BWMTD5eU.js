import{r,S as Y,u as z,c as u,e5 as J,e6 as K,j as e,B as n,C as Q,E as T,I as R,F as N,H as V,G as v,T as L,b9 as X,ag as Z,ah as ee,ai as k,aj as l,ak as te,ay as se,e7 as ae,av as re}from"./index-CpZD2H93.js";import{d as h}from"./ArrowCircleDown-CuaRBylZ.js";import{d as g}from"./ArrowCircleUp-C3u-oYJu.js";import{d as oe}from"./PriorityHigh-GKb8m_z9.js";import{y as M}from"./yellow-BQYah5ZS.js";import{L as ne}from"./Link-QB4wltBd.js";function Se(){const[s,ie]=r.useState({startDate:null,endDate:null});Y(),r.useState(!1);const S=z();u(t=>t.SmsCenter.SmsList);const j=u(t=>t.SmsCenter.NewSmsList),P=u(t=>t.SmsCenter.Loading),U=u(t=>t.SmsCenter.MobileNumber),[m,p]=r.useState(1),[i,B]=r.useState(20),F=[20,50,100,200],b=sessionStorage.getItem("AcademicYearId"),f=localStorage.getItem("localSchoolId"),D=sessionStorage.getItem("Id"),w=sessionStorage.getItem("RoleId"),[c,C]=r.useState("desc"),[o,_]=r.useState("Date"),A=j.filter(t=>t.TotalRows!==void 0).map(t=>t.TotalRows),I=[...new Set(A)][0];r.useEffect(()=>{const t={asSchoolId:f,asAcademicYearId:b,asUserId:D,asUserRoleId:w};localStorage.setItem("url",window.location.pathname),S(J(t))},[]);const E=j.filter(t=>{if(!s.startDate&&!s.endDate)return!0;const a=new Date(t.Date);return s.startDate&&!s.endDate?a>=s.startDate:(!s.startDate&&s.endDate||a>=s.startDate)&&a<=s.endDate}).sort((t,a)=>{let d=0;return o==="Date"?d=new Date(t.Date).getTime()-new Date(a.Date).getTime():o==="UserName"?d=t.UserName.localeCompare(a.UserName):o==="Subject"&&(d=t.Subject.localeCompare(a.Subject)),c==="asc"?d:-d}),x=t=>{o===t?C(c==="asc"?"desc":"asc"):(_(t),C("asc"))},$={asSchoolId:f,asAcademicYearId:b,asUserId:D,asReceiverUserRoleId:w,asStartIndex:(m-1)*i,asPageSize:m*i},G=Math.min(m*i,I),H=Math.ceil(I/i),q=t=>{B(parseInt(t.target.value,10)),p(1)},O=t=>{p(t)};r.useEffect(()=>{S(K($))},[m,i]);const y=E;let W="/RITeSchool/Student/viewsms/";return e.jsxs(n,{sx:{px:2},children:[e.jsx(Q,{navLinks:[{title:"SMS Center",path:"/RITeSchool/Student/SmsCenter"}],rightActions:e.jsxs(e.Fragment,{children:[e.jsx(n,{children:e.jsx(T,{title:"School SMS will be sent to below listed number(s). To add/update the number, please send the information to admin staff via message center.",children:e.jsx(R,{sx:{color:"white",backgroundColor:M[700],height:"36px !important",":hover":{backgroundColor:M[800]}},children:e.jsx(oe,{})})})}),e.jsx(n,{children:e.jsx(T,{title:"Displays received SMS list.",children:e.jsx(R,{sx:{color:"white",backgroundColor:N[500],height:"36px !important",":hover":{backgroundColor:N[600]}},children:e.jsx(V,{})})})})]})}),e.jsx(n,{children:e.jsx(v,{container:!0,children:e.jsxs(v,{item:!0,sx:{minWidth:"100%",p:2,background:"white"},children:[e.jsxs(L,{variant:"h4",fontWeight:800,textAlign:"center",pt:1,children:["Mobile Number(s) : ",U.replace(";",", ")]}),e.jsx(n,{sx:{mt:2},children:P?e.jsx(n,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(X,{})}):y.length>0?e.jsxs(Z,{"aria-label":"simple table",sx:{border:t=>`1px solid ${t.palette.grey[300]}`,overflow:"hidden"},children:[e.jsx(ee,{children:e.jsxs(k,{sx:{background:t=>t.palette.secondary.main,color:t=>t.palette.common.white},children:[e.jsx(l,{sx:{color:"white"},children:e.jsxs("b",{onClick:()=>x("UserName"),style:{cursor:"pointer",display:"flex",alignItems:"center"},children:["From ",o==="UserName"&&(c==="asc"?e.jsx(g,{}):e.jsx(h,{}))]})}),e.jsx(l,{sx:{color:"white"},children:e.jsxs("b",{onClick:()=>x("Subject"),style:{cursor:"pointer",display:"flex",alignItems:"center"},children:["SMS Text ",o==="Subject"&&(c==="asc"?e.jsx(g,{}):e.jsx(h,{}))]})}),e.jsx(l,{sx:{color:"white"},children:e.jsxs("b",{onClick:()=>x("Date"),style:{cursor:"pointer",display:"flex",alignItems:"center"},children:["Received Date ",o==="Date"&&(c==="asc"?e.jsx(g,{}):e.jsx(h,{}))]})})]})}),e.jsx(te,{children:y.map((t,a)=>e.jsxs(k,{children:[e.jsx(l,{children:t.UserName}),e.jsx(l,{children:e.jsx(ne,{href:W+se(t.SMS_Id),children:t.Subject})}),e.jsx(l,{children:ae(new Date(t.Date))})]},a))})]}):e.jsx(L,{variant:"body1",sx:{textAlign:"center",marginTop:4,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:e.jsx("b",{children:"No record found."})})}),e.jsx(n,{mt:1,children:G>19?e.jsx(re,{rowsPerPage:i,ChangeRowsPerPage:q,rowsPerPageOptions:F,PageChange:O,pagecount:H}):e.jsx("span",{})})]})})})]})}export{Se as default};
