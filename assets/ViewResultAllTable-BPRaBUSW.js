import{r as i,j as e,B as j,T as d,af as H,c1 as L,ag as A,ak as _,ai as u,aj as l}from"./index-CpZD2H93.js";const J=({stdFinalResult:o,key:G,IsTotalConsiderForProgressReport:h,ToppersCount:y,isAllStdSelect:T})=>{var k,w,N;const[x,W]=i.useState([]),[m,M]=i.useState([]),[V,C]=i.useState([]),[v,D]=i.useState([]),[f,R]=i.useState([]),[c,P]=i.useState([]),[E,O]=i.useState([]),[b,z]=i.useState(),[S,B]=i.useState();i.useEffect(()=>{c&&B(c.some(r=>["1","2","3"].includes(r.rank)))},[c]),i.useEffect(()=>{o&&F(o)},[o]),i.useEffect(()=>{if(m){const r=m.filter(s=>s.Total_Consideration==="N");O(r)}},[m]),i.useEffect(()=>{},[h,b]);const F=r=>{const s={data:r};let n=s.data.listStudentDetail.map((t,g)=>({Id:t.YearWise_Student_Id,Text1:t.Student_Name,Text2:t.Roll_No,Text3:t.Standard_Name,Text4:t.Division_Name,Text5:t.Academic_Year,Text6:t.School_Name,Text7:t.School_Orgn_Name,ShowOnlyGrades:t.ShowOnlyGrades,IsFailCriteriaNotApplicable:t.IsFailCriteriaNotApplicable}));W(n);let p=[];s.data.listSubjectDetails.map((t,g)=>{p.push({Id:t.Subject_Id,Name:t.Subject_Name,Value:t.Subject_Id,IsAbsent:t.IsAbsent,Total_Consideration:t.Total_Consideration})}),M(p);let a=[{Id:"0",Name:"Marks",Value:"0",IsAbsent:"0"}];s.data.listSubjectDetails.map((t,g)=>{const I=t.Marks_Scored.includes(".0")?parseFloat(t.Marks_Scored):t.Marks_Scored;a.push({Id:t.Subject_Id,Name:`${I} / ${t.Subject_Total_Marks}`,Value:t.Subject_Id,IsAbsent:t.IsAbsent})}),C(a);let $=[{Id:"0",Name:"Subject Grade",Value:"0",IsAbsent:"0"}];s.data.listSubjectDetails.map((t,g)=>{$.push({Id:t.Subject_Id,Name:t.Grade,Value:t.Subject_Id,IsAbsent:t.IsAbsent})}),D($);let Y=s.data.listMarksDetails.map((t,g)=>({TotalMarks:`${t.Total_Marks_Scored.includes(".0")?parseFloat(t.Total_Marks_Scored):t.Total_Marks_Scored} / ${t.Subjects_Total_Marks}`,GradeName:t.Grade_Name,Percentage:t.Percentage,Grade_id:t.Grade_id,Result:t.Result.trim()?t.Result.trim():"-",rank:t.rank.trim()?t.rank.trim():"-"})),X=s.data.listParcentageDetails.map((t,g)=>({TotalMarks:t.Range,Grade:t.Grade,Remarks:t.Remarks,GradeConfId:t.Marks_Grades_Configuration_Detail_ID}));R(X),P(Y),z(x.filter(t=>t.ShowOnlyGrades.trim()==="true").length>0)};return e.jsx(e.Fragment,{children:((k=o==null?void 0:o.listMarksDetails)==null?void 0:k.length)>0?e.jsxs(e.Fragment,{children:[e.jsx(j,{sx:{mt:2,background:"white",border:r=>`1px solid ${r.palette.grey[400]}`},children:e.jsxs(j,{children:[x.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"h4",textAlign:"center",color:"primary",mt:1,mb:1,children:x[0].Text7}),e.jsx("hr",{}),e.jsx(d,{variant:"h3",textAlign:"center",color:"black",mb:1,children:x[0].Text6}),e.jsx("hr",{}),e.jsx(d,{variant:"h4",textAlign:"center",color:"black",pb:1,children:"Final Result"})]}),e.jsx(H,{component:L,sx:{maxWidth:"100%",overflowX:"auto"},children:e.jsx(A,{children:e.jsx(_,{children:x.map((r,s)=>e.jsxs(u,{sx:{bgcolor:"#38548A",display:"flex",flexWrap:"nowrap"},children:[e.jsxs(l,{sx:{flex:"0 0 100px",minWidth:"100px",textAlign:"left",whiteSpace:"nowrap",color:"white",fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:["Roll No: ",e.jsx("b",{children:r.Text2})]}),e.jsxs(l,{sx:{flex:"0 0 300px",minWidth:"300px",textAlign:"left",whiteSpace:"nowrap",color:"white",fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:["Name: ",e.jsx("b",{children:r.Text1})]}),e.jsxs(l,{sx:{flex:"1 1 auto",minWidth:"100px",textAlign:"left",whiteSpace:"nowrap",color:"white",fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:["Class: ",e.jsxs("b",{children:[r.Text3," - ",r.Text4]})]}),e.jsxs(l,{sx:{flex:"1 1 auto",minWidth:"100px",textAlign:"left",whiteSpace:"nowrap",color:"white",fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:["Year: ",e.jsx("b",{children:r.Text5})]})]},s))})})}),e.jsx(A,{children:e.jsx(_,{children:E.length>0&&e.jsx(e.Fragment,{children:e.jsx(u,{sx:{bgcolor:"white",p:2},children:e.jsxs(l,{sx:{pl:10,py:1},children:[e.jsx("b",{children:" Legend : "})," ",e.jsx("span",{style:{color:"red"},children:"*"}),"   Subject marks not considered in total marks. "]})})})})}),e.jsx(j,{sx:{overflowX:"auto",border:r=>`1px solid ${r.palette.grey[400]}`},children:e.jsx(A,{sx:{},children:e.jsxs(_,{children:[e.jsxs(u,{sx:{bgcolor:"#F0F0F0"},children:[e.jsx(l,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[400]}`},children:e.jsx(d,{variant:"h4",textAlign:"center",color:"black",ml:2,children:"Subjects"})}),m.map((r,s)=>e.jsxs(l,{sx:{py:1,textAlign:"center",border:n=>`1px solid ${n.palette.grey[400]}`},children:[e.jsxs("b",{children:[r.Name,"  "]}),r.Total_Consideration==="N"&&e.jsx("span",{style:{color:"red"},children:"*"})]},r.Subject_Id)),h==="True"&&!b&&e.jsxs(e.Fragment,{children:[e.jsx(l,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[400]}`,fontWeight:"bold",textAlign:"center"},children:"Total"}),e.jsx(l,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[400]}`,fontWeight:"bold",textAlign:"center"},children:"%"})]}),h==="True"&&e.jsx(l,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[400]}`,fontWeight:"bold",textAlign:"center"},children:"Grade"}),x.some(r=>(r==null?void 0:r.IsFailCriteriaNotApplicable)==="N")&&e.jsx(l,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[400]}`,fontWeight:"bold",textAlign:"center"},children:"Result"}),y!==0&&S&&e.jsx(l,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[400]}`,fontWeight:"bold",textAlign:"center"},children:"Rank"})]}),e.jsx(u,{children:e.jsxs(e.Fragment,{children:[e.jsxs(e.Fragment,{children:[V.map((r,s)=>e.jsx(l,{sx:{py:1,border:n=>`1px solid ${n.palette.grey[300]}`,textAlign:"center"},children:r!=null&&r.Name?r.IsAbsent==="1"?"-":r.Name:"-"},s)),b&&e.jsx(l,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[300]}`,textAlign:"center"},children:"-"})]}),!b&&h==="True"&&c.map((r,s)=>{var n;if(s===0){const p=((n=f==null?void 0:f.find(a=>a.GradeConfId===r.Grade_id))==null?void 0:n.Remarks)||"";return e.jsxs(e.Fragment,{children:[e.jsx(l,{sx:{py:1,border:a=>`1px solid ${a.palette.grey[300]}`,textAlign:"center",fontWeight:"bold"},children:r.TotalMarks}),e.jsxs(l,{sx:{py:1,border:a=>`1px solid ${a.palette.grey[300]}`,textAlign:"center",fontWeight:"bold"},children:[r.Percentage,"%"]}),e.jsx(l,{sx:{py:1,border:a=>`1px solid ${a.palette.grey[300]}`,textAlign:"center"},children:e.jsxs(d,{variant:"body2",children:[e.jsx(d,{component:"span",fontWeight:"bold",children:r.GradeName}),p&&` (${p})`]})})]})}return null}),x.some(r=>r.IsFailCriteriaNotApplicable==="N")&&c.map((r,s)=>s===0?e.jsx(l,{sx:{py:1,border:n=>`1px solid ${n.palette.grey[300]}`,textAlign:"center",fontWeight:"bold",color:`${r.Result.trim()=="Pass"?"green":r.Result.trim()=="Fail"?"red":"inherit"}`},children:r.Result.trim()?r.Result.trim():"-"},s):null),y!==0&&S&&c.map((r,s)=>e.jsx(l,{sx:{color:"green",textAlign:"center",fontWeight:"bold"},children:r.rank.trim()?r.rank.trim():"-"},s))]})}),e.jsxs(u,{children:[v.map((r,s)=>e.jsxs(l,{sx:{py:1,border:n=>`1px solid ${n.palette.grey[300]}`,textAlign:"center"},children:[" ",r.IsAbsent==="1"?"-":r.Name]},s)),!b&&h==="True"&&e.jsxs(e.Fragment,{children:[e.jsx(l,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[300]}`,fontWeight:"bold",textAlign:"center"},children:"-"}),e.jsx(l,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[300]}`,fontWeight:"bold",textAlign:"center"},children:"-"}),e.jsx(l,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[300]}`,fontWeight:"bold",textAlign:"center"},children:"-"})]}),b&&h==="True"&&e.jsxs(e.Fragment,{children:[c.map((r,s)=>{var n;if(s===0){const p=((n=f.find(a=>a.GradeConfId===r.Grade_id))==null?void 0:n.Remarks)||"";return e.jsx(l,{sx:{py:1,border:a=>`1px solid ${a.palette.grey[300]}`,textAlign:"center"},children:e.jsxs(d,{variant:"body2",children:[e.jsx(d,{component:"span",fontWeight:"bold",children:r.GradeName}),p&&` (${p})`]})})}return null}),x.some(r=>r.IsFailCriteriaNotApplicable==="N")&&c.map((r,s)=>s===0?e.jsx(l,{sx:{py:1,border:n=>`1px solid ${n.palette.grey[300]}`,textAlign:"center",fontWeight:"bold",color:`${r.Result.trim()=="Pass"?"green":r.Result.trim()=="Fail"?"red":"inherit"}`},children:r.Result.trim()?r.Result.trim():"-"},s):null)]}),y!==0&&S&&e.jsx(l,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[300]}`,textAlign:"center",fontWeight:"bold"},children:"-"})]})]})})})]})},G),T&&e.jsx(j,{sx:{width:"100%",my:4,borderTop:"2px dotted black",borderSpacing:"60px"}})]}):e.jsxs(e.Fragment,{children:[e.jsxs(d,{variant:"body1",fontWeight:"bold",sx:{backgroundColor:"#324b84",color:"white",padding:"8px 16px",mt:4,textAlign:"center"},children:["Result not generated for this student : ",(w=o==null?void 0:o.listStudentDetail[0])==null?void 0:w.Roll_No," - ",(N=o==null?void 0:o.listStudentDetail[0])==null?void 0:N.Student_Name]}),T&&e.jsx(j,{sx:{width:"100%",my:4,borderTop:"2px dotted black",borderSpacing:"60px"}})]})})};export{J as V};
