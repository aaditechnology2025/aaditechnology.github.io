import{A as he,ad as ge,u as be,c as i,r as x,h9 as U,j as e,B as s,n as L,x as fe,y as ue,I as O,T as h,E as me,F as $,l as je,G as M,ag as z,ai as c,aj as n,h7 as Y,o as V,ah as Te,ak as ve,ab as H}from"./index-CpZD2H93.js";import{d as Se}from"./ChevronRightTwoTone-CAnY7-jl.js";import{d as Ie}from"./HomeTwoTone-BpJsp3JX.js";import{D as Q,U as De}from"./UploadDocument-DIsqNiJZ.js";import{Q as ye}from"./QuestionMark-B_7MKkiz.js";import"./CloudUpload-C2WsbpCZ.js";import"./Errormessage-DVJGTehf.js";import"./UploadDocList-Bl2QzY_T.js";import"./Visibility-DDnH8LZ2.js";const we=()=>{const m=new Date,v=String(m.getDate()).padStart(2,"0"),j=String(m.getMonth()+1).padStart(2,"0"),b=m.getFullYear();return`${v}-${j}-${b}`},Ne=()=>{var N;const m=he(),v=ge(),j=be(),{asUserId:b,asYear:S}=v.state||{},I=i(t=>t.PerformanceGradeAssignment.ISlistSchoolOrgNameDetails),d=i(t=>t.PerformanceGradeAssignment.ISlistUserNameDetails);i(t=>t.PerformanceGradeAssignment.ISlistDescriptionDetails);const f=i(t=>t.PerformanceGradeAssignment.ISlistOriginalSkillIdDetails),u=i(t=>t.PerformanceGradeAssignment.ISlistTeacherTitleDetails),T=i(t=>t.PerformanceGradeAssignment.ISlistParameterIdDetails),D=i(t=>t.PerformanceGradeAssignment.ISlistIsFinalApproverDetails),w=i(t=>t.PerformanceGradeAssignment.ISgradeDropDownList),A=i(t=>t.PerformanceGradeAssignment.ISAttachmentDetails);i(t=>t.PerformanceGradeAssignment.ISlistIsPublishedDetails);const q=i(t=>t.PerformanceGradeAssignment.ISlistEnableRejectButtonDetails);i(t=>t.PerformanceGradeAssignment.ISSubmitStaffPerformanceDetailsMsg),i(t=>t.PerformanceGradeAssignment.ISPublishStaffPerformanceDetailsMsg),i(t=>t.PerformanceGradeAssignment.ISSaveStaffPerformanceEvalDetailsMsg);const J=i(t=>t.PerformanceGradeAssignment.Loading),[_,k]=x.useState(""),[K,P]=x.useState(""),[X,Z]=x.useState(""),[ee,te]=x.useState(""),[re,F]=x.useState(!1),[ae,y]=x.useState(null),[Ae,se]=x.useState(""),[ne,oe]=x.useState(""),[le,ie]=x.useState({}),de=we();x.useEffect(()=>{var t,a,r,o;d.length>0&&(P(((t=d[0])==null?void 0:t.Text13)===""?de:(a=d[0])==null?void 0:a.Text13),k(((r=d[0])==null?void 0:r.Text12)===""||(o=d[0])==null?void 0:o.Text12))},[d]),x.useEffect(()=>{var t,a;(d==null?void 0:d.length)>0&&(te((t=d[0])==null?void 0:t.Text9),Z((a=d[0])==null?void 0:a.Text8))},[d]);const B={asSchoolId:Number(localStorage.getItem("SchoolId")),asUserId:Number(b),asReportingUserId:Number(sessionStorage.getItem("Id")),asYear:Number(S),asAcademicYearId:Number(S)};x.useEffect(()=>{j(U(B))},[j]);function C(){let t=!1,a=D.filter(r=>r.Text3===sessionStorage.getItem("Id"));return a.length>0&&a[0].Text4==="True"&&(t=!0),t}function E(t){var r;return(r=D.filter(o=>o.Text3===t)[0])==null?void 0:r.Text1}function R(t){let a=!1,r=sessionStorage.getItem("Id");return t===r&&status==="2"&&(a=!0),a}function xe(t){let a="";return w.length>0&&w.map((r,o)=>{r.Id===t&&t!=="0"?a=r.Name:r.Id===t&&t==="0"&&(a="")}),a}function G(t,a){let r=T.filter(o=>o.Text2===t&&o.Text5===a);return r.length>0?xe(r[0].Text3):""}function W(t,a){let r=T.filter(o=>o.Text2===t&&o.Text5===a);return r.length>0?r[0].Text4:""}return x.useEffect(()=>{if(f.length>0){const t=f.reduce((a,r)=>(u.filter(l=>l.Text4===r.Text1).forEach(l=>{T.filter(p=>p.Text2===l.Text1).forEach(p=>{const ce=`${r.Text1}-${l.Text1}-${p.Text1}-${p.Text5}-${r.Text7}`,pe=JSON.stringify({id:p.Text1,parameterId:p.Text2,gradeId:p.Text3,observation:p.Text4,reportingUserId:p.Text5});a[ce]=pe})}),a),{});ie(t)}},[f,u,T]),e.jsxs(e.Fragment,{children:[e.jsxs(s,{sx:{px:2},children:[e.jsxs(L,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{pt:5,pb:2},children:[e.jsx(s,{children:e.jsxs(fe,{"aria-label":"breadcrumb",separator:e.jsx(Se,{fontSize:"small"}),sx:{"& .MuiBreadcrumbs-separator":{marginLeft:"4px",marginRight:"4px"}},children:[e.jsx(ue,{to:"/RITeSchool/landing/landing",color:"inherit",style:{textDecoration:"none"},children:e.jsx(O,{sx:{background:t=>t.palette.common.white,boxShadow:"0px 0px 5px 0px rgba(0,0,0,0.15)"},children:e.jsx(Ie,{color:"primary"})})}),e.jsx(h,{variant:"h3",fontSize:"18px",fontWeight:"normal",color:"text.primary",sx:{"&:hover":{fontWeight:"bold"},cursor:"pointer"},onClick:()=>{m(-1)},children:"Performance Evaluation"}),e.jsx(h,{variant:"h3",fontSize:"18px",color:"text.primary",children:"View Report"})]})}),e.jsx(L,{direction:"row",alignItems:"center",gap:1,children:e.jsx(s,{sx:{display:"flex",alignItems:"center"},children:e.jsx(me,{title:"Manage / display performance evaluation details.",children:e.jsx(O,{sx:{color:"white",backgroundColor:$[500],height:"36px !important",":hover":{backgroundColor:$[600]}},children:e.jsx(ye,{})})})})})]}),J?e.jsx(je,{}):e.jsxs(s,{border:1,sx:{p:2,background:"white"},children:[e.jsx(M,{container:!0,spacing:3,children:I==null?void 0:I.map((t,a)=>e.jsxs(M,{item:!0,xs:12,children:[e.jsxs(z,{children:[e.jsx(c,{sx:{backgroundColor:"#F0F0F0"},children:e.jsx(n,{align:"center",sx:{border:"1px solid black"},children:e.jsx(h,{variant:"h4",color:"#38548a",children:t.schoolOrgName})})}),e.jsx(c,{sx:{backgroundColor:"#F0F0F0"},children:e.jsx(n,{align:"center",sx:{border:"1px solid black"},children:e.jsx(h,{variant:"h4",color:"#38548a",children:t.schoolName})})}),e.jsx(c,{sx:{backgroundColor:"#F0F0F0"},children:e.jsxs(n,{align:"center",sx:{border:"1px solid black"},children:["      ",e.jsx(h,{variant:"h4",color:"#38548a",children:t.address})]})}),e.jsx(c,{sx:{backgroundColor:"#F0F0F0"},children:e.jsx(n,{align:"center",sx:{border:"1px solid black"},children:e.jsx(h,{variant:"h4",color:"#38548a",children:"Staff Performance Evaluation"})})})]}),e.jsx("br",{}),d.length>0&&d.map((r,o)=>e.jsxs(e.Fragment,{children:[e.jsxs(s,{sx:{backgroundColor:"#ffffff",display:"flex",justifyContent:"space-between",pr:7},children:[e.jsxs(s,{children:[e.jsx(h,{variant:"h5",pb:.5,children:r.Text7}),[{label:"Status :",value:r.Text3},{label:"Name :",value:r.Text1},{label:"Employee Code :",value:r.Text4},{label:"Date of Joining :",value:Y(r.Text5.split(" ")[0])},{label:"Address :",value:r.Text14}].map((l,g)=>e.jsxs(s,{mb:1,display:"flex",alignItems:"center",children:[e.jsx(s,{display:"inline-block",border:1,borderRadius:4,width:"10vw",pl:1,mr:1,children:l.label}),e.jsx(h,{variant:"h5",component:"span",sx:{textWrap:"wrap",maxWidth:l.label==="Address :"?"35vw":"auto"},children:l.value})]},g))]}),e.jsxs(s,{children:[[{label:"Year :",value:r.Text11},{label:"Post :",value:r.Text2},{label:"Length Of Service :",value:r.Text6}].map((l,g)=>e.jsxs(s,{mb:1,display:"flex",alignItems:"center",children:[e.jsx(s,{display:"inline-block",border:1,borderRadius:4,width:"15vw",pl:1,mr:1,children:l.label}),e.jsx(h,{variant:"h5",component:"span",children:l.value})]},g)),e.jsxs(s,{display:"flex",alignItems:"center",mb:1,children:[e.jsx(s,{display:"inline-flex",alignItems:"center",border:1,borderRadius:4,pl:1,mr:1,sx:{height:"5vh",width:"15vw"},children:"Date of Last Increment:"}),e.jsx(s,{component:"span",sx:{display:"inline-flex",alignItems:"center"},children:C()===!1?e.jsx(h,{variant:"h5",component:"span",children:r.Text12!==""?Y(r.Text12.split(" ")[0]):"-"}):e.jsx(Q,{disabled:!0,maxDate:!0,DateValue:_,onDateChange:l=>{k(l)},label:"",size:"small",fullWidth:!1})})]}),e.jsxs(s,{display:"flex",alignItems:"center",children:[e.jsx(s,{display:"inline-block",border:1,borderRadius:4,width:"15vw",pl:1,mr:1,children:"Highest Education Qualification and Year of Passing:"}),e.jsx(h,{variant:"h5",sx:{textWrap:"wrap",maxWidth:"35vw"},children:r.Text15})]})]})]}),e.jsxs(s,{py:1,children:[e.jsx(s,{display:"inline-flex",border:1,borderRadius:4,alignItems:"center",width:"12vw",height:"4.5vh",pl:1,mr:1,children:"Classes Taught:"}),e.jsx(V,{id:"outlined-basic",value:X,required:!0,label:"",variant:"outlined",onChange:()=>{},size:"small",inputProps:{maxLength:100,readOnly:!0},sx:{height:"2vh",minWidth:"76vw"}}),e.jsx("span",{style:{color:"red"},children:" *"})]}),e.jsxs(s,{py:.5,children:[e.jsx(s,{display:"inline-flex",border:1,borderRadius:4,alignItems:"center",width:"12vw",height:"4.5vh",pl:1,mr:1,children:"Teaching Subjects:"}),e.jsx(V,{id:"outlined-basic",value:ee,required:!0,label:"",onChange:()=>{},inputProps:{maxLength:100,readOnly:!0},variant:"outlined",size:"small",sx:{height:"2vh",minWidth:"76vw"}}),e.jsx("span",{style:{color:"red"},children:" *"})]}),C()&&e.jsxs(s,{py:1,children:[e.jsx(s,{display:"inline-flex",alignItems:"center",border:1,borderRadius:4,pl:1,mr:1,sx:{height:"5vh",width:"12vw"},children:"Effective From Date:"}),e.jsx(s,{component:"span",sx:{display:"inline-flex",alignItems:"center"},children:e.jsx(Q,{disabled:!0,minDate:!0,DateValue:K,onDateChange:l=>{P(l)},label:"",size:"small",fullWidth:!1})})]})]}))]},t.UserId))}),e.jsxs(z,{children:[e.jsx(Te,{children:e.jsxs(c,{sx:{backgroundColor:"#19bed4"},children:[e.jsx(n,{sx:{textAlign:"center",fontWeight:"bold",color:"white",paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)",width:"100px"},children:"Sr. No."}),e.jsx(n,{colSpan:2,sx:{textAlign:"center",fontWeight:"bold",color:"white",paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)",minWidth:"70vw"},children:"Performance Parameter"})]})}),e.jsxs(ve,{children:[Object.keys(le).length>0&&(f==null?void 0:f.length)>0&&f.map((t,a)=>e.jsxs(H.Fragment,{children:[e.jsx(c,{sx:{backgroundColor:"#e5e7eb"},children:e.jsx(n,{colSpan:3,sx:{textAlign:"left",fontWeight:"bold",color:"black",paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"},children:t.Text2})}),(u==null?void 0:u.length)>0&&(()=>{let r=0;return u.map((o,l)=>o.Text4===t.Text1&&e.jsxs(H.Fragment,{children:[e.jsxs(c,{children:[e.jsxs(n,{sx:{textAlign:"center",paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)",borderBottom:"1px solid white"},children:[++r," "]}),e.jsx(n,{colSpan:2,sx:{paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)",fontWeight:"bolder"},children:o.Text2})]}),e.jsxs(c,{children:[e.jsx(n,{sx:{textAlign:"left",fontWeight:"bold",color:"black",paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)",borderBottom:"1px solid white"}}),e.jsx(n,{sx:{backgroundColor:"#f3f4f6",textAlign:"left",fontWeight:"bold",color:"black",paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"},children:"Observer"}),e.jsx(n,{sx:{backgroundColor:"#f3f4f6",textAlign:"left",fontWeight:"bold",color:"black",paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"},children:t.Text7==="2"?"Observation":"Grade"})]}),t.Text8==="False"?e.jsx(e.Fragment,{children:e.jsxs(c,{children:[e.jsx(n,{sx:{paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"}}),e.jsx(n,{sx:{paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"},children:E(b)}),e.jsxs(n,{sx:{padding:t.Text7==="2"&&R(b)?"0":"5px",border:"1px solid rgba(224, 224, 224, 1)",height:"100%"},children:[t.Text7==="2"&&W(o.Text1,b),t.Text7==="3"&&G(o.Text1,b)]})]})}):D.map((g,p)=>e.jsx(e.Fragment,{children:e.jsxs(c,{children:[e.jsx(n,{sx:{paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"}}),e.jsx(n,{sx:{paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"},children:E(g.Text3)}),e.jsxs(n,{sx:{padding:t.Text7==="2"&&R(g.Text3)?"0":"5px",border:"1px solid rgba(224, 224, 224, 1)",height:"100%"},children:[t.Text7==="2"&&W(o.Text1,g.Text3),t.Text7==="3"&&G(o.Text1,g.Text3)]})]},p)}))]},l))})()]},a)),e.jsx(c,{children:e.jsx(n,{colSpan:3,sx:{backgroundColor:"#e5e7eb",textAlign:"left",fontWeight:"bold",color:"black",paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"},children:"Attachment"})}),A.length>0&&A.map((t,a)=>e.jsx(e.Fragment,{children:e.jsxs(c,{children:[e.jsx(n,{sx:{paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"}}),e.jsx(n,{sx:{paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"},children:t.Text1}),e.jsx(n,{sx:{paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"},children:e.jsx("span",{onClick:()=>{F(!0),se(t.Text1),oe(t.Text3)},onMouseEnter:()=>y(a),onMouseLeave:()=>y(null),style:{cursor:"pointer",color:"#6366f1",textDecoration:ae===a?"underline":"none"},children:`${t.Text8===""?"0":t.Text8} Files Uploaded`})})]},a)}))]})]})]})]}),e.jsx(De,{Id:b,ReportingUserId:ne,yearId:S,saveButton:(N=q[0])==null?void 0:N.Text3,open:re,handleClose:t=>{F(!1),t&&j(U(B)),y(null)},RefreshList:()=>{}})]})};export{Ne as default};
