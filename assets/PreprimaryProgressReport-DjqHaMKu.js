import{u as ie,r as a,ar as ne,c as r,ni as de,nj as ce,nk as ue,j as s,B as u,C as me,n as xe,G as m,bI as g,E as A,I as R,bl as b,a9 as he,F as E,H as pe,aH as N,T as D,af as Se,ag as W,ah as fe,ai as v,aj as x,ak as G}from"./index-CpZD2H93.js";import{d as ge}from"./Print-DbQKPBf4.js";import{S as be,a as ye,C as je,N as Ie,X as Pe}from"./XseedRemarks-BBn1recT.js";const ve=()=>{const y=ie(),[l,L]=a.useState("-1"),[h,F]=a.useState(),[i,T]=a.useState(),[O,n]=a.useState(!1),[B,p]=a.useState(""),[X,S]=a.useState("");let o=ne(164);const j=Number(sessionStorage.getItem("AcademicYearId")),I=Number(localStorage.getItem("localSchoolId"));Number(localStorage.getItem("UserId"));const P=Number(sessionStorage.getItem("StandardDivisionId")),z=r(e=>e.PreprimaryProgressReport.ISAllPrimaryClassTeacherss).filter(e=>e.Is_PrePrimary==="Y"),f=r(e=>e.PreprimaryProgressReport.ISlistStudentNameDetails),d=r(e=>e.PreprimaryProgressReport.ISlistAssessmentDetailss),k=r(e=>e.PreprimaryProgressReport.ISAssessmentPublishStatus),V=k.map(e=>e.AssessmentPublishStatus),H=k.map(e=>e.StudentWiseAssessmentPublishStatus);r(e=>e.PreprimaryProgressReport.ISFillStandardwiseSubjects);const _=r(e=>e.PreprimaryProgressReport.ISFillSubjectSections),M=r(e=>e.PreprimaryProgressReport.ISFillSchoolDetails),$=r(e=>e.PreprimaryProgressReport.ISFillGradeDetails),K=r(e=>e.PreprimaryProgressReport.ISFillXseedRemarks),q=r(e=>e.PreprimaryProgressReport.ISFillNonXseedSubjectGrades),C=r(e=>e.PreprimaryProgressReport.ISFillStudentDetails),Y=r(e=>e.PreprimaryProgressReport.ISFillStudentAttendance),J=$.filter(e=>e.ConsideredAsAbsent!=="1"&&e.ConsideredAsExempted!=="1").sort((e,t)=>parseInt(e.SortOrder)-parseInt(t.SortOrder)),Q=r(e=>e.PreprimaryProgressReport.ISFillStudentsLearningOutcomes),Z=r(e=>e.PreprimaryProgressReport.ISFillStudentsLearningOutcomeObservations),ee={asSchoolId:I,asAcadmicYearId:j,asTeacher_id:0},se={asSchoolId:I,asAcademicYearId:j,asStandardDivId:o=="Y"?l:P,asStudentId:0},te={asSchoolId:I,asAcademicYearId:j,asStandardDivisionId:o=="Y"?l:P,asYearwiseStudentId:h,asAssessmentId:i},re=e=>{L(e),S(""),n(!1)},ae=e=>{F(e),n(!1)},U=e=>{T(e),p(""),n(!1)},le=e=>{n(!0),i=="0"&&p("Assessment should be selected."),l=="-1"&&o=="Y"&&S("Class teacher should be selected."),l!=="0"&&o=="Y"&&S(""),l==""&&n(!1),i==""&&n(!1),h==""&&n(!1),i!=="0"&&p("")},w=a.useRef(null),oe=()=>{let e=!1;if(i==="0"&&(p("Assessment should be selected."),e=!0),l==="-1"&&o==="Y"&&(S("Class teacher should be selected."),e=!0),w.current&&!e){const t=w.current.innerHTML,c=window.open("","","height=600,width=800");c.document.write("<html><head><title>Print</title>"+`
                <style>
                  body {
                    font-family: 'Roboto', sans-serif;
                    margin: 0;
                    padding: 20px;
                  }
                  h1, h2, h3, h4 {
                    margin: 0 0 10px;
                    font-family: 'Roboto', sans-serif;
                  }
                  table {
                    width: 100%;
                    border-collapse: collapse;
                  }
                  table, th, td {
                    border: 1px solid black;
                  }
                  th, td {
                    padding: 8px;
                    text-align: center;
                  }
                  .MuiTypography-root {
                    font-family: 'Roboto', sans-serif;
                    font-size: 16px;
                    margin-bottom: 8px;
                  }
                  .MuiTableCell-root {
                    font-family: 'Roboto', sans-serif;
                  }
                  .custom-typography {
                    font-family: 'Roboto', sans-serif;
                    color: #38548a;
                    font-size: 24px;
                    margin-top: 16px;
                    text-align: left;
                  }
                </style>
            `+"</head><body>"),c.document.write(t),c.document.write("</body></html>"),c.document.close(),c.print()}};return a.useEffect(()=>{y(de(ee))},[]),a.useEffect(()=>{y(ce(se))},[l]),a.useEffect(()=>{y(ue(te))},[i,h,l,P]),a.useEffect(()=>{f.length>0&&F(f[0].Value)},[f]),a.useEffect(()=>{d.length>0&&T(d[0].Value)},[d]),s.jsxs(u,{sx:{px:2},children:[s.jsx(me,{navLinks:[{title:"Pre Primary Progress Report",path:"/RITeSchool/Teacher/PreprimaryProgressReport"}],rightActions:s.jsx(s.Fragment,{children:s.jsxs(xe,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"left",gap:1,sx:{mt:{xs:0,sm:0},flexWrap:{xs:"nowrap",sm:"nowrap"}},children:[s.jsx(m,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:o=="Y"&&s.jsx(g,{ItemList:z,sx:{width:{xs:"70vw",sm:"30vw",md:"17vw"}},onChange:re,defaultValue:l,label:"Class Teacher ",size:"small",mandatory:!0})}),s.jsx(m,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:s.jsx(g,{ItemList:f,sx:{width:{xs:"70vw",sm:"30vw",md:"17vw"}},onChange:ae,defaultValue:h,label:"Student ",size:"small"})}),s.jsx(m,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:o=="Y"&&s.jsx(g,{ItemList:d,sx:{width:{xs:"40vw",sm:"20vw",md:"13vw"}},onChange:U,defaultValue:i,label:"Assessment ",size:"small",mandatory:!0})}),s.jsx(m,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:o=="N"&&d.length>1&&s.jsx(g,{ItemList:d,sx:{width:{xs:"40vw",sm:"20vw",md:"15vw"}},onChange:U,defaultValue:i,label:"Assessment ",size:"small",mandatory:!0})}),s.jsxs(m,{item:!0,xs:12,gap:1,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-end"},children:[s.jsx(A,{title:"Show",children:s.jsx(R,{sx:{color:"white",backgroundColor:b[500],"&:hover":{backgroundColor:b[600]}},onClick:le,children:s.jsx(he,{})})}),s.jsx(A,{title:"Displays xseed progress report of selected assessment.",children:s.jsx(R,{sx:{color:"white",backgroundColor:E[500],height:"36px !important",":hover":{backgroundColor:E[600]}},children:s.jsx(pe,{})})}),s.jsx(A,{title:"Print Preview",children:s.jsx(R,{sx:{color:"white",backgroundColor:b[500],"&:hover":{backgroundColor:b[600]}},onClick:oe,children:s.jsx(ge,{})})})]})]})})}),s.jsx(N,{Error:B}),s.jsx(N,{Error:X}),O&&(o=="Y"&&l=="0"||i=="0"?s.jsx("div",{}):V=="N"&&H=="N"?s.jsx(D,{variant:"body1",sx:{textAlign:"center",marginTop:4,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:s.jsx("b",{children:"Assessment result is not available for this student."})}):s.jsx(u,{ref:w,children:C.length>0?C.map(e=>s.jsxs(u,{border:"1px solid grey",mb:4,sx:{px:2,background:"white"},children:[s.jsx(be,{USFillSchoolDetails:M}),s.jsx(ye,{USFillStudentDetails:C.filter(t=>t.YearWiseStudentId==e.YearWiseStudentId),presentCount:Y.filter(t=>t.YearwiseStudentId==e.YearWiseStudentId&&t.IsPresent=="true").length,totalCount:Y.filter(t=>t.YearwiseStudentId==e.YearWiseStudentId).length}),s.jsxs("div",{children:[s.jsx(D,{variant:"h4",textAlign:"left",color:"#38548a",mt:2,children:"Key to Curricular and Co-Curricular"}),s.jsx(Se,{component:u,children:s.jsxs(W,{"aria-label":"simple table",sx:{border:"1px solid lightgrey"},children:[s.jsx(fe,{children:s.jsxs(v,{sx:{background:t=>t.palette.secondary.main,color:t=>t.palette.common.white},children:[s.jsx(x,{sx:{textTransform:"capitalize",color:t=>t.palette.common.white,py:1},children:"Grade Name"}),s.jsx(x,{sx:{textTransform:"capitalize",color:t=>t.palette.common.white,py:1},children:"Description"})]})}),s.jsx(G,{children:J.map(t=>s.jsxs(v,{children:[s.jsx(x,{sx:{py:1},children:t.Name}),s.jsx(x,{sx:{py:1},children:t.Description})]},t.GradeId))})]})}),s.jsx(u,{mt:1,children:s.jsx(W,{"aria-label":"simple table",sx:{border:"1px solid lightgrey"},children:s.jsx(G,{children:s.jsx(v,{sx:{bgcolor:"#F0F0F0",border:"1px solid lightgrey"},children:s.jsxs(x,{sx:{textAlign:"left",py:1,color:"black",p:1},children:[s.jsx("b",{children:"Note :  "})," Ab - Absent        Ex - Exempted "]})})})})})]}),s.jsx(je,{USFillStudentsLearningOutcomes:Q.filter(t=>t.YearwiseStudentId==e.YearWiseStudentId),USFillSubjectSections:_,FillStudentsLearningOutcomeObservations:Z}),s.jsx(Ie,{USFillNonXseedSubjectGrades:q.filter(t=>t.YearwiseStudentId==e.YearWiseStudentId)}),s.jsx(Pe,{USFillXseedRemarks:K.filter(t=>t.YearWiseStudentId==e.YearWiseStudentId)})]},e.YearWiseStudentId)):null})),o=="N"&&d.length<2?s.jsx(D,{variant:"body1",sx:{textAlign:"center",marginTop:4,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:s.jsx("b",{children:"Published assessments are not available."})}):s.jsx("span",{})]})};export{ve as default};
