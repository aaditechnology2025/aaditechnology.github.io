function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/web-BqrOyFFl.js","assets/index-CpZD2H93.js","assets/index-BV_Y88AT.css","assets/ErrorMessages-Cl09dz4o.js","assets/Note-D5w6lthy.js","assets/CardStyle-CBuNm0_N.js","assets/Card-B0aZ7mGs.js","assets/BackButton-D8aQMrwN.js","assets/PageHeader-C9ChZO91.js","assets/ButtonStyle-DAEB_dBE.js","assets/ProfileStyled-TBHpLjzF.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{U as $,V as W,j as e,en as J,eo as Z,r as a,u as K,c as I,fs as Q,t as R,fY as X,fZ as ee,B as F,G as r,f_ as te,bo as se,f$ as ae,g0 as oe}from"./index-CpZD2H93.js";import{E as ie}from"./ErrorMessages-Cl09dz4o.js";import{N as re}from"./Note-D5w6lthy.js";import{B as ne}from"./BackButton-D8aQMrwN.js";import{P as le}from"./PageHeader-C9ChZO91.js";import{B as M}from"./ButtonStyle-DAEB_dBE.js";import{L as ce}from"./CardStyle-CBuNm0_N.js";import{c as de}from"./ProfileStyled-TBHpLjzF.js";var w={},ue=W;Object.defineProperty(w,"__esModule",{value:!0});var O=w.default=void 0,he=ue($()),A=e,me=(0,he.default)([(0,A.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,A.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"},"1")],"CameraAlt");O=w.default=me;var j;(function(t){t.Prompt="PROMPT",t.Camera="CAMERA",t.Photos="PHOTOS"})(j||(j={}));var D;(function(t){t.Rear="REAR",t.Front="FRONT"})(D||(D={}));var v;(function(t){t.Uri="uri",t.Base64="base64",t.DataUrl="dataUrl"})(v||(v={}));const fe=J("Camera",{web:()=>Z(()=>import("./web-BqrOyFFl.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])).then(t=>new t.CameraWeb)});async function ge(t){const n=await(await fetch(t)).blob();return new Promise((g,o)=>{const i=new FileReader;i.onerror=o,i.onload=()=>{typeof i.result=="string"?g(i.result):o("method did not return a string")},i.readAsDataURL(n)})}const pe=()=>{const[t,c]=a.useState([]),n=async(o,i)=>{const p=await ge(o.webPath);return{filepath:i,webviewPath:o.webPath,base64Data:p}};return{photos:t,takePhoto:async()=>{try{const o=await fe.getPhoto({resultType:v.Uri,source:j.Camera,quality:55}),i=new Date().getTime()+".jpeg",u=[await n(o,i)];c(u)}catch{console.error("Failed to browse image")}finally{}}}},xe=["1) The student photo to be uploaded should be in school uniform.","2) Upload or Capture an image file for students photo (Max Height: 151px and Max Width: 112px) ","3) Image size should not exceed 1 mb. Supported file formats are JPG, JPEG, PNG, BMP "];function Se(){const t=K(),c=localStorage.getItem("localSchoolId"),n=sessionStorage.getItem("StudentId"),g=sessionStorage.getItem("AcademicYearId"),o=localStorage.getItem("UserId"),[i,p]=a.useState(""),u=I(s=>s.EditProfile.SaveStudentPhoto),S=I(s=>s.EditProfile.SubmitStudentPhoto),h=I(s=>s.StudentPic.GetStudentpic);h==null||h.IsSubmitted;const N={aiSchoolId:parseInt(c),aiUserId:parseInt(o),aiStudentId:parseInt(n)},k=112,T=151,L=sessionStorage.getItem("StudentName"),y=sessionStorage.getItem("PhotoFilePath"),[G,H]=a.useState(y.length!=0?"data:image/png;base64,"+y:"/imges/defualtUser.jpg"),[l,E]=a.useState(""),[B,m]=a.useState(!0),[_,f]=a.useState(!0);a.useRef(null);const[U,P]=a.useState(""),V=async s=>{if(s.target.files&&s.target.files.length>0){let C=te(s.target.files[0],["jpg","jpeg","png","bmp"],1e6);if(C===null){let b=await se(s.target.files[0]);p(b.slice(b.indexOf(",")+1));let d=new Image;d.src=window.URL.createObjectURL(s.target.files[0]),d.onload=()=>{d.width>k&&d.height>T?(m(!0),f(!1),P(`Image is ${d.height} x ${d.width}, Height and Width of photo file should not exceed 151px and 112px respectively`)):(m(!1),f(!0),E(b))}}else m(!0),P(C)}},{photos:x,takePhoto:q}=pe();a.useEffect(()=>{t(Q(N))},[]),a.useEffect(()=>{h!==null&&(H("data:image/png;base64,"+h.PhotoImage),f(!1))},[h]),a.useEffect(()=>{x!==void 0&&x.length&&(E(x[0].base64Data),m(!1))},[x]),a.useEffect(()=>{P("")},[l]),a.useEffect(()=>{u.Message!==void 0&&(R.success(u.Message,{toastId:"success2"}),t(X()))},[u]),a.useEffect(()=>{S.Message!==void 0&&(R.success(S.Message,{toastId:"success1"}),t(ee()),sessionStorage.setItem("PhotoFilePath",l.slice(l.indexOf(",")+1)),setTimeout(()=>{window.location.reload()},5e3))},[S]);const z=()=>{f(!1),m(!0);const s={aiSchoolId:c,aiStudentId:n,aiInsertedById:o,asPhotoBase64String:l.slice(l.indexOf(",")+1)};t(ae(s))},Y=()=>{f(!0),t(oe({aiStudentId:n,aiUpdatedById:o,aiSchoolId:c,aiAcademicYearId:g}))};return e.jsxs(F,{sx:{px:2},children:[e.jsx(le,{heading:"Edit Profile",subheading:""}),e.jsx(ne,{FromRoute:"/Student/Profile"}),e.jsx(re,{NoteDetail:xe}),e.jsxs(ce,{children:[e.jsxs(de,{sx:{textAlign:"center"},children:[" ",e.jsx("b",{children:"Name : "}),e.jsx("b",{children:L})]}),e.jsxs(F,{sx:{textAlign:"center"},children:[e.jsx("img",{src:l==""?G:l,width:"112",height:"151",style:{border:"1px solid gray"}}),e.jsxs(r,{container:!0,children:[e.jsx(r,{item:!0,xs:6,children:e.jsx("input",{style:{padding:"1em",width:"220px",overflow:"hidden",textOverflow:"ellipsis"},type:"file",accept:"image/*",onChange:V})}),e.jsx(r,{item:!0,xs:6,style:{padding:"1em",marginTop:"2.5px"},onClick:()=>q(),children:e.jsx(O,{})})]}),e.jsx(r,{item:!0,xs:6,sx:{mt:"-3px",mb:"3px"},children:U&&e.jsx(ie,{Error:U})})]}),e.jsxs(r,{container:!0,spacing:3,sx:{textAlign:"center"},children:[e.jsx(r,{item:!0,xs:3}),e.jsx(r,{item:!0,xs:3,children:e.jsx(M,{onClick:z,disabled:B,color:B?"warning":"primary",children:"Save"})}),e.jsx(r,{item:!0,xs:3,children:e.jsx(M,{onClick:Y,disabled:_,color:_?"warning":"primary",children:"Submit"})}),e.jsx(r,{item:!0,xs:3})]})]})]})}const Be=Object.freeze(Object.defineProperty({__proto__:null,default:Se},Symbol.toStringTag,{value:"Module"}));export{j as C,Be as E,D as a};
