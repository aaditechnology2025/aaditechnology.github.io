import{u as Y,r as o,c as g,dL as z,j as t,B as j,l as O,b3 as $,t as H,dM as q,dN as J}from"./index-CpZD2H93.js";import{d as K}from"./Delete--TAmn0eZ.js";import{d as Q}from"./KeyboardArrowUpRounded-Du3Qe5yI.js";import{d as V}from"./Replay-By_7bx7o.js";import{M as W}from"./MoveToTrash-BFwWcvGU.js";import{E as X}from"./ErrorMessages-Cl09dz4o.js";import{L as Z}from"./List3-8A7pHBvM.js";import{B as T}from"./ButtonStyle-DAEB_dBE.js";import"./CheckboxImg-BrcA302U.js";import"./RadioButtonUnchecked-r_6mn_G1.js";const ee=2;function ge(){const f=Y(),[x,b]=o.useState(ee),[n,E]=o.useState(),[s,te]=o.useState([]),[R,c]=o.useState("none"),[I,y]=o.useState(!1),C=window.location.pathname.replace("/RITeSchool/MessageCenter/msgCenter/",""),l=g(e=>e.Sent__Message.SentList),k=g(e=>e.Sent__Message.Loading),w=g(e=>e.Sent__Message.FilterData);l!=null&&(s.length==0&&I==!1&&l.forEach(e=>{e!=null&&s.push(e)}),w==!0?s.length!=0&&l.length!=0?(s.length=0,l.forEach(e=>{e!=null&&s.push(e)})):s.length=0:n!=null&&s.length!=0&&I==!0&&n.GetScheduledSMSResult!=null&&n.GetScheduledSMSResult.length!=0&&n.GetScheduledSMSResult[0].DetailsId!=s[0].DetailsId&&n.GetScheduledSMSResult.forEach(e=>{e!=null&&s.push(e)}));const d=localStorage.getItem("localSchoolId"),S=sessionStorage.getItem("Id"),u=sessionStorage.getItem("RoleId"),m=sessionStorage.getItem("AcademicYearId"),M={asUserId:S,asAcademicYearId:m,asUserRoleId:u,asSchoolId:d,abIsSMSCenter:"0",asFilter:"",asPageIndex:1,asMonthId:"0",asOperator:"",asDate:""};o.useEffect(()=>{f(z(M))},[]);const[A,h]=o.useState(!0),[p,i]=o.useState({DetailInfo:[]}),L=e=>{h(!0);const{value:a,name:D,checked:N}=e,{DetailInfo:v}=p;i(N?{DetailInfo:[...v,a]}:{DetailInfo:v.filter(G=>G!==a)})},F=()=>{const e=p.DetailInfo.join(";"),a={asSchoolId:d,asMessageRecieverDetailsId:e,asMessageDetailsId:e,asIsArchive:"Y",asIsCompeteDelete:0,asFlag:"Sent"};W.MoveToTrash(a).then(D=>{C=="Sent"&&(H.success("Message has been moved to the trash."),f(q(M))),h(!1),i({DetailInfo:[]})}).catch(D=>{alert("error network")})},_=()=>{h(!1),i({DetailInfo:[]})},r=document.getElementById("ScrollableDiv"),B=()=>{b(x+1)},P=()=>{if(r.scrollTop>=400&&c("flex"),r.scrollTop<400&&c("none"),r.scrollHeight-r.scrollTop<=570){y(!0);const e={asUserId:S,asAcademicYearId:m,asUserRoleId:u,asSchoolId:d,abIsSMSCenter:"0",asFilter:"",asPageIndex:x,asMonthId:"0",asOperator:"",asDate:""};J.GetSentMessageList(e).then(a=>{E(a.data)}).catch(a=>{alert("error network")}),B()}},U=e=>{r.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{c("none")},10)};return t.jsxs(t.Fragment,{children:[p.DetailInfo.length!==0?t.jsxs(t.Fragment,{children:[t.jsx(j,{sx:{px:2},children:t.jsxs(j,{display:"flex",flexDirection:"row",justifyContent:"flex-end",children:[t.jsx(T,{color:"primary",endIcon:t.jsx(K,{}),onClick:()=>F(),children:"DELETE"}),"  ",t.jsx(T,{color:"secondary",endIcon:t.jsx(V,{}),onClick:()=>_(),children:"RESET"})]})}),t.jsx("br",{})]}):null,t.jsxs("div",{id:"ScrollableDiv",onScroll:P,style:{position:"absolute",width:"100%",paddingBottom:"100px",height:"570px",overflow:"auto"},children:[k?t.jsx(O,{}):s===null||s.length==0?t.jsx(X,{Error:"No message found"}):t.jsx(t.Fragment,{children:s.map((e,a)=>t.jsx(Z,{data:e,handleChange:L,check:A,Attachments:e.Attachment,FromRoute:"/Sent"},a))}),t.jsx($,{sx:{display:R,position:"fixed",bottom:"95px",zIndex:"4",left:"15px",p:"2px",width:50,height:50,backgroundColor:"white",boxShadow:"5px 5px 10px rgba(163, 177, 198, 0.4), -5px -5px 10px rgba(255, 255, 255, 0.3) !important"},onClick:U,children:t.jsx(Q,{fontSize:"large",color:"success"})})]})]})}export{ge as default};
