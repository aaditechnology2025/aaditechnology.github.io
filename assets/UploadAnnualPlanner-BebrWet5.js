import{j as e,B as p,E as y,I as v,u as R,r as o,z as T,c as h,cA as g,t as A,cB as w,cC as L,a0 as G,a1 as Y,bd as W,a3 as H,T as J,a5 as M,a6 as C,J as z,cD as O,cE as V}from"./index-CpZD2H93.js";import{S as q}from"./SingleFile-VnBjWcb-.js";const X=({IconList:r,ClickIcon:l})=>e.jsx(e.Fragment,{children:r.map((s,t)=>e.jsx(p,{children:e.jsx(y,{title:s.Title,children:e.jsx(v,{sx:s.sx,onClick:()=>{l(s.Action)},children:s.Icon})})},t))}),Z=({openAnnualPlannerDialog:r,setOpenAnnualPlannerDialog:l})=>{const s=R(),[t,f]=o.useState(""),[c,I]=o.useState(""),i=sessionStorage.getItem("AcademicYearId"),N=localStorage.getItem("FolderName"),d=localStorage.getItem("localSchoolId"),S=sessionStorage.getItem("Id"),b=["PDF","JPG","PNG","BMP","JPEG"],j=3e6,{showAlert:D,closeAlert:F}=o.useContext(T),n=h(a=>a.AddPlanner.getfile),u=h(a=>a.AddPlanner.AddAnnual),m=h(a=>a.AddPlanner.deletefile),P=()=>{if(t&&c){const a={asSchoolId:Number(d),asAcademicYearId:Number(i),asSaveFeature:"Event Planner",asFileName:t,asFolderName:N,asBase64String:c,asUpdatedById:Number(S)};s(O(a))}},B={asSchoolId:Number(d),asAcademicYearId:Number(i),asUserId:Number(S)},x={asSchoolId:Number(d),asAcademicYearId:Number(i)};o.useEffect(()=>{s(g(x))},[]);const E=()=>{D({title:"Please Confirm",message:"Are you sure you want to delete the current annual planner file?",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:F,onConfirm:()=>{s(V(B)),F()}})};o.useEffect(()=>{u!=""&&(A.success(u),s(g(x)),s(w()),f(""),I(""))},[u]),o.useEffect(()=>{m!=""&&(A.success(m),s(g(x)),s(L()))},[m]);const U=a=>{f(a.Name),I(a.Value)},k=()=>{n!==""&&window.open(localStorage.getItem("SiteURL")+"RITESCHOOL/DOWNLOADS/Event%20Planner/"+n[0].LinkUrl)};return e.jsxs(e.Fragment,{children:[" ",e.jsxs(G,{open:r,maxWidth:"sm",fullWidth:!0,onClose:()=>l(!1),PaperProps:{sx:{borderRadius:"15px"}},children:[e.jsx(Y,{sx:{bgcolor:"#223354",color:a=>a.palette.common.white},children:e.jsx(W,{onClick:()=>{l(!1)},sx:{color:"White",borderRadius:"7px",position:"absolute",top:"5px",right:"5px",cursor:"pointer","&:hover":{color:"red"}}})}),e.jsx(H,{dividers:!0,children:e.jsxs(p,{children:[e.jsx(J,{variant:"h3",children:"Upload Annual Planner"}),e.jsx(p,{sx:{mt:2},children:e.jsx(q,{ValidFileTypes:b,MaxfileSize:j,ChangeFile:U,errorMessage:"",FileName:t,viewIcon:!0,deleteIcon:!0,FilePath:n.length>0?n[0].LinkUrl:"",clickDelete:E,clickFileName:k,width:"100%"})})]})}),e.jsxs(M,{sx:{py:2,px:3},children:[e.jsx(C,{color:"error",onClick:()=>{l(!1)},children:"Cancel"}),e.jsx(C,{disabled:!(t.length!==0&&c.length!==0),onClick:P,sx:{color:"green","&:hover":{color:"green",backgroundColor:z[100]}},children:"Save"})]})]})]})};export{X as H,Z as U};
