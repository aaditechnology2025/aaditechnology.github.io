import{u as je,r as a,A as ye,ad as Pe,ar as De,c as i,ls as Ce,lf as Ye,ni as Re,nj as we,nk as ve,j as e,B as m,l as Te,C as L,bI as S,E as b,I,bl as p,a9 as ke,F as C,H as W,aH as O,T as F,af as Oe,ag as B,ah as Fe,ai as N,aj as f,ak as z}from"./index-CpZD2H93.js";import{d as V}from"./Print-DbQKPBf4.js";import{S as Ne,a as Ue,C as Ge,N as Ee,X as Xe}from"./XseedRemarks-BBn1recT.js";const _e=()=>{const h=je(),[o,H]=a.useState("-1"),[A,Y]=a.useState(),[d,R]=a.useState(),_=ye(),M=Pe(),{state:t}=M,[$,j]=a.useState(""),[K,y]=a.useState("");let l=De(164);const P=Number(sessionStorage.getItem("AcademicYearId")),x=Number(localStorage.getItem("localSchoolId"));Number(localStorage.getItem("UserId"));const w=Number(sessionStorage.getItem("StandardDivisionId")),q=i(s=>s.PreprimaryProgressReport.ISAllPrimaryClassTeacherss).filter(s=>s.Is_PrePrimary==="Y"),c=i(s=>s.PreprimaryProgressReport.ISlistStudentNameDetails),n=i(s=>s.PreprimaryProgressReport.ISlistAssessmentDetailss),J=i(s=>s.PreprimaryProgressReport.Loading),U=i(s=>s.PreprimaryProgressReport.ISAssessmentPublishStatus),Q=U.map(s=>s.AssessmentPublishStatus),Z=U.map(s=>s.StudentWiseAssessmentPublishStatus);i(s=>s.PreprimaryProgressReport.ISFillStandardwiseSubjects);const ee=i(s=>s.PreprimaryProgressReport.ISFillSubjectSections),se=i(s=>s.PreprimaryProgressReport.ISFillSchoolDetails),te=i(s=>s.PreprimaryProgressReport.ISFillGradeDetails),re=i(s=>s.PreprimaryProgressReport.ISFillXseedRemarks),ae=i(s=>s.PreprimaryProgressReport.ISFillNonXseedSubjectGrades),v=i(s=>s.PreprimaryProgressReport.ISFillStudentDetails),G=i(s=>s.PreprimaryProgressReport.ISFillStudentAttendance),ie=te.filter(s=>s.ConsideredAsAbsent!=="1"&&s.ConsideredAsExempted!=="1").sort((s,r)=>parseInt(s.SortOrder)-parseInt(r.SortOrder)),le=i(s=>s.PreprimaryProgressReport.ISFillStudentsLearningOutcomes),ne=i(s=>s.PreprimaryProgressReport.ISFillStudentsLearningOutcomeObservations),oe=i(s=>s.ProgressReportNew.IsAcademicYearsOfStudent),de={asSchoolId:x,asAcadmicYearId:t.AcademicYear?t.AcademicYear:P,asTeacher_id:0},ce={asSchoolId:x,asAcademicYearId:t.AcademicYear?t.AcademicYear:P,asStandardDivId:l=="Y"?o:t.GetOldStudentDetails.StandardDivisionId?t.GetOldStudentDetails.StandardDivisionId:w,asStudentId:Number(t.GetOldStudentDetails.StudentId)?Number(t.GetOldStudentDetails.StudentId):0},ue={asSchoolId:x,asAcademicYearId:t.AcademicYear?t.AcademicYear:P,asStandardDivisionId:l=="Y"?o:t.GetOldStudentDetails.StandardDivisionId?t.GetOldStudentDetails.StandardDivisionId:w,asYearwiseStudentId:Number(t.GetOldStudentDetails.StudentId)?Number(t.GetOldStudentDetails.StudentId):A,asAssessmentId:d},me={aiSchoolId:x.toString(),asAcademicYearId:P.toString(),aiStudentId:t.StudentId},[D,Se]=a.useState(t.AcademicYear),pe=s=>{Se(s)};a.useEffect(()=>{h(Ce(me))},[t.StudentId]);const E=i(s=>s.ProgressReportNew.IsXseedApplicable),he={asSchoolId:Number(x),asAcadmicYearId:Number(D),asStandardDivisionId:t.GetOldStudentDetails.StandardDivisionId,asStandardId:t.GetOldStudentDetails.StandardId},xe=t.StudentId,ge=t.selectTeacher;a.useEffect(()=>{h(Ye(he))},[D,t.GetOldStudentDetails.StandardDivisionId,t.GetOldStudentDetails.StandardId]);const be=!0;a.useEffect(()=>{E||_("/RITeSchool/Teacher/ProgressReportNew",{state:{AcademicYear:D,newstudntid:xe,Newvalue:be,TeacherID:ge,fromInternal:!0}})},[E]);const[We,u]=a.useState(!!t.USIsXseedApplicable),Ie=s=>{H(s),y(""),u(!1)},fe=s=>{Y(s),u(!1)},T=s=>{R(s),j(""),u(!1)},Ae=s=>{u(!0),d=="0"&&j("Assessment should be selected."),o=="-1"&&l=="Y"&&y("Class teacher should be selected."),o!=="0"&&l=="Y"&&y(""),o==""&&u(!1),d==""&&u(!1),A==""&&u(!1),d!=="0"&&j("")},k=a.useRef(null),X=()=>{let s=!1;if(d==="0"&&(j("Assessment should be selected."),s=!0),o==="-1"&&l==="Y"&&(y("Class teacher should be selected."),s=!0),k.current&&!s){const r=k.current.innerHTML,g=window.open("","","height=600,width=800");g.document.write("<html><head><title>Print</title>"+`
                <style>
                  body {
                    font-family: 'Roboto', sans-serif;
                    margin: 0;
                    padding: 20px;
                  }
                  h1, h2, h3, h4 {
                    margin: 0 0 10px;
                    font-family: 'Roboto', sans-serif;
                  }
                  table {
                    width: 100%;
                    border-collapse: collapse;
                  }
                  table, th, td {
                    border: 1px solid black;
                  }
                  th, td {
                    padding: 8px;
                    text-align: center;
                  }
                  .MuiTypography-root {
                    font-family: 'Roboto', sans-serif;
                    font-size: 16px;
                    margin-bottom: 8px;
                  }
                  .MuiTableCell-root {
                    font-family: 'Roboto', sans-serif;
                  }
                  .custom-typography {
                    font-family: 'Roboto', sans-serif;
                    color: #38548a;
                    font-size: 24px;
                    margin-top: 16px;
                    text-align: left;
                  }
                </style>
            `+"</head><body>"),g.document.write(r),g.document.write("</body></html>"),g.document.close(),g.print()}};return a.useEffect(()=>{h(Re(de))},[t.AcademicYear]),a.useEffect(()=>{h(we(ce))},[o,t.AcademicYear,t.GetOldStudentDetails.StudentId,t.GetOldStudentDetails.StandardDivisionId]),a.useEffect(()=>{h(ve(ue))},[d,A,o,w,t.GetOldStudentDetails.StandardDivisionId,t.GetOldStudentDetails.StudentId,t.AcademicYear]),a.useEffect(()=>{c.length>0&&Y(c[0].Value)},[c]),a.useEffect(()=>{c.length>0&&t.USIsXseedApplicable&&Y(c[1].Value)},[c]),a.useEffect(()=>{n.length>0&&(t.USIsXseedApplicable?R(n[n.length-1].Value):R(n[0].Value))},[n,t.USIsXseedApplicable]),e.jsxs(m,{sx:{px:2},children:[J&&e.jsx(Te,{}),!t.USIsXseedApplicable&&e.jsx(L,{navLinks:[{title:"Pre Primary Progress Report",path:"/RITeSchool/Teacher/PreprimaryProgressReport"}],rightActions:e.jsxs(e.Fragment,{children:[l=="Y"?e.jsx(S,{ItemList:q,sx:{minWidth:"250px"},onChange:Ie,defaultValue:o,label:"Class Teacher ",size:"small",mandatory:!0}):e.jsx("span",{}),e.jsx(S,{ItemList:c,sx:{minWidth:"250px"},onChange:fe,defaultValue:A,label:"Student ",size:"small"}),l=="Y"?e.jsx(S,{ItemList:n,sx:{minWidth:"250px"},onChange:T,defaultValue:d,label:"Assessment ",size:"small",mandatory:!0}):e.jsx("span",{}),l=="N"&&n.length>1?e.jsx(S,{ItemList:n,sx:{minWidth:"250px"},onChange:T,defaultValue:d,label:"Assessment ",size:"small",mandatory:!0}):e.jsx("span",{}),e.jsx(m,{children:e.jsx(b,{title:"Show",children:e.jsx(I,{sx:{color:"white",backgroundColor:p[500],"&:hover":{backgroundColor:p[600]}},onClick:Ae,children:e.jsx(ke,{})})})}),e.jsx(b,{title:"Displays xseed progress report of selected assessment.",children:e.jsx(I,{sx:{color:"white",backgroundColor:C[500],height:"36px !important",":hover":{backgroundColor:C[600]}},children:e.jsx(W,{})})}),e.jsx(m,{children:e.jsx(b,{title:"Print Preview",children:e.jsx(I,{sx:{color:"white",backgroundColor:p[500],"&:hover":{backgroundColor:p[600]}},onClick:X,children:e.jsx(V,{})})})})]})}),t.USIsXseedApplicable&&e.jsx(L,{navLinks:[{title:"Progress Report",path:"/RITeSchool/Teacher/ProgressReportNew"}],rightActions:e.jsxs(e.Fragment,{children:[e.jsx(S,{ItemList:oe,sx:{minWidth:"300px"},onChange:pe,defaultValue:D,label:"Academic Years ",size:"small"}),l=="N"&&n.length>1?e.jsx(S,{ItemList:n,sx:{minWidth:"250px"},onChange:T,defaultValue:d,label:"Assessment ",size:"small",mandatory:!0}):e.jsx("span",{}),e.jsx(b,{title:"Displays xseed progress report of selected assessment.",children:e.jsx(I,{sx:{color:"white",backgroundColor:C[500],height:"36px !important",":hover":{backgroundColor:C[600]}},children:e.jsx(W,{})})}),e.jsx(b,{title:"Print Preview",children:e.jsx(I,{sx:{color:"white",backgroundColor:p[500],"&:hover":{backgroundColor:p[600]}},onClick:X,children:e.jsx(V,{})})})]})}),e.jsx(O,{Error:$}),e.jsx(O,{Error:K}),t.USIsXseedApplicable&&e.jsx(O,{Error:`You are viewing data of old academic year ${t.Acadamicyearname}.`}),e.jsx("br",{}),l=="Y"&&o=="0"||d=="0"?e.jsx("div",{}):Q=="N"&&Z=="N"?e.jsx(F,{variant:"body1",sx:{textAlign:"center",marginTop:4,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:e.jsx("b",{children:"Assessment result is not available for this student."})}):e.jsx(m,{ref:k,children:v.length>0?v.map(s=>e.jsxs(m,{border:"1px solid grey",mb:4,sx:{px:2,background:"white"},children:[e.jsx(Ne,{USFillSchoolDetails:se}),e.jsx(Ue,{USFillStudentDetails:v.filter(r=>r.YearWiseStudentId==s.YearWiseStudentId),presentCount:G.filter(r=>r.YearwiseStudentId==s.YearWiseStudentId&&r.IsPresent=="true").length,totalCount:G.filter(r=>r.YearwiseStudentId==s.YearWiseStudentId).length}),e.jsxs("div",{children:[e.jsx(F,{variant:"h4",textAlign:"left",color:"#38548a",mt:2,children:"Key to Curricular and Co-Curricular"}),e.jsx(Oe,{component:m,children:e.jsxs(B,{"aria-label":"simple table",sx:{border:"1px solid lightgrey"},children:[e.jsx(Fe,{children:e.jsxs(N,{sx:{background:r=>r.palette.secondary.main,color:r=>r.palette.common.white},children:[e.jsx(f,{sx:{textTransform:"capitalize",color:r=>r.palette.common.white,py:1},children:"Grade Name"}),e.jsx(f,{sx:{textTransform:"capitalize",color:r=>r.palette.common.white,py:1},children:"Description"})]})}),e.jsx(z,{children:ie.map(r=>e.jsxs(N,{children:[e.jsx(f,{sx:{py:1},children:r.Name}),e.jsx(f,{sx:{py:1},children:r.Description})]},r.GradeId))})]})}),e.jsx(m,{mt:1,children:e.jsx(B,{"aria-label":"simple table",sx:{border:"1px solid lightgrey"},children:e.jsx(z,{children:e.jsx(N,{sx:{bgcolor:"#F0F0F0",border:"1px solid lightgrey"},children:e.jsxs(f,{sx:{textAlign:"left",py:1,color:"black",p:1},children:[e.jsx("b",{children:"Note :  "})," Ab - Absent        Ex - Exempted "]})})})})})]}),e.jsx(Ge,{USFillStudentsLearningOutcomes:le.filter(r=>r.YearwiseStudentId==s.YearWiseStudentId),USFillSubjectSections:ee,FillStudentsLearningOutcomeObservations:ne}),e.jsx(Ee,{USFillNonXseedSubjectGrades:ae.filter(r=>r.YearwiseStudentId==s.YearWiseStudentId)}),e.jsx(Xe,{USFillXseedRemarks:re.filter(r=>r.YearWiseStudentId==s.YearWiseStudentId)})]},s.YearWiseStudentId)):null}),l=="N"&&n.length<2?e.jsx(F,{variant:"body1",sx:{textAlign:"center",marginTop:4,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:e.jsx("b",{children:"Published assessments are not available."})}):e.jsx("span",{})]})};export{_e as default};
