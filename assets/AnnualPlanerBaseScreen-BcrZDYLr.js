import{r as s,j as e,B as l,T as p,I as U,G as n,gP as De,A as Ie,q as Ae,v as _,u as be,c as g,hB as ve,cA as Ee,hC as we,bO as Pe,bT as Ce,bP as Le,bQ as ye,bS as Me,a6 as $,ay as Ne}from"./index-CpZD2H93.js";import{d as ke,a as Be}from"./ArrowRight-CUT45HBv.js";import{C as j}from"./Card-B0aZ7mGs.js";import{D as I}from"./Dropdown-AVnwFZWJ.js";import{P as Ye}from"./PageHeader-C9ChZO91.js";import{I as Fe}from"./icon1-C8PiITKb.js";import{e as Ge}from"./CardStyle-CBuNm0_N.js";import{c as Te}from"./DotLegendStyled-CQchpEqY.js";import He from"./AddAnnualPlaner-g7nhbWgf.js";import"./SingleFile-VnBjWcb-.js";import"./CloudUpload-C2WsbpCZ.js";import"./Errormessage-DVJGTehf.js";import"./ButtonStyle-DAEB_dBE.js";const Ve=({item:a,clickItem:r,DefaultValue:o,options:u=void 0})=>{s.useState(!1),s.useState([]);const c=h=>{a.IsClickable&&r(h)};return e.jsx("div",{children:e.jsxs(j,{component:l,py:1,sx:{height:"100px",width:"120px",cursor:"pointer",color:a.Value==o?"yellow":a.BackgroundColor,backgroundColor:"#BEDAE3"},onClick:()=>c(a.Value),style:{color:a.ForeColur},children:[e.jsx(p,{children:a.Name}),e.jsx("b",{children:e.jsx(l,{dangerouslySetInnerHTML:{__html:a.Text1}})})]})})},Re=({ItemList:a,ClickItem:r,ClickPreNext:o,formattedDate:u,DefaultValue:c,ArrayList:h=[]})=>{const m=x=>{let i;u.split(" ").length==2&&(i=new Date("1 "+u)),i=new Date(u),i.setMonth(i.getMonth()+x),o(De(i))};return e.jsxs(e.Fragment,{children:[e.jsx(l,{sx:{},children:e.jsxs(j,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#BEDAE3"},children:[e.jsx(U,{onClick:()=>m(-1),sx:{float:"left"},children:e.jsx(ke,{})}),e.jsx(p,{sx:{fontWeight:"bold"},children:u}),e.jsx(U,{onClick:()=>m(1),sx:{float:"right"},children:e.jsx(Be,{})})]})}),e.jsxs(j,{component:l,p:2,mt:1.5,children:[e.jsx(n,{container:!0,columnSpacing:10,rowSpacing:1,children:h.map((x,i)=>e.jsx(e.Fragment,{children:e.jsx(n,{item:!0,xs:1.71,sx:{textAlign:"center"},children:e.jsx("b",{children:x.Header})},i)}))}),e.jsx("br",{}),e.jsx(n,{container:!0,columnSpacing:7,rowSpacing:1,children:a.map((x,i)=>e.jsx(n,{item:!0,lg:1.71,sx:{textAlign:"center"},children:e.jsx(Ve,{item:x,clickItem:()=>r(x.Value),DefaultValue:c})},i))})]})]})},B=({text:a,color:r})=>e.jsxs(l,{sx:{display:"flex"},children:[e.jsx(Te,{color:r}),e.jsxs(Ge,{children:[" ",a," "]}),e.jsx("br",{})]}),tt=()=>{const a=Ie();let{DateFrommon:r,DateFromyear:o}=Ae();r=_(r),o=_(o);const u=new Date(Number(o),Number(r)).getMonth(),c=be(),h=g(t=>t.AnnualPlanerBaseScreen.ISSelectStandardList),m=g(t=>t.AnnualPlanerBaseScreen.ISSelectDivisionList),x=g(t=>t.AnnualPlanerBaseScreen.ISSelectMonthList),i=g(t=>t.AnnualPlanerBaseScreen.ISSelectYearList),O=g(t=>t.AnnualPlanerBaseScreen.ISEventsDataList),W=g(t=>t.AnnualPlanerBaseScreen.IGetAssociatedStandardsP),Y=g(t=>t.AddPlanner.getfile),q=new Date().getFullYear().toString(),J=(new Date().getMonth()+1).toString(),f=sessionStorage.getItem("AcademicYearId"),S=localStorage.getItem("localSchoolId"),F=sessionStorage.getItem("Id");sessionStorage.getItem("TeacherId"),sessionStorage.getItem("RoleId");const[w,P]=s.useState({selectedDate:null}),[Q,C]=s.useState(),[L,y]=s.useState(),[A,G]=s.useState(""),[b,T]=s.useState(""),[v,H]=s.useState(J),[E,V]=s.useState(q),[z,K]=s.useState("0"),X="These events may change due to unavoidable reasons without prior notice",Z=[{Id:1,Header:"Sun"},{Id:2,Header:"Mon"},{Id:3,Header:"Tue"},{Id:4,Header:"Wed"},{Id:5,Header:"Thu"},{Id:6,Header:"Fri"},{Id:7,Header:"Sat"}],ee=JSON.parse(sessionStorage.getItem("ScreensAccessPermission")),te=()=>{let t="N";return ee.map(d=>{d.ScreenName==="Annual Planner"&&(t=d.IsFullAccess)}),t};function se(t){const d=t||new Date,M=new Date(d).toLocaleString("default",{month:"short"}),N=new Date(d).getMonth(),D=new Date(d).getFullYear(),k=`${M} ${D}`;P({selectedDate:k}),y(u),C(o),C(D),y(N+1)}s.useEffect(()=>{localStorage.setItem("url",window.location.pathname),se(),r!=null&&P({selectedDate:`${new Date(u+"/01/"+o).toLocaleString("default",{month:"short"})} ${o}`})},[]),s.useEffect(()=>{(r||o!=null)&&(y(r),C(o))},[r,o]),s.useEffect(()=>{L!==void 0&&c(ve(ae))},[L]),s.useEffect(()=>{c(Ee(ne))},[]);const ne={asSchoolId:Number(S),asAcademicYearId:Number(f)},ae={asMonth:L,asAcademicYearId:f,asSchoolId:S,asYear:Q,asUserId:F},re={asSchoolId:Number(S),asAcademicYearId:Number(f),asUserId:Number(F)},oe={asSchoolId:Number(S)},ce={asSchoolId:Number(S)},le={asSchoolId:Number(S),asAcademicYearId:Number(f),asStandardId:1062},ie={asSchoolId:Number(S),asAcademicYearId:Number(f),asMonthId:Number(v),asYear:Number(E),asStandardId:Number(A),asDivisionId:Number(b),asEventType:""},de={asSchoolId:18,asAcademicYearId:54};s.useEffect(()=>{c(we(de))},[]),s.useEffect(()=>{c(Pe(re))},[]),s.useEffect(()=>{c(Ce(le))},[]),s.useEffect(()=>{c(Le(oe))},[]),s.useEffect(()=>{c(ye(ce))},[]),s.useEffect(()=>{A!=""&&b!=""&&v!=""&&E!=""&&w!=""&&c(Me(ie))},[A,b,v,E,w]),s.useEffect(()=>{h.length>0&&m.length>0&&(G(h[0].Value),T(m[0].Value))},[h,m]);const ue=t=>{G(t)},he=t=>{K(t)},xe=t=>{T(t)},me=t=>{H(t)},Se=t=>{V(t)},ge=t=>{const d=t||new Date,M=new Date(d).toLocaleString("default",{month:"short"}),N=new Date(d).getMonth(),D=new Date(d).getFullYear(),k=`${M} ${D}`;P({selectedDate:k}),H(N.toString()),V(D.toString())},je=t=>{alert(t),a("/RITeSchool/Teacher/EventManegement/"+Ne(t),{state:{fromInternal:!0}})},pe=()=>{Y!==""&&window.open(localStorage.getItem("SiteURL")+"/RITeSchool/DOWNLOADS/Event%20Planner/"+Y[0].LinkUrl)},fe=t=>{a("/RITeSchool/common/EventOverview",{state:{fromInternal:!0}})},R=te()==="N"?0:null;return e.jsxs(l,{sx:{px:2},children:[e.jsx(Ye,{heading:"Annual Planner",subheading:""}),e.jsx(l,{sx:{float:"right"},children:e.jsx(Fe,{Note:X})}),e.jsxs(n,{container:!0,spacing:12,children:[e.jsx(n,{item:!0,xs:2,children:e.jsxs(l,{sx:{display:"flex",gap:"20px"},children:[e.jsx(B,{color:"Holiday",text:"Holidays"}),e.jsx(B,{color:"Exam",text:"Exams"}),e.jsx(B,{color:"Events",text:"Events"})]})}),R?e.jsx(n,{item:!0,xs:2,children:e.jsx(He,{})}):e.jsx(n,{item:!0,xs:2,children:e.jsx($,{variant:"outlined",onClick:pe,children:"Annual Planner"})}),e.jsx(n,{item:!0,xs:2,children:e.jsx($,{variant:"outlined",onClick:fe,children:"Events Overview"})})]}),e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:1,children:e.jsx(j,{sx:{backgroundColor:"#BEDAE3"},children:e.jsx(p,{component:l,p:.5,children:"Select Std :"})})}),R?e.jsx(n,{item:!0,xs:2,children:e.jsx(I,{Array:W,handleChange:he,defaultValue:z})}):e.jsx(n,{item:!0,xs:2,children:e.jsx(I,{Array:h,handleChange:ue,defaultValue:A})}),e.jsx(n,{item:!0,xs:1,children:e.jsx(j,{sx:{backgroundColor:"#BEDAE3"},children:e.jsx(p,{component:l,p:.5,children:"Select Div :"})})}),e.jsx(n,{item:!0,xs:2,children:e.jsx(I,{Array:m,handleChange:xe,defaultValue:b,label:"Select Division"})}),e.jsx(n,{item:!0,xs:1.2,children:e.jsx(j,{sx:{backgroundColor:"#BEDAE3"},children:e.jsxs(p,{component:l,p:.5,children:["Select Month :"," "]})})}),e.jsx(n,{item:!0,xs:1.8,children:e.jsx(I,{Array:x,handleChange:me,defaultValue:v,label:"Select Month"})}),e.jsx(n,{item:!0,xs:1,children:e.jsx(j,{sx:{backgroundColor:"#BEDAE3"},children:e.jsx(p,{component:l,p:.5,children:"Select Year :"})})}),e.jsx(n,{item:!0,xs:2,children:e.jsx(I,{Array:i,handleChange:Se,defaultValue:E,label:"Select Year"})})]}),e.jsx("br",{}),e.jsx(Re,{ItemList:O,ClickItem:je,ClickPreNext:ge,formattedDate:w.selectedDate,DefaultValue:!0,ArrayList:Z})]})};export{tt as default};
